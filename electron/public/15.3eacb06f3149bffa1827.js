(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"1jcm":function(e,t,a){"use strict";a.d(t,"a",(function(){return w})),a.d(t,"b",(function(){return I}));var n=a("vuIU"),o=a("Ji7U"),r=a("LK+K"),i=a("1OyB"),c=a("GU7r"),l=a("fXoL"),s=a("FKr1"),u=a("8LU1"),d=a("3Pt+"),b=a("R1ws"),p=a("u47x"),m=["thumbContainer"],h=["toggleBar"],f=["input"],g=function(){return{enterDuration:150}},v=["*"],y=new l.s("mat-slide-toggle-default-options",{providedIn:"root",factory:function(){return{disableToggleValue:!1}}}),S=0,R={provide:d.m,useExisting:Object(l.V)((function(){return w})),multi:!0},k=function e(t,a){Object(i.a)(this,e),this.source=t,this.checked=a},P=function e(t){Object(i.a)(this,e),this._elementRef=t},C=Object(s.C)(Object(s.x)(Object(s.y)(Object(s.z)(P)),"accent")),w=function(){var e=function(e){Object(o.a)(a,e);var t=Object(r.a)(a);function a(e,n,o,r,c,s){var u;return Object(i.a)(this,a),(u=t.call(this,e))._focusMonitor=n,u._changeDetectorRef=o,u.defaults=c,u._animationMode=s,u._onChange=function(e){},u._onTouched=function(){},u._uniqueId="mat-slide-toggle-".concat(++S),u._required=!1,u._checked=!1,u.name=null,u.id=u._uniqueId,u.labelPosition="after",u.ariaLabel=null,u.ariaLabelledby=null,u.change=new l.o,u.toggleChange=new l.o,u.tabIndex=parseInt(r)||0,u}return Object(n.a)(a,[{key:"ngAfterContentInit",value:function(){var e=this;this._focusMonitor.monitor(this._elementRef,!0).subscribe((function(t){"keyboard"===t||"program"===t?e._inputElement.nativeElement.focus():t||Promise.resolve().then((function(){return e._onTouched()}))}))}},{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"_onChangeEvent",value:function(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}},{key:"_onInputClick",value:function(e){e.stopPropagation()}},{key:"writeValue",value:function(e){this.checked=!!e}},{key:"registerOnChange",value:function(e){this._onChange=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e,this._changeDetectorRef.markForCheck()}},{key:"focus",value:function(e){this._focusMonitor.focusVia(this._inputElement,"keyboard",e)}},{key:"toggle",value:function(){this.checked=!this.checked,this._onChange(this.checked)}},{key:"_emitChangeEvent",value:function(){this._onChange(this.checked),this.change.emit(new k(this,this.checked))}},{key:"_onLabelTextChange",value:function(){this._changeDetectorRef.detectChanges()}},{key:"required",get:function(){return this._required},set:function(e){this._required=Object(u.c)(e)}},{key:"checked",get:function(){return this._checked},set:function(e){this._checked=Object(u.c)(e),this._changeDetectorRef.markForCheck()}},{key:"inputId",get:function(){return"".concat(this.id||this._uniqueId,"-input")}}]),a}(C);return e.\u0275fac=function(t){return new(t||e)(l.Mb(l.l),l.Mb(p.h),l.Mb(l.h),l.Xb("tabindex"),l.Mb(y),l.Mb(b.a,8))},e.\u0275cmp=l.Gb({type:e,selectors:[["mat-slide-toggle"]],viewQuery:function(e,t){var a;1&e&&(l.Jc(m,!0),l.Jc(h,!0),l.Jc(f,!0)),2&e&&(l.oc(a=l.ac())&&(t._thumbEl=a.first),l.oc(a=l.ac())&&(t._thumbBarEl=a.first),l.oc(a=l.ac())&&(t._inputElement=a.first))},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(e,t){2&e&&(l.Vb("id",t.id),l.Cb("tabindex",t.disabled?null:-1)("aria-label",null)("aria-labelledby",null),l.Eb("mat-checked",t.checked)("mat-disabled",t.disabled)("mat-slide-toggle-label-before","before"==t.labelPosition)("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[l.Ab([R]),l.yb],ngContentSelectors:v,decls:16,vars:18,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,t){if(1&e&&(l.ic(),l.Sb(0,"label",0,1),l.Sb(2,"div",2,3),l.Sb(4,"input",4,5),l.Zb("change",(function(e){return t._onChangeEvent(e)}))("click",(function(e){return t._onInputClick(e)})),l.Rb(),l.Sb(6,"div",6,7),l.Nb(8,"div",8),l.Sb(9,"div",9),l.Nb(10,"div",10),l.Rb(),l.Rb(),l.Rb(),l.Sb(11,"span",11,12),l.Zb("cdkObserveContent",(function(){return t._onLabelTextChange()})),l.Sb(13,"span",13),l.Ec(14,"\xa0"),l.Rb(),l.hc(15),l.Rb(),l.Rb()),2&e){var a=l.pc(1),n=l.pc(12);l.Cb("for",t.inputId),l.Bb(2),l.Eb("mat-slide-toggle-bar-no-side-margin",!n.textContent||!n.textContent.trim()),l.Bb(2),l.jc("id",t.inputId)("required",t.required)("tabIndex",t.tabIndex)("checked",t.checked)("disabled",t.disabled),l.Cb("name",t.name)("aria-checked",t.checked.toString())("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledby),l.Bb(5),l.jc("matRippleTrigger",a)("matRippleDisabled",t.disableRipple||t.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",l.lc(17,g))}},directives:[s.s,c.a],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),e}(),x=function(){var e=function e(){Object(i.a)(this,e)};return e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({factory:function(t){return new(t||e)}}),e}(),I=function(){var e=function e(){Object(i.a)(this,e)};return e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({factory:function(t){return new(t||e)},imports:[[x,s.t,s.j,c.c],x,s.j]}),e}()},goZa:function(e,t,a){"use strict";a.r(t),a.d(t,"PurchasesModule",(function(){return Ee}));var n=a("ofXK"),o=a("/1cH"),r=a("2ChS"),i=a("bTqV"),c=a("Wp6s"),l=a("iadO"),s=a("f0Cb"),u=a("7EHt"),d=a("kmnG"),b=a("NFeN"),p=a("qFsG"),m=a("STbY"),h=a("M9IT"),f=a("Xa2L"),g=a("d3UM"),v=a("XhcP"),y=a("1jcm"),S=a("+0xr"),R=a("wZkO"),k=a("Qu3c"),P=a("3Pt+"),C=a("tyNb"),w=a("AytR"),x=a("fXoL");function I(e,t){if(1&e&&(x.Sb(0,"mat-expansion-panel",5),x.Sb(1,"mat-expansion-panel-header"),x.Ec(2),x.Rb(),x.Sb(3,"div",6),x.Sb(4,"mat-form-field",7),x.Sb(5,"mat-label"),x.Ec(6,"Purchase"),x.Rb(),x.Nb(7,"input",8),x.Rb(),x.Sb(8,"mat-form-field",7),x.Sb(9,"mat-label"),x.Ec(10,"Quantity"),x.Rb(),x.Nb(11,"input",8),x.Rb(),x.Sb(12,"mat-form-field",7),x.Sb(13,"mat-label"),x.Ec(14,"Amount"),x.Rb(),x.Nb(15,"input",8),x.Rb(),x.Rb(),x.Rb()),2&e){var a=t.$implicit;x.Bb(2),x.Gc(" ",a.product.product," "),x.Bb(5),x.jc("readonly",!0)("value",a.purchase),x.Bb(4),x.jc("readonly",!0)("value",a.quantity),x.Bb(4),x.jc("readonly",!0)("value",a.amount)}}var j,_=function(){function e(e,t){this._bottomSheetRef=e,this.data=t}return e.prototype.getDate=function(e){return e&&e.iso?e.iso:e},e.\u0275fac=function(t){return new(t||e)(x.Mb(r.d),x.Mb(r.a))},e.\u0275cmp=x.Gb({type:e,selectors:[["smartstock-purchase-details"]],decls:29,vars:13,consts:[[1,"container",2,"min-width","300px"],["mat-card-title",""],[1,"row","d-flex","flex-column"],["class","mat-elevation-z0",4,"ngFor","ngForOf"],[2,"margin-bottom","24px"],[1,"mat-elevation-z0"],[1,"d-flex","flex-row","flex-wrap"],["appearance","fill",1,"my-input",2,"margin","5px"],["matInput","",3,"readonly","value"]],template:function(e,t){1&e&&(x.Sb(0,"div",0),x.Sb(1,"div",1),x.Ec(2),x.Rb(),x.Sb(3,"div",2),x.Sb(4,"mat-card-subtitle"),x.Ec(5,"Purchase date"),x.Rb(),x.Sb(6,"h5"),x.Ec(7),x.ec(8,"date"),x.Rb(),x.Nb(9,"mat-divider"),x.Sb(10,"mat-card-subtitle"),x.Ec(11,"Due date"),x.Rb(),x.Sb(12,"h5"),x.Ec(13),x.ec(14,"date"),x.Rb(),x.Nb(15,"mat-divider"),x.Sb(16,"mat-card-subtitle"),x.Ec(17,"Amount"),x.Rb(),x.Sb(18,"h5"),x.Ec(19),x.ec(20,"currency"),x.Rb(),x.Nb(21,"mat-divider"),x.Sb(22,"mat-card-subtitle"),x.Ec(23,"Supplier"),x.Rb(),x.Sb(24,"h5"),x.Ec(25),x.Rb(),x.Nb(26,"mat-divider"),x.Cc(27,I,16,7,"mat-expansion-panel",3),x.Nb(28,"span",4),x.Rb(),x.Rb()),2&e&&(x.Bb(2),x.Fc("Invoice #"+t.data.refNumber+" Details"),x.Bb(5),x.Fc(x.fc(8,6,t.getDate(t.data.date))),x.Bb(6),x.Fc(x.fc(14,8,t.getDate(t.data.due))),x.Bb(6),x.Fc(x.gc(20,10,t.data.amount,"TZS ")),x.Bb(6),x.Fc(t.data.supplier.name),x.Bb(2),x.jc("ngForOf",t.data.items))},directives:[c.h,c.g,s.a,n.m,u.c,u.d,d.c,d.f,p.b],pipes:[n.f,n.d],encapsulation:2}),e}(),E=a("VcMg"),B=a("4vfi"),N=a("nBS7"),O=a("tk/3"),F=function(e,t,a,n){return new(a||(a=Promise))((function(o,r){function i(e){try{l(n.next(e))}catch(t){r(t)}}function c(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,c)}l((n=n.apply(e,t||[])).next())}))},D=function(e,t){var a,n,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],n=0}finally{a=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}},A=function(){function e(e,t,a){this._httpClient=e,this._storage=t,this._settings=a}return e.prototype.recordPayment=function(e){return F(this,void 0,void 0,(function(){var t;return D(this,(function(a){switch(a.label){case 0:return[4,this._storage.getActiveShop()];case 1:return t=a.sent(),[2,B.BFast.database(t.projectId).collection("purchases").query().byId(e).updateBuilder().set("paid",!0).update()]}}))}))},e.prototype.addAllInvoices=function(e,t){},e.prototype.addAllPurchase=function(e,t){},e.prototype.addAllReceipts=function(e,t){},e.prototype.addInvoice=function(e,t){},e.prototype.addPurchase=function(e){return F(this,void 0,void 0,(function(){var t;return D(this,(function(a){switch(a.label){case 0:return[4,this._storage.getActiveShop()];case 1:return t=a.sent(),[2,B.BFast.functions(t.projectId).request(this._settings.ssmFunctionsURL+"/functions/purchases/"+t.projectId).post(e,{headers:this._settings.ssmFunctionsHeader})]}}))}))},e.prototype.addReceipt=function(e,t){},e.prototype.deleteInvoice=function(e,t){},e.prototype.deleteReceipts=function(e,t){},e.prototype.getAllInvoice=function(e){},e.prototype.deletePurchase=function(e){return F(this,void 0,void 0,(function(){var t;return D(this,(function(a){switch(a.label){case 0:return[4,this._storage.getActiveShop()];case 1:return t=a.sent(),[2,B.BFast.database(t.projectId).collection("purchase").query().byId(e.id).delete()]}}))}))},e.prototype.getAllPurchase=function(e){return F(this,void 0,void 0,(function(){var t;return D(this,(function(a){switch(a.label){case 0:return[4,this._storage.getActiveShop()];case 1:return t=a.sent(),[2,B.BFast.database(t.projectId).collection("purchases").query().orderBy("_created_at",-1).size(e.size).skip(e.skip).find()]}}))}))},e.prototype.getAllReceipts=function(e){e(null)},e.prototype.getInvoice=function(e,t){},e.prototype.getPurchase=function(e,t){},e.prototype.getAllSupplier=function(e){return F(this,void 0,void 0,(function(){var e,t;return D(this,(function(a){switch(a.label){case 0:return[4,this._storage.getActiveShop()];case 1:return e=a.sent(),[4,B.BFast.database(e.projectId).collection("suppliers").getAll()];case 2:return(t=a.sent()).sort((function(e,t){return new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()})),[2,t]}}))}))},e.prototype.getReceipt=function(e,t){},e.prototype.updatePurchase=function(e,t){},e.\u0275fac=function(t){return new(t||e)(x.Wb(O.a),x.Wb(N.a),x.Wb(E.a))},e.\u0275prov=x.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),q=a("wROQ"),M=a("dNgK"),T=a("veC1"),L=a("eQIs"),V=a("doN5"),Z=(j=function(e,t){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}j(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});function G(e,t){if(1&e&&(x.Sb(0,"button",20),x.Sb(1,"mat-icon"),x.Ec(2," more_vert "),x.Rb(),x.Rb()),2&e){x.dc();var a=x.pc(10);x.jc("matMenuTriggerFor",a)}}function K(e,t){1&e&&(x.Sb(0,"th",31),x.Ec(1,"Ref#"),x.Rb())}function Q(e,t){if(1&e&&(x.Sb(0,"td",32),x.Ec(1),x.Rb()),2&e){var a=t.$implicit;x.Bb(1),x.Fc(a.refNumber)}}function W(e,t){1&e&&(x.Sb(0,"th",31),x.Ec(1,"Channel"),x.Rb())}function U(e,t){if(1&e&&(x.Sb(0,"td",32),x.Ec(1),x.Rb()),2&e){var a=t.$implicit;x.Bb(1),x.Fc(a.type)}}function $(e,t){1&e&&(x.Sb(0,"th",31),x.Ec(1,"Amount ( TZS )"),x.Rb())}function J(e,t){if(1&e&&(x.Sb(0,"td",32),x.Ec(1),x.ec(2,"number"),x.Rb()),2&e){var a=t.$implicit;x.Bb(1),x.Fc(x.fc(2,1,a.amount))}}function z(e,t){1&e&&(x.Sb(0,"th",31),x.Ec(1,"Status"),x.Rb())}function H(e,t){if(1&e&&(x.Sb(0,"td",32),x.Ec(1),x.Rb()),2&e){var a=t.$implicit;x.Bb(1),x.Fc(a.paid?"Paid":"Not Paid")}}function X(e,t){1&e&&(x.Sb(0,"th",31),x.Sb(1,"div",33),x.Sb(2,"span"),x.Ec(3,"Actions"),x.Rb(),x.Rb(),x.Rb())}function Y(e,t){if(1&e){var a=x.Tb();x.Sb(0,"button",16),x.Zb("click",(function(){x.tc(a);var e=x.dc().$implicit;return x.dc(3).recordPayment(e)})),x.Ec(1,"Record Payment "),x.Rb()}}function ee(e,t){if(1&e){var a=x.Tb();x.Sb(0,"td",32),x.Sb(1,"div",33),x.Sb(2,"button",20),x.Sb(3,"mat-icon"),x.Ec(4,"more_vert"),x.Rb(),x.Rb(),x.Sb(5,"mat-menu",null,34),x.Sb(7,"button",16),x.Zb("click",(function(){x.tc(a);var e=t.$implicit;return x.dc(3).showPurchaseDetails(e)})),x.Ec(8,"View"),x.Rb(),x.Cc(9,Y,2,0,"button",35),x.Rb(),x.Rb(),x.Rb()}if(2&e){var n=t.$implicit,o=x.pc(6);x.Bb(2),x.jc("matMenuTriggerFor",o),x.Bb(7),x.jc("ngIf",!n.paid)}}function te(e,t){1&e&&x.Nb(0,"tr",36)}function ae(e,t){1&e&&x.Nb(0,"tr",37)}function ne(e,t){if(1&e&&(x.Sb(0,"table",21),x.Qb(1,22),x.Cc(2,K,2,0,"th",23),x.Cc(3,Q,2,1,"td",24),x.Pb(),x.Qb(4,25),x.Cc(5,W,2,0,"th",23),x.Cc(6,U,2,1,"td",24),x.Pb(),x.Qb(7,26),x.Cc(8,$,2,0,"th",23),x.Cc(9,J,3,3,"td",24),x.Pb(),x.Qb(10,27),x.Cc(11,z,2,0,"th",23),x.Cc(12,H,2,1,"td",24),x.Pb(),x.Qb(13,28),x.Cc(14,X,4,0,"th",23),x.Cc(15,ee,10,2,"td",24),x.Pb(),x.Cc(16,te,1,0,"tr",29),x.Cc(17,ae,1,0,"tr",30),x.Rb()),2&e){var a=x.dc(2);x.jc("dataSource",a.purchasesDatasource),x.Bb(16),x.jc("matHeaderRowDef",a.purchaseTableColumns),x.Bb(1),x.jc("matRowDefColumns",a.purchaseTableColumns)}}function oe(e,t){1&e&&x.Nb(0,"mat-progress-spinner",41),2&e&&x.jc("diameter",20)}function re(e,t){if(1&e){var a=x.Tb();x.Sb(0,"mat-card-title",38),x.Sb(1,"button",39),x.Zb("click",(function(){return x.tc(a),x.dc(2).loadMore()})),x.Ec(2," Load More "),x.Cc(3,oe,1,1,"mat-progress-spinner",40),x.Rb(),x.Rb()}if(2&e){var n=x.dc(2);x.Bb(1),x.jc("disabled",n.loadMoreProgress),x.Bb(2),x.jc("ngIf",n.loadMoreProgress)}}function ie(e,t){1&e&&x.Nb(0,"mat-progress-spinner",42),2&e&&x.jc("diameter",30)}function ce(e,t){if(1&e){var a=x.Tb();x.Sb(0,"div",7),x.Sb(1,"mat-tab-group",8),x.Sb(2,"mat-tab",9),x.Sb(3,"mat-card",10),x.Sb(4,"mat-card-title",11),x.Sb(5,"button",12),x.Ec(6,"Add Purchase "),x.Rb(),x.Nb(7,"span",13),x.Cc(8,G,3,1,"button",14),x.Sb(9,"mat-menu",null,15),x.Sb(11,"button",16),x.Zb("click",(function(){return x.tc(a),x.dc().reload()})),x.Ec(12,"Reload"),x.Rb(),x.Rb(),x.Rb(),x.Sb(13,"mat-card-content"),x.Cc(14,ne,18,3,"table",17),x.Cc(15,re,4,2,"mat-card-title",18),x.Cc(16,ie,1,1,"mat-progress-spinner",19),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb()}if(2&e){var n=x.dc();x.Bb(8),x.jc("ngIf",!n.getPurchaseProgress),x.Bb(6),x.jc("ngIf",!n.getPurchaseProgress&&n.purchasesDatasource&&n.purchasesDatasource.data.length>0),x.Bb(1),x.jc("ngIf",!n.getPurchaseProgress&&n.purchasesDatasource&&n.purchasesDatasource.data.length>0),x.Bb(1),x.jc("ngIf",n.getPurchaseProgress)}}function le(e,t){1&e&&x.Nb(0,"smartstock-purchase-mobile")}function se(e,t){1&e&&x.Nb(0,"smartstock-bottom-bar")}var ue=function(e){function t(t,a,n){var o=e.call(this)||this;return o.purchaseDatabase=t,o.bottomSheet=a,o.snack=n,o.purchaseTableColumns=["refNumber","channel","amount","status","actions"],o.getPurchaseProgress=!1,o.loadMoreProgress=!1,o.isMobile=w.a.android,o}return Z(t,e),t.prototype.ngOnInit=function(){this._getAllPurchases()},t.prototype.handleSearch=function(e){this.purchasesDatasource.filter=e?e.toLowerCase():""},t.prototype._getAllPurchases=function(){var e=this;this.getPurchaseProgress=!0,this.purchaseDatabase.getAllPurchase({}).then((function(t){e.purchasesDatasource=new S.o(t),e.getPurchaseProgress=!1})).catch((function(t){e.getPurchaseProgress=!1,e.snack.open("Fails to get purchases, try again","Ok",{duration:3e3}),console.log(t)}))},t.prototype.reload=function(){this._getAllPurchases()},t.prototype.loadMore=function(){var e=this;this.loadMoreProgress=!0,this.purchaseDatabase.getAllPurchase({skip:this.purchasesDatasource.data.length}).then((function(t){if(t.length>0){var a=e.purchasesDatasource.data;t.forEach((function(e){a.push(e)})),e.purchasesDatasource=new S.o(a)}else e.snack.open("No more purchases, you have all","Ok",{duration:3e3});e.loadMoreProgress=!1})).catch((function(t){e.loadMoreProgress=!1,e.snack.open("Fails to load more purchases","Ok",{duration:3e3}),console.log(t)}))},t.prototype.showPurchaseDetails=function(e){this.bottomSheet.open(_,{data:e,closeOnNavigation:!0})},t.prototype.recordPayment=function(e){var t=this;this.snack.open("Start update payment record.."),this.purchaseDatabase.recordPayment(e.id?e.id:e.objectId).then((function(a){t.snack.open("Payments recorded","Ok",{duration:3e3});var n=t.purchasesDatasource.data.indexOf(e);if(-1!==n){var o=t.purchasesDatasource.data[n];o.paid=!0,t.purchasesDatasource.data[n]=o}})).catch((function(e){t.snack.open("Fails to record payments","Ok",{duration:3e3})}))},t.\u0275fac=function(e){return new(e||t)(x.Mb(A),x.Mb(r.b),x.Mb(M.a))},t.\u0275cmp=x.Gb({type:t,selectors:[["smartstock-purchase"]],features:[x.Ab([A]),x.yb],decls:9,vars:9,consts:[[1,"match-parent"],[1,"match-parent-side",3,"mode","opened"],["sidenav",""],[3,"swiperight"],["searchPlaceholder","Search purchase",3,"heading","showSearch","sidenav","showProgress","searchCallback"],["style","margin-top: 16px","class","container",4,"ngIf"],[4,"ngIf"],[1,"container",2,"margin-top","16px"],["color","primary"],["label","All"],[1,"mat-elevation-z0"],[1,"d-flex","flex-row","flex-nowrap"],["routerLink","/purchase/create","mat-flat-button","","color","primary",1,"ft-button"],[1,"toolbar-spacer"],["color","primary","mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],["pAoptions",""],["mat-menu-item","",3,"click"],["mat-table","",3,"dataSource",4,"ngIf"],["style","margin-top: 8px",4,"ngIf"],["mode","indeterminate","color","primary","matTooltip","'Fetching all purchases'",3,"diameter",4,"ngIf"],["color","primary","mat-icon-button","",3,"matMenuTriggerFor"],["mat-table","",3,"dataSource"],["matColumnDef","refNumber"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","channel"],["matColumnDef","amount"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"d-flex","justify-content-end","align-items-end"],["opts",""],["mat-menu-item","",3,"click",4,"ngIf"],["mat-header-row",""],["mat-row",""],[2,"margin-top","8px"],["mat-button","","color","primary",3,"disabled","click"],["style","display: inline-block","mode","indeterminate","matTooltip","'Load more data'","color","primary",3,"diameter",4,"ngIf"],["mode","indeterminate","matTooltip","'Load more data'","color","primary",2,"display","inline-block",3,"diameter"],["mode","indeterminate","color","primary","matTooltip","'Fetching all purchases'",3,"diameter"]],template:function(e,t){if(1&e){var a=x.Tb();x.Sb(0,"mat-sidenav-container",0),x.Sb(1,"mat-sidenav",1,2),x.Nb(3,"smartstock-admin-drawer"),x.Rb(),x.Sb(4,"mat-sidenav-content",3),x.Zb("swiperight",(function(){x.tc(a);var e=x.pc(2);return t.openDrawer(e)})),x.Sb(5,"smartstock-toolbar",4),x.Zb("searchCallback",(function(e){return t.handleSearch(e)})),x.Rb(),x.Cc(6,ce,17,4,"div",5),x.Cc(7,le,1,0,"smartstock-purchase-mobile",6),x.Cc(8,se,1,0,"smartstock-bottom-bar",6),x.Rb(),x.Rb()}if(2&e){var n=x.pc(2);x.Bb(1),x.jc("mode",t.enoughWidth()?"side":"over")("opened",t.enoughWidth()),x.Bb(4),x.jc("heading","Purchases")("showSearch",!0)("sidenav",n)("showProgress",!1),x.Bb(1),x.jc("ngIf",!t.isMobile),x.Bb(1),x.jc("ngIf",t.isMobile),x.Bb(1),x.jc("ngIf",t.isMobile&&!t.enoughWidth())}},directives:[v.b,v.a,T.a,v.c,L.a,n.n,R.b,R.a,c.a,c.h,i.a,C.c,m.e,m.b,c.c,m.d,b.a,S.n,S.c,S.i,S.b,S.k,S.m,S.h,S.a,S.j,S.l,f.a,k.a,V.a],pipes:[n.g],styles:[".space[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.full-width[_ngcontent-%COMP%]{width:100%}.example-option-img[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px}[dir=rtl][_ngcontent-%COMP%]   .example-option-img[_ngcontent-%COMP%]{margin-right:0;margin-left:8px}.input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}table[_ngcontent-%COMP%]{width:100%}"]}),t}(q.a),de=a("LRne"),be=a("Kj3r"),pe=a("/uUt"),me=a("UmPW"),he=a("0IaG"),fe=a("FKr1"),ge=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}();function ve(e,t){if(1&e&&(x.Sb(0,"mat-option",36),x.Ec(1),x.Rb()),2&e){var a=t.$implicit;x.jc("value",a),x.Bb(1),x.Gc(" ",a.name," ")}}function ye(e,t){1&e&&x.Nb(0,"mat-progress-spinner",37),2&e&&x.jc("diameter",20)}function Se(e,t){if(1&e){var a=x.Tb();x.Sb(0,"button",38),x.Zb("click",(function(e){return x.tc(a),x.dc().refreshSuppliers(e)})),x.Sb(1,"mat-icon"),x.Ec(2,"refresh"),x.Rb(),x.Rb()}}function Re(e,t){if(1&e){var a=x.Tb();x.Sb(0,"button",39),x.Zb("click",(function(e){return x.tc(a),x.dc().addNewSupplier(e)})),x.Sb(1,"mat-icon"),x.Ec(2,"add"),x.Rb(),x.Rb()}}function ke(e,t){if(1&e&&(x.Sb(0,"mat-form-field",11),x.Sb(1,"mat-label"),x.Ec(2,"Due Date"),x.Rb(),x.Nb(3,"input",40),x.Nb(4,"mat-datepicker-toggle",20),x.Nb(5,"mat-datepicker",21,41),x.Rb()),2&e){var a=x.pc(6);x.Bb(3),x.jc("matDatepicker",a),x.Bb(1),x.jc("for",a),x.Bb(1),x.jc("touchUi",!0)}}function Pe(e,t){if(1&e){var a=x.Tb();x.Sb(0,"div"),x.Sb(1,"div",42),x.Sb(2,"div",43),x.Sb(3,"div",44),x.Sb(4,"mat-form-field",11),x.Sb(5,"mat-label"),x.Ec(6,"Product"),x.Rb(),x.Nb(7,"input",45),x.Sb(8,"mat-error"),x.Ec(9,"Product is required"),x.Rb(),x.Rb(),x.Rb(),x.Sb(10,"mat-form-field",11),x.Sb(11,"mat-label"),x.Ec(12,"Expire Date"),x.Rb(),x.Nb(13,"input",46),x.Nb(14,"mat-datepicker-toggle",20),x.Nb(15,"mat-datepicker",21,22),x.Rb(),x.Sb(17,"mat-form-field",11),x.Sb(18,"mat-label"),x.Ec(19,"Purchase Price"),x.Rb(),x.Sb(20,"input",47),x.Zb("keyup",(function(e){return x.tc(a),x.dc().checkKey(e)}))("keydown",(function(e){return x.tc(a),x.dc().checkKey(e)}))("change",(function(){x.tc(a);var e=t.$implicit;return x.dc().updateAmount(e)})),x.Rb(),x.Sb(21,"mat-error"),x.Ec(22,"Purchase price required"),x.Rb(),x.Rb(),x.Sb(23,"mat-form-field",11),x.Sb(24,"mat-label"),x.Ec(25,"Retail Price"),x.Rb(),x.Nb(26,"input",48),x.Sb(27,"mat-error"),x.Ec(28,"Retail price required"),x.Rb(),x.Rb(),x.Sb(29,"mat-form-field",11),x.Sb(30,"mat-label"),x.Ec(31,"Wholesale Price"),x.Rb(),x.Nb(32,"input",49),x.Sb(33,"mat-error"),x.Ec(34,"Wholesale price required"),x.Rb(),x.Rb(),x.Sb(35,"mat-form-field",11),x.Sb(36,"mat-label"),x.Ec(37,"Wholesale Quantity"),x.Rb(),x.Nb(38,"input",50),x.Sb(39,"mat-error"),x.Ec(40,"Wholesale quantity required"),x.Rb(),x.Rb(),x.Sb(41,"mat-form-field",11),x.Sb(42,"mat-label"),x.Ec(43,"Quantity"),x.Rb(),x.Sb(44,"input",51),x.Zb("keyup",(function(e){return x.tc(a),x.dc().checkKey(e)}))("keydown",(function(e){return x.tc(a),x.dc().checkKey(e)}))("change",(function(){x.tc(a);var e=t.$implicit;return x.dc().updateAmount(e)})),x.Rb(),x.Sb(45,"mat-error"),x.Ec(46,"Quantity required"),x.Rb(),x.Rb(),x.Sb(47,"mat-form-field",11),x.Sb(48,"mat-label"),x.Ec(49,"Amount"),x.Rb(),x.Nb(50,"input",52),x.Sb(51,"mat-error"),x.Ec(52,"Amount required"),x.Rb(),x.Rb(),x.Rb(),x.Sb(53,"div",43),x.Sb(54,"button",53),x.Zb("click",(function(e){x.tc(a);var n=t.index;return x.dc().removeItem(n,e)})),x.Ec(55," Remove Item "),x.Rb(),x.Rb(),x.Rb(),x.Nb(56,"hr"),x.Rb()}if(2&e){var n=t.index,o=x.pc(16);x.Bb(1),x.jc("formGroupName",n),x.Bb(6),x.jc("readonly",!0),x.Bb(6),x.jc("matDatepicker",o),x.Bb(1),x.jc("for",o),x.Bb(1),x.jc("touchUi",!0),x.Bb(35),x.jc("readonly",!0)}}function Ce(e,t){1&e&&x.Nb(0,"mat-progress-spinner",54),2&e&&x.jc("diameter",20)}function we(e,t){if(1&e){var a=x.Tb();x.Sb(0,"mat-option",55),x.Zb("onSelectionChange",(function(){x.tc(a);var e=t.$implicit;return x.dc().selectedProduct=e})),x.Ec(1),x.Rb()}if(2&e){var n=t.$implicit;x.jc("value",n.product),x.Bb(1),x.Gc(" ",n.product," ")}}function xe(e,t){1&e&&x.Nb(0,"mat-progress-spinner",56),2&e&&x.jc("diameter",15)}var Ie=function(e){function t(t,a,n,o,r,i){var c=e.call(this)||this;return c.formBuilder=t,c.snack=a,c.router=n,c._dialog=o,c.indexDb=r,c.purchaseState=i,c.supplierFetching=!0,c.searchProductFormControl=new P.f("",[P.v.nullValidator,P.v.required]),c.saveInvoiceProgress=!1,c.searchProductProgress=!1,c.isInvoiceFormControl=new P.f(!1,[P.v.required,P.v.nullValidator]),c}return ge(t,e),t.prototype.ngOnInit=function(){var e=this;this.invoiceForm=this.formBuilder.group({refNumber:["",[P.v.nullValidator,P.v.required]],supplier:[null,[P.v.nullValidator,P.v.required]],date:["",[P.v.nullValidator,P.v.required]],due:[""],paid:[!1],draft:[!0],amount:[0,[P.v.nullValidator,P.v.required]],items:this.formBuilder.array([])}),this.getSuppliers(),this.searchProductFormControl.valueChanges.pipe(Object(be.a)(1e3),Object(pe.a)()).subscribe((function(t){t&&e.searchProduct(t)}))},Object.defineProperty(t.prototype,"invoiceItems",{get:function(){return this.invoiceForm.get("items")},enumerable:!1,configurable:!0}),t.prototype.searchProduct=function(e){var t=this;(!this.selectedProduct||this.selectedProduct&&this.selectedProduct.product!==e)&&(this.searchProductProgress=!0,this.indexDb.getStocks().then((function(a){var n=a.filter((function(t){return-1!==t.product.toLowerCase().indexOf(e.toLowerCase())}));t.products=Object(de.a)(n),t.searchProductProgress=!1})).catch((function(e){console.log(e),t.snack.open(e&&e.message?e.message:e.toString()),t.products=Object(de.a)([]),t.searchProductProgress=!1})))},t.prototype.saveInvoice=function(){var e=this;if(this.invoiceForm.valid){var t=this.invoiceForm.get("due").value;!this.isInvoiceFormControl.value||t?(this.isInvoiceFormControl.value?(this.invoiceForm.value.type="invoice",this.invoiceForm.value.paid=!1):(this.invoiceForm.value.type="receipt",this.invoiceForm.value.paid=!0),0!==this.invoiceForm.get("items").controls.length?(this.saveInvoiceProgress=!0,this.purchaseState.addPurchase(this.invoiceForm.value).then((function(t){e.snack.open("Purchase recorded","Ok",{duration:3e3}),e.saveInvoiceProgress=!1,e.router.navigateByUrl("/purchase").catch((function(e){return console.log(e)}))})).catch((function(t){e.saveInvoiceProgress=!1,console.log(t),e.snack.open(t&&t.message?t.message:t.toString(),"Ok",{duration:3e3})}))):this.snack.open("Must add at least one item","Ok",{duration:3e3})):this.snack.open("Due date required if you choose invoice","Ok",{duration:3e3})}else this.snack.open("Please fill all required information","Ok",{duration:3e3})},t.prototype.addNewSupplier=function(e){var t=this;e.preventDefault(),e.stopPropagation(),this._dialog.open(me.a,{closeOnNavigation:!0}).afterClosed().subscribe((function(e){e&&t.getSuppliers()}))},t.prototype.refreshSuppliers=function(e){e.preventDefault(),e.stopPropagation(),this.getSuppliers()},t.prototype.getSuppliers=function(){var e=this;this.supplierFetching=!0,this.purchaseState.getAllSupplier({size:200}).then((function(t){var a=JSON.parse(JSON.stringify(t));e.suppliers=Object(de.a)(a),e.supplierFetching=!1})).catch((function(t){console.log(t),e.suppliers=Object(de.a)([{name:"Default Supplier"}]),e.supplierFetching=!1}))},t.prototype.getTotalAmountOfInvoice=function(){var e=this.invoiceItems.value.reduce((function(e,t){return e+t.amount}),0);this.invoiceForm.get("amount").setValue(e)},t.prototype.addItem=function(e){e.preventDefault(),this.searchProductFormControl.valid?(this.invoiceItems.push(this.formBuilder.group({product:this.formBuilder.group(this.selectedProduct,[P.v.nullValidator,P.v.required]),expire:[this.selectedProduct.expire],purchase:[this.selectedProduct.purchase,[P.v.nullValidator,P.v.required]],retailPrice:[this.selectedProduct.retailPrice,[P.v.nullValidator,P.v.required]],wholesalePrice:[this.selectedProduct.wholesalePrice,[P.v.nullValidator,P.v.required]],wholesaleQuantity:[this.selectedProduct.wholesaleQuantity,[P.v.nullValidator,P.v.required]],quantity:[1,[P.v.nullValidator,P.v.required]],amount:[this.selectedProduct.purchase,[P.v.nullValidator,P.v.required]]})),this.searchProductFormControl.reset(),this.selectedProduct=null,this.getTotalAmountOfInvoice()):this.snack.open("No item to add, search and select a product","Ok",{duration:3e3})},t.prototype.updateAmount=function(e){(e=e).get("amount").setValue(e.value.quantity*e.value.purchase),this.getTotalAmountOfInvoice()},t.prototype.removeItem=function(e,t){t.preventDefault(),this.invoiceItems.removeAt(e),this.getTotalAmountOfInvoice()},t.prototype.checkKey=function(e){"Enter"===e.code&&e.preventDefault()},t.\u0275fac=function(e){return new(e||t)(x.Mb(P.e),x.Mb(M.a),x.Mb(C.b),x.Mb(he.b),x.Mb(N.a),x.Mb(A))},t.\u0275cmp=x.Gb({type:t,selectors:[["smartstock-purchase-create"]],features:[x.yb],decls:74,vars:30,consts:[[1,"match-parent"],[1,"match-parent-side",3,"mode","opened"],["sidenav",""],[3,"heading","showSearch","sidenav","showProgress","hasBackRoute","backLink"],[1,"container",2,"margin-top","16px"],[3,"formGroup","ngSubmit"],[1,"row","d-flex","justify-content-center","align-items-center"],[1,"col-12","col-xl-9","col-lg-9"],[1,"mat-elevation-z0"],[1,"card-content"],["color","primary","labelPosition","after","label","Invoice purchase",2,"margin-bottom","8px","margin-top","8px",3,"formControl"],["appearance","fill",1,"my-input"],["matInput","","formControlName","refNumber"],["formControlName","supplier"],[3,"value",4,"ngFor","ngForOf"],["matTooltip","Fetching suppliers","matSuffix","","color","accent","mode","indeterminate",3,"diameter",4,"ngIf"],["matSuffix","",1,"d-flex","flex-row"],["mat-icon-button","","matTooltip","refresh suppliers",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","add new supplier",3,"click",4,"ngIf"],["matInput","","formControlName","date","required","",3,"matDatepicker"],["matSuffix","",3,"for"],[3,"touchUi"],["picker",""],["appearance","fill","class","my-input",4,"ngIf"],["formArrayName","items",3,"click"],[4,"ngFor","ngForOf"],["appearance","outline",1,"my-input"],["matInput","","type","text",3,"matAutocomplete","formControl"],["matSuffix","","mode","indeterminate","color","accent",3,"diameter",4,"ngIf"],["autocomplete",""],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],["matTooltip","Add new item","mat-flat-button","","color","primary",1,"ft-button",3,"click"],["matInput","","type","number","formControlName","amount","required","",3,"readonly"],["mat-flat-button","","color","primary",1,"btn-block","ft-button",3,"disabled"],["style","display: inline-block","mode","indeterminate","color","accent",3,"diameter",4,"ngIf"],[2,"margin-bottom","48px"],[3,"value"],["matTooltip","Fetching suppliers","matSuffix","","color","accent","mode","indeterminate",3,"diameter"],["mat-icon-button","","matTooltip","refresh suppliers",3,"click"],["mat-icon-button","","matTooltip","add new supplier",3,"click"],["matInput","","formControlName","due",3,"matDatepicker"],["pickerDue",""],[1,"d-flex","flex-column","align-items-start","justify-content-start",3,"formGroupName"],[1,"flex-grow-0"],["formGroupName","product"],["matInput","","formControlName","product","type","text","required","",3,"readonly"],["matInput","","formControlName","expire",3,"matDatepicker"],["type","number","min","0","formControlName","purchase","matInput","","required","",3,"keyup","keydown","change"],["type","number","min","0","formControlName","retailPrice","matInput","","required",""],["type","number","min","0","formControlName","wholesalePrice","matInput","","required",""],["type","number","min","0","formControlName","wholesaleQuantity","matInput","","required",""],["type","number","min","0","formControlName","quantity","matInput","","required","",3,"keyup","keydown","change"],["type","number","min","0","formControlName","amount","matInput","","required","",3,"readonly"],["matTooltip","Remove this item","mat-flat-button","","color","warn",1,"ft-button",3,"click"],["matSuffix","","mode","indeterminate","color","accent",3,"diameter"],[3,"value","onSelectionChange"],["mode","indeterminate","color","accent",2,"display","inline-block",3,"diameter"]],template:function(e,t){if(1&e&&(x.Sb(0,"mat-sidenav-container",0),x.Sb(1,"mat-sidenav",1,2),x.Nb(3,"smartstock-admin-drawer"),x.Rb(),x.Sb(4,"mat-sidenav-content"),x.Nb(5,"smartstock-toolbar",3),x.Sb(6,"div",4),x.Sb(7,"form",5),x.Zb("ngSubmit",(function(){return t.saveInvoice()})),x.Sb(8,"div",6),x.Sb(9,"div",7),x.Sb(10,"h4"),x.Ec(11," Information "),x.Rb(),x.Sb(12,"mat-card",8),x.Sb(13,"mat-card-content",9),x.Sb(14,"mat-slide-toggle",10),x.Ec(15," Invoice purchase "),x.Rb(),x.Sb(16,"mat-form-field",11),x.Sb(17,"mat-label"),x.Ec(18,"ref #"),x.Rb(),x.Nb(19,"input",12),x.Sb(20,"mat-error"),x.Ec(21,"Purchase reference number required"),x.Rb(),x.Rb(),x.Sb(22,"mat-form-field",11),x.Sb(23,"mat-label"),x.Ec(24,"Supplier"),x.Rb(),x.Sb(25,"mat-select",13),x.Cc(26,ve,2,2,"mat-option",14),x.ec(27,"async"),x.Rb(),x.Cc(28,ye,1,1,"mat-progress-spinner",15),x.Sb(29,"mat-error"),x.Ec(30,"Supplier required"),x.Rb(),x.Sb(31,"div",16),x.Cc(32,Se,3,0,"button",17),x.Cc(33,Re,3,0,"button",18),x.Rb(),x.Rb(),x.Sb(34,"mat-form-field",11),x.Sb(35,"mat-label"),x.Ec(36,"Purchase Date"),x.Rb(),x.Nb(37,"input",19),x.Nb(38,"mat-datepicker-toggle",20),x.Nb(39,"mat-datepicker",21,22),x.Rb(),x.Cc(41,ke,7,3,"mat-form-field",23),x.Rb(),x.Rb(),x.Sb(42,"h4"),x.Ec(43," Items "),x.Rb(),x.Sb(44,"mat-card",8),x.Sb(45,"mat-card-content",9),x.Sb(46,"div",24),x.Zb("click",(function(e){return e.preventDefault()})),x.Cc(47,Pe,57,6,"div",25),x.Rb(),x.Sb(48,"mat-form-field",26),x.Sb(49,"mat-label"),x.Ec(50,"Search Product"),x.Rb(),x.Nb(51,"input",27),x.Cc(52,Ce,1,1,"mat-progress-spinner",28),x.Rb(),x.Sb(53,"mat-autocomplete",null,29),x.Cc(55,we,2,2,"mat-option",30),x.ec(56,"async"),x.Rb(),x.Sb(57,"button",31),x.Zb("click",(function(e){return t.addItem(e)})),x.Ec(58," Add Item "),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(59,"div",7),x.Sb(60,"h4"),x.Ec(61," Status "),x.Rb(),x.Sb(62,"mat-card",8),x.Sb(63,"mat-card-content",9),x.Sb(64,"mat-form-field",26),x.Sb(65,"mat-label"),x.Ec(66,"Total Amount"),x.Rb(),x.Nb(67,"input",32),x.Sb(68,"mat-error"),x.Ec(69,"Amount required"),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(70,"button",33),x.Ec(71," Save And Record "),x.Cc(72,xe,1,1,"mat-progress-spinner",34),x.Rb(),x.Nb(73,"div",35),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb()),2&e){var a=x.pc(2),n=x.pc(40),o=x.pc(54);x.Bb(1),x.jc("mode",t.enoughWidth()?"side":"over")("opened",t.enoughWidth()),x.Bb(4),x.jc("heading","Add Purchase")("showSearch",!1)("sidenav",a)("showProgress",!1)("hasBackRoute",!0)("backLink","/purchase"),x.Bb(2),x.jc("formGroup",t.invoiceForm),x.Bb(7),x.jc("formControl",t.isInvoiceFormControl),x.Bb(12),x.jc("ngForOf",x.fc(27,26,t.suppliers)),x.Bb(2),x.jc("ngIf",t.supplierFetching),x.Bb(4),x.jc("ngIf",!t.supplierFetching),x.Bb(1),x.jc("ngIf",!t.supplierFetching),x.Bb(4),x.jc("matDatepicker",n),x.Bb(1),x.jc("for",n),x.Bb(1),x.jc("touchUi",!0),x.Bb(2),x.jc("ngIf",t.isInvoiceFormControl.value),x.Bb(6),x.jc("ngForOf",t.invoiceItems.controls),x.Bb(4),x.jc("matAutocomplete",o)("formControl",t.searchProductFormControl),x.Bb(1),x.jc("ngIf",t.searchProductProgress),x.Bb(3),x.jc("ngForOf",x.fc(56,28,t.products)),x.Bb(12),x.jc("readonly",!0),x.Bb(3),x.jc("disabled",t.saveInvoiceProgress),x.Bb(2),x.jc("ngIf",t.saveInvoiceProgress)}},directives:[v.b,v.a,T.a,v.c,L.a,P.w,P.p,P.i,c.a,c.c,y.a,P.o,P.g,d.c,d.f,p.b,P.c,P.h,d.b,g.a,n.m,n.n,d.h,l.b,P.u,l.d,l.a,P.d,o.c,o.a,i.a,k.a,P.s,fe.n,f.a,b.a,P.j],pipes:[n.b],styles:["mat-card[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:8px}"]}),t}(q.a),je=a("Ktec"),_e=[{path:"",component:ue},{path:"create",component:Ie}],Ee=function(){function e(){}return e.\u0275mod=x.Kb({type:e}),e.\u0275inj=x.Jb({factory:function(t){return new(t||e)},imports:[[n.c,C.e.forChild(_e),v.d,je.a,d.e,o.b,P.t,c.f,l.c,y.b,b.b,R.c,S.p,i.b,p.c,h.b,m.c,f.b,k.b,s.b,r.c,u.b,g.b]]}),e}()}}]);