(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{QqDI:function(t,e,n){"use strict";n.r(e),n.d(e,"StockModule",(function(){return In}));var a=n("/1cH"),i=n("2ChS"),o=n("bTqV"),r=n("Wp6s"),c=n("vuIU"),s=n("Ji7U"),l=n("LK+K"),b=n("1OyB"),u=n("8LU1"),d=n("fXoL"),m=n("3Pt+"),p=n("FKr1"),f=n("R1ws"),h=n("GU7r"),g=n("u47x"),k=["input"],v=function(){return{enterDuration:150}},S=["*"],y=new d.s("mat-checkbox-default-options",{providedIn:"root",factory:function(){return{color:"accent",clickAction:"check-indeterminate"}}}),R=new d.s("mat-checkbox-click-action"),x=0,C={provide:m.m,useExisting:Object(d.V)((function(){return P})),multi:!0},w=function t(){Object(b.a)(this,t)},E=function t(e){Object(b.a)(this,t),this._elementRef=e},F=Object(p.C)(Object(p.x)(Object(p.y)(Object(p.z)(E)))),P=function(){var t=function(t){Object(s.a)(n,t);var e=Object(l.a)(n);function n(t,a,i,o,r,c,s,l){var u;return Object(b.a)(this,n),(u=e.call(this,t))._changeDetectorRef=a,u._focusMonitor=i,u._ngZone=o,u._clickAction=c,u._animationMode=s,u._options=l,u.ariaLabel="",u.ariaLabelledby=null,u._uniqueId="mat-checkbox-".concat(++x),u.id=u._uniqueId,u.labelPosition="after",u.name=null,u.change=new d.o,u.indeterminateChange=new d.o,u._onTouched=function(){},u._currentAnimationClass="",u._currentCheckState=0,u._controlValueAccessorChangeFn=function(){},u._checked=!1,u._disabled=!1,u._indeterminate=!1,u._options=u._options||{},u._options.color&&(u.color=u._options.color),u.tabIndex=parseInt(r)||0,u._clickAction=u._clickAction||u._options.clickAction,u}return Object(c.a)(n,[{key:"ngAfterViewInit",value:function(){var t=this;this._focusMonitor.monitor(this._elementRef,!0).subscribe((function(e){e||Promise.resolve().then((function(){t._onTouched(),t._changeDetectorRef.markForCheck()}))})),this._syncIndeterminate(this._indeterminate)}},{key:"ngAfterViewChecked",value:function(){}},{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"_isRippleDisabled",value:function(){return this.disableRipple||this.disabled}},{key:"_onLabelTextChange",value:function(){this._changeDetectorRef.detectChanges()}},{key:"writeValue",value:function(t){this.checked=!!t}},{key:"registerOnChange",value:function(t){this._controlValueAccessorChangeFn=t}},{key:"registerOnTouched",value:function(t){this._onTouched=t}},{key:"setDisabledState",value:function(t){this.disabled=t}},{key:"_getAriaChecked",value:function(){return this.checked?"true":this.indeterminate?"mixed":"false"}},{key:"_transitionCheckState",value:function(t){var e=this._currentCheckState,n=this._elementRef.nativeElement;if(e!==t&&(this._currentAnimationClass.length>0&&n.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(e,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){n.classList.add(this._currentAnimationClass);var a=this._currentAnimationClass;this._ngZone.runOutsideAngular((function(){setTimeout((function(){n.classList.remove(a)}),1e3)}))}}},{key:"_emitChangeEvent",value:function(){var t=new w;t.source=this,t.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(t)}},{key:"toggle",value:function(){this.checked=!this.checked}},{key:"_onInputClick",value:function(t){var e=this;t.stopPropagation(),this.disabled||"noop"===this._clickAction?this.disabled||"noop"!==this._clickAction||(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==this._clickAction&&Promise.resolve().then((function(){e._indeterminate=!1,e.indeterminateChange.emit(e._indeterminate)})),this.toggle(),this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}},{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"keyboard",e=arguments.length>1?arguments[1]:void 0;this._focusMonitor.focusVia(this._inputElement,t,e)}},{key:"_onInteractionEvent",value:function(t){t.stopPropagation()}},{key:"_getAnimationClassForCheckStateTransition",value:function(t,e){if("NoopAnimations"===this._animationMode)return"";var n="";switch(t){case 0:if(1===e)n="unchecked-checked";else{if(3!=e)return"";n="unchecked-indeterminate"}break;case 2:n=1===e?"unchecked-checked":"unchecked-indeterminate";break;case 1:n=2===e?"checked-unchecked":"checked-indeterminate";break;case 3:n=1===e?"indeterminate-checked":"indeterminate-unchecked"}return"mat-checkbox-anim-".concat(n)}},{key:"_syncIndeterminate",value:function(t){var e=this._inputElement;e&&(e.nativeElement.indeterminate=t)}},{key:"inputId",get:function(){return"".concat(this.id||this._uniqueId,"-input")}},{key:"required",get:function(){return this._required},set:function(t){this._required=Object(u.c)(t)}},{key:"checked",get:function(){return this._checked},set:function(t){t!=this.checked&&(this._checked=t,this._changeDetectorRef.markForCheck())}},{key:"disabled",get:function(){return this._disabled},set:function(t){var e=Object(u.c)(t);e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}},{key:"indeterminate",get:function(){return this._indeterminate},set:function(t){var e=t!=this._indeterminate;this._indeterminate=Object(u.c)(t),e&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}}]),n}(F);return t.\u0275fac=function(e){return new(e||t)(d.Mb(d.l),d.Mb(d.h),d.Mb(g.h),d.Mb(d.B),d.Xb("tabindex"),d.Mb(R,8),d.Mb(f.a,8),d.Mb(y,8))},t.\u0275cmp=d.Gb({type:t,selectors:[["mat-checkbox"]],viewQuery:function(t,e){var n;1&t&&(d.Jc(k,!0),d.Jc(p.s,!0)),2&t&&(d.oc(n=d.ac())&&(e._inputElement=n.first),d.oc(n=d.ac())&&(e.ripple=n.first))},hostAttrs:[1,"mat-checkbox"],hostVars:12,hostBindings:function(t,e){2&t&&(d.Vb("id",e.id),d.Cb("tabindex",null),d.Eb("mat-checkbox-indeterminate",e.indeterminate)("mat-checkbox-checked",e.checked)("mat-checkbox-disabled",e.disabled)("mat-checkbox-label-before","before"==e.labelPosition)("_mat-animation-noopable","NoopAnimations"===e._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",labelPosition:"labelPosition",name:"name",required:"required",checked:"checked",disabled:"disabled",indeterminate:"indeterminate",ariaDescribedby:["aria-describedby","ariaDescribedby"],value:"value"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[d.Ab([C]),d.yb],ngContentSelectors:S,decls:17,vars:20,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24",0,"xml","space","preserve",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(t,e){if(1&t&&(d.ic(),d.Sb(0,"label",0,1),d.Sb(2,"div",2),d.Sb(3,"input",3,4),d.Zb("change",(function(t){return e._onInteractionEvent(t)}))("click",(function(t){return e._onInputClick(t)})),d.Rb(),d.Sb(5,"div",5),d.Nb(6,"div",6),d.Rb(),d.Nb(7,"div",7),d.Sb(8,"div",8),d.cc(),d.Sb(9,"svg",9),d.Nb(10,"path",10),d.Rb(),d.bc(),d.Nb(11,"div",11),d.Rb(),d.Rb(),d.Sb(12,"span",12,13),d.Zb("cdkObserveContent",(function(){return e._onLabelTextChange()})),d.Sb(14,"span",14),d.Ec(15,"\xa0"),d.Rb(),d.hc(16),d.Rb(),d.Rb()),2&t){var n=d.pc(1),a=d.pc(13);d.Cb("for",e.inputId),d.Bb(2),d.Eb("mat-checkbox-inner-container-no-side-margin",!a.textContent||!a.textContent.trim()),d.Bb(1),d.jc("id",e.inputId)("required",e.required)("checked",e.checked)("disabled",e.disabled)("tabIndex",e.tabIndex),d.Cb("value",e.value)("name",e.name)("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby)("aria-checked",e._getAriaChecked())("aria-describedby",e.ariaDescribedby),d.Bb(2),d.jc("matRippleTrigger",n)("matRippleDisabled",e._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",d.lc(19,v))}},directives:[p.s,h.a],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox-layout{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-frame{border-style:dotted}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}\n"],encapsulation:2,changeDetection:0}),t}(),j=function(){var t=function t(){Object(b.a)(this,t)};return t.\u0275mod=d.Kb({type:t}),t.\u0275inj=d.Jb({factory:function(e){return new(e||t)}}),t}(),I=function(){var t=function t(){Object(b.a)(this,t)};return t.\u0275mod=d.Kb({type:t}),t.\u0275inj=d.Jb({factory:function(e){return new(e||t)},imports:[[p.t,p.j,h.c,j],p.j,j]}),t}(),D=n("iadO"),M=n("0IaG"),B=n("f0Cb"),N=n("7EHt"),O=n("kmnG"),T=n("NFeN"),_=n("qFsG"),A=n("STbY"),U=n("M9IT"),q=n("Xa2L"),Z=n("QibW"),G=n("d3UM"),Q=n("XhcP"),L=n("+0xr"),V=n("wZkO"),z=n("Qu3c"),$=n("rIor"),J=n("MutI"),W=n("tyNb"),K=n("LRne"),X=n("soNi"),H=n("nBS7"),Y=n("Qfq9"),tt=n("AytR"),et=n("0EQZ"),nt=n("ofXK");function at(t,e){if(1&t&&(d.Sb(0,"h5"),d.Ec(1),d.Rb()),2&t){var n=d.dc().$implicit;d.Bb(1),d.Gc(" ",n," ")}}function it(t,e){if(1&t&&(d.Sb(0,"span"),d.Ec(1),d.Rb()),2&t){var n=d.dc().$implicit,a=d.dc();d.Bb(1),d.Gc(" ",a.data[n]," ")}}function ot(t,e){1&t&&d.Nb(0,"mat-divider",4)}function rt(t,e){if(1&t&&(d.Sb(0,"div"),d.Cc(1,at,2,1,"h5",2),d.Cc(2,it,2,1,"span",2),d.Cc(3,ot,1,0,"mat-divider",3),d.Rb()),2&t){var n=e.$implicit;d.Bb(1),d.jc("ngIf","image"!==n&&"id"!==n&&"createdAt"!==n&&"updatedAt"!==n&&"idOld"!==n),d.Bb(1),d.jc("ngIf","image"!==n&&"id"!==n&&"createdAt"!==n&&"updatedAt"!==n&&"idOld"!==n),d.Bb(1),d.jc("ngIf","image"!==n&&"id"!==n&&"createdAt"!==n&&"updatedAt"!==n&&"idOld"!==n)}}var ct=function(){function t(t,e){this._bottomSheetRef=t,this.data=e}return t.prototype.openLink=function(t){this._bottomSheetRef.dismiss(),t.preventDefault()},t.prototype.getStocks=function(){return Object.keys(this.data)},t.\u0275fac=function(e){return new(e||t)(d.Mb(i.d),d.Mb(i.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["smartstock-stock-details"]],decls:3,vars:2,consts:[["alt","",2,"max-width","400px","height","auto",3,"src"],[4,"ngFor","ngForOf"],[4,"ngIf"],["style","margin-bottom: 8px",4,"ngIf"],[2,"margin-bottom","8px"]],template:function(t,e){1&t&&(d.Sb(0,"div"),d.Nb(1,"img",0),d.Rb(),d.Cc(2,rt,4,3,"div",1)),2&t&&(d.Bb(1),d.jc("src",e.data.image,d.vc),d.Bb(1),d.jc("ngForOf",e.getStocks()))},directives:[nt.m,nt.n,B.a],encapsulation:2}),t}(),st=function(){function t(t,e){this.dialogRef=t,this.data=e}return t.prototype.delete=function(t){this.dialogRef.close(t)},t.prototype.cancel=function(){this.dialogRef.close("no")},t.\u0275fac=function(e){return new(e||t)(d.Mb(M.g),d.Mb(M.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["smartstock-dialog-delete"]],decls:14,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"text-center"],[1,"d-flex","justify-content-center"],[1,"align-self-center",2,"margin","8px"],["color","primary","mat-button","",3,"click"],[1,"alert-secondary",2,"margin","8px"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"div",2),d.Sb(3,"mat-panel-title",3),d.Ec(4," Your about to delete : "),d.Sb(5,"b"),d.Ec(6),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(7,"div",4),d.Sb(8,"div",5),d.Sb(9,"button",6),d.Zb("click",(function(){return e.delete(e.data)})),d.Ec(10,"Delete"),d.Rb(),d.Rb(),d.Sb(11,"div",7),d.Sb(12,"button",6),d.Zb("click",(function(){return e.cancel()})),d.Ec(13,"Cancel"),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.Bb(6),d.Fc(" "+e.data.product))},directives:[N.e,o.a],encapsulation:2}),t}(),lt=n("doIf"),bt=n("dNgK");function ut(t,e){if(1&t&&(d.Sb(0,"mat-option",12),d.Ec(1),d.Rb()),2&t){var n=e.$implicit;d.jc("value",n),d.Bb(1),d.Fc(n.businessName)}}function dt(t,e){if(1&t&&(d.Sb(0,"div"),d.Sb(1,"div",13),d.Sb(2,"mat-form-field",14),d.Sb(3,"mat-label"),d.Ec(4),d.Rb(),d.Nb(5,"input",15),d.Sb(6,"mat-error"),d.Ec(7),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t){var n=e.$implicit;d.Bb(4),d.Gc("Quantity of ",n.product,""),d.Bb(1),d.kc("formGroupName",n.product),d.Bb(2),d.Gc("",n.product," field required and must be atleast 1 item")}}function mt(t,e){if(1&t){var n=d.Tb();d.Qb(0),d.Sb(1,"div",4),d.Sb(2,"div"),d.Sb(3,"mat-card-subtitle"),d.Ec(4,"Tranfer to which shop ( s )"),d.Rb(),d.Sb(5,"mat-form-field",5),d.Sb(6,"mat-label"),d.Ec(7," Select Shop"),d.Rb(),d.Sb(8,"mat-select",6),d.Cc(9,ut,2,2,"mat-option",7),d.Rb(),d.Rb(),d.Rb(),d.Sb(10,"div"),d.Sb(11,"form",8),d.Zb("ngSubmit",(function(){return d.tc(n),d.dc().transferStocks()})),d.Cc(12,dt,8,3,"div",9),d.Nb(13,"div",10),d.Sb(14,"button",11),d.Ec(15,"Transfer"),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Pb()}if(2&t){var a=d.dc();d.Bb(8),d.jc("formControl",a.shop),d.Bb(1),d.jc("ngForOf",a.shops),d.Bb(2),d.jc("formGroup",a.transferStockGroup),d.Bb(1),d.jc("ngForOf",a.data.items)}}function pt(t,e){1&t&&(d.Sb(0,"p"),d.Ec(1," You have no extra shop to transfer stock to"),d.Rb())}var ft=function(){function t(t,e,n,a,i,o){this.shopsApi=t,this.activeShopApi=e,this.dialogRef=n,this.snack=a,this.formBuilder=i,this.data=o,this.shop=new m.f,this.shops=[]}return t.prototype.transferStocks=function(){this.transferStockGroup.valid||this.snack.open("Please fix all errors","Ok",{duration:2e3})},t.prototype.ngOnInit=function(){var t=this;this.activeShopApi.getActiveShop().then((function(e){t.activeShop=e,t.shopsApi.getShops().then((function(e){t.shops=e.filter((function(e){return e.projectId!==t.activeShop.projectId}))}))}));var e={};this.data.items&&Array.isArray(this.data.items)&&this.data.items.forEach((function(t){e[t.product]=[0,[m.v.required,m.v.min(1),m.v.nullValidator]]})),this.transferStockGroup=this.formBuilder.group(e)},t.\u0275fac=function(e){return new(e||t)(d.Mb(lt.a),d.Mb(H.a),d.Mb(M.g),d.Mb(bt.a),d.Mb(m.e),d.Mb(M.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["smartstock-transfer-dialog"]],decls:6,vars:2,consts:[[2,"width","95%"],["mat-dialog-title",""],[4,"ngIf","ngIfElse"],["elseTemplate",""],["mat-dialog-content",""],["appearance","fill","s","",2,"width","100%"],["multiple","",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"formGroup","ngSubmit"],[4,"ngFor","ngForOf"],[2,"height","20px"],["mat-button","","color","primary","mat-flat-button",""],[3,"value"],[2,"display","flex"],[2,"width","100%"],["matInput","","type","number","required","",3,"formGroupName"]],template:function(t,e){if(1&t&&(d.Sb(0,"div",0),d.Sb(1,"h1",1),d.Ec(2,"Transfer Stocks"),d.Rb(),d.Cc(3,mt,16,4,"ng-container",2),d.Cc(4,pt,2,0,"ng-template",null,3,d.Dc),d.Rb()),2&t){var n=d.pc(5);d.Bb(3),d.jc("ngIf",e.shops.length>1)("ngIfElse",n)}},directives:[M.h,nt.n,M.e,r.g,O.c,O.f,G.a,m.o,m.g,nt.m,m.w,m.p,m.i,o.a,p.n,_.b,m.j,O.b],encapsulation:2}),t}(),ht=n("tajD");function gt(t,e){1&t&&d.Nb(0,"mat-progress-spinner",9)}var kt=function(){function t(t,e,n,a){this.dialogRef=t,this.snack=e,this.logger=n,this.stockApi=a,this.importProgress=!1}return t._sanitizeField=function(t){return isNaN(Number(t))?t.trim().startsWith("[",0)||t.trim().startsWith("{",0)?JSON.parse(t):t:Number(t)},t.prototype.ngOnInit=function(){},t.prototype.csvUploaded=function(t){var e=this,n=t.target.files[0];if(n){var a=new FileReader;a.onload=function(t){e.csvToJSON(t.target.result,(function(t){e.importProgress=!0,e.stockApi.importStocks(t).then((function(t){e.importProgress=!1,e.dialogRef.close(!0),e.snack.open("Products imported","Ok",{duration:3e3})})).catch((function(t){e.logger.e(t),e.importProgress=!1,e.snack.open("Products not imported, try again","Ok",{duration:3e3})}))}))},a.readAsText(n,"UTF-8")}else this.snack.open("Error while read csv","Ok",{duration:3e3})},t.prototype.csvToJSON=function(e,n){for(var a=e.split("\n"),i=[],o=a[0].split(","),r=1;r<a.length-1;r++){for(var c={},s=a[r].split(","),l=0;l<o.length;l++){var b=s[l].split("").map((function(t,e,n){return 0===e&&'"'===t||e===n.length-1&&'"'===t?"":t})).join("");b=t._sanitizeField(b),c[o[l].toString().trim().split('"').join("")]=b}i.push(c)}return n&&"function"==typeof n?n(i):i},t.\u0275fac=function(e){return new(e||t)(d.Mb(M.g),d.Mb(bt.a),d.Mb(Y.a),d.Mb(ht.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["smartstock-upload-products"]],decls:111,vars:2,consts:[["mat-dialog-title","",1,"d-flex","flex-row","align-items-center"],[2,"flex-grow","1"],["color","primary","mat-flat-button","",1,"ft-button",3,"disabled","click"],["style","display: inline-block","diameter","30","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[1,"table","table-responsive","table-bordered","table-hover"],[1,"table-data-row"],["type","file","accept",".csv",2,"display","none",3,"change"],["fileU",""],["diameter","30","mode","indeterminate",2,"display","inline-block"]],template:function(t,e){if(1&t){var n=d.Tb();d.Sb(0,"div"),d.Sb(1,"div",0),d.Ec(2," Import Products "),d.Nb(3,"span",1),d.Sb(4,"button",2),d.Zb("click",(function(){return d.tc(n),d.pc(110).click()})),d.Ec(5," Upload Csv "),d.Cc(6,gt,1,0,"mat-progress-spinner",3),d.Rb(),d.Rb(),d.Nb(7,"mat-divider"),d.Sb(8,"div",4),d.Sb(9,"p"),d.Nb(10,"br"),d.Ec(11," Prepare your excel sheet and change it to CSV then upload it here."),d.Nb(12,"br"),d.Ec(13," Your excel sheet must contain the following columns"),d.Nb(14,"br"),d.Sb(15,"u"),d.Ec(16,"Note: CSV delimiter must be "),d.Rb(),d.Ec(17," ( , ) "),d.Rb(),d.Sb(18,"div"),d.Sb(19,"table",5),d.Sb(20,"tr",6),d.Sb(21,"th"),d.Ec(22,"Column Name"),d.Rb(),d.Sb(23,"th"),d.Ec(24,"Description"),d.Rb(),d.Rb(),d.Sb(25,"tr"),d.Sb(26,"td"),d.Ec(27,"product"),d.Rb(),d.Sb(28,"td"),d.Ec(29,"Product name "),d.Sb(30,"u"),d.Ec(31,"e.g panadol - 10mg"),d.Rb(),d.Rb(),d.Rb(),d.Sb(32,"tr"),d.Sb(33,"td"),d.Ec(34,"description"),d.Rb(),d.Sb(35,"td"),d.Ec(36,"Product description "),d.Sb(37,"u"),d.Ec(38,"e.g medicine for headache"),d.Rb(),d.Rb(),d.Rb(),d.Sb(39,"tr"),d.Sb(40,"td"),d.Ec(41,"purchase"),d.Rb(),d.Sb(42,"td"),d.Ec(43,"Purchase price of a product "),d.Sb(44,"u"),d.Ec(45,"e.g 1000"),d.Rb(),d.Rb(),d.Rb(),d.Sb(46,"tr"),d.Sb(47,"td"),d.Ec(48,"unit"),d.Rb(),d.Sb(49,"td"),d.Ec(50,"Unit of a product "),d.Sb(51,"u"),d.Ec(52,"e.g tablet"),d.Rb(),d.Rb(),d.Rb(),d.Sb(53,"tr"),d.Sb(54,"td"),d.Ec(55,"retailPrice"),d.Rb(),d.Sb(56,"td"),d.Ec(57,"Retail price for a product "),d.Sb(58,"u"),d.Ec(59,"e.g 1400"),d.Rb(),d.Rb(),d.Rb(),d.Sb(60,"tr"),d.Sb(61,"td"),d.Ec(62,"wholesalePrice"),d.Rb(),d.Sb(63,"td"),d.Ec(64,"Wholesale price for a product "),d.Sb(65,"u"),d.Ec(66,"e.g 5000"),d.Rb(),d.Rb(),d.Rb(),d.Sb(67,"tr"),d.Sb(68,"td"),d.Ec(69,"wholesaleQuantity"),d.Rb(),d.Sb(70,"td"),d.Ec(71,"how many unit quantity of product to be reduced when product sold as a whole "),d.Sb(72,"u"),d.Ec(73,"e.g 3"),d.Rb(),d.Rb(),d.Rb(),d.Sb(74,"tr"),d.Sb(75,"td"),d.Ec(76,"quantity"),d.Rb(),d.Sb(77,"td"),d.Ec(78,"Initial stock quantity "),d.Sb(79,"u"),d.Ec(80,"e.g 200"),d.Rb(),d.Rb(),d.Rb(),d.Sb(81,"tr"),d.Sb(82,"td"),d.Ec(83,"supplier"),d.Rb(),d.Sb(84,"td"),d.Ec(85,"Name of supplier "),d.Sb(86,"u"),d.Ec(87,"e.g Joe Shop"),d.Rb(),d.Rb(),d.Rb(),d.Sb(88,"tr"),d.Sb(89,"td"),d.Ec(90,"reorder"),d.Rb(),d.Sb(91,"td"),d.Ec(92,"Reorder level "),d.Sb(93,"u"),d.Ec(94,"e.g 5"),d.Rb(),d.Rb(),d.Rb(),d.Sb(95,"tr"),d.Sb(96,"td"),d.Ec(97,"category"),d.Rb(),d.Sb(98,"td"),d.Ec(99,"Reorder level "),d.Sb(100,"u"),d.Ec(101,"e.g 5"),d.Rb(),d.Rb(),d.Rb(),d.Sb(102,"tr"),d.Sb(103,"td"),d.Ec(104,"expire"),d.Rb(),d.Sb(105,"td"),d.Ec(106,"Expire date "),d.Sb(107,"u"),d.Ec(108,"e.g 2050-01-01"),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(109,"input",7,8),d.Zb("change",(function(t){return e.csvUploaded(t)})),d.Rb()}2&t&&(d.Bb(4),d.jc("disabled",e.importProgress),d.Bb(2),d.jc("ngIf",e.importProgress))},directives:[M.h,o.a,nt.n,B.a,M.e,q.a],styles:[""]}),t}(),vt=n("wROQ"),St=n("l8oG"),yt=n("veC1"),Rt=n("eQIs");function xt(t,e){1&t&&(d.Sb(0,"th",18),d.Ec(1,"Name"),d.Rb())}function Ct(t,e){if(1&t){var n=d.Tb();d.Sb(0,"div",23),d.Zb("click",(function(t){return d.tc(n),t.stopPropagation()})),d.Sb(1,"mat-form-field",24),d.Sb(2,"mat-label"),d.Ec(3,"Name"),d.Rb(),d.Nb(4,"input",25),d.Rb(),d.Sb(5,"button",26),d.Zb("click",(function(){d.tc(n);var t=e.id;d.dc();var a=d.pc(1),i=d.dc(2);return i.updateCategoryName({id:t,value:i.nameFormControl.value},a)})),d.Ec(6,"Update "),d.Rb(),d.Rb()}if(2&t){var a=e.data,i=d.dc(3);d.Bb(4),d.jc("value",a)("formControl",i.nameFormControl)}}var wt=function(t,e){return{id:t,data:e}};function Et(t,e){if(1&t&&(d.Sb(0,"td",19,20),d.Ec(2),d.Sb(3,"mat-menu",null,21),d.Cc(5,Ct,7,2,"ng-template",22),d.Rb(),d.Rb()),2&t){var n=e.$implicit,a=d.pc(4);d.jc("matMenuTriggerFor",a)("matMenuTriggerData",d.nc(3,wt,n.id,n.name)),d.Bb(2),d.Gc("",n.name," ")}}function Ft(t,e){1&t&&(d.Sb(0,"th",18),d.Ec(1,"Description"),d.Rb())}function Pt(t,e){if(1&t){var n=d.Tb();d.Sb(0,"div",23),d.Zb("click",(function(t){return d.tc(n),t.stopPropagation()})),d.Sb(1,"mat-form-field",24),d.Sb(2,"mat-label"),d.Ec(3,"Description"),d.Rb(),d.Nb(4,"textarea",25),d.Rb(),d.Sb(5,"button",26),d.Zb("click",(function(){d.tc(n);var t=e.id;d.dc();var a=d.pc(1),i=d.dc(2);return i.updateCategoryDescription({id:t,value:i.descriptionFormControl.value},a)})),d.Ec(6,"Update "),d.Rb(),d.Rb()}if(2&t){var a=e.data,i=d.dc(3);d.Bb(4),d.jc("value",a)("formControl",i.descriptionFormControl)}}function jt(t,e){if(1&t&&(d.Sb(0,"td",19,27),d.Ec(2),d.Sb(3,"mat-menu",null,28),d.Cc(5,Pt,7,2,"ng-template",29),d.Rb(),d.Rb()),2&t){var n=e.$implicit,a=d.pc(4);d.jc("matMenuTriggerFor",a)("matMenuTriggerData",d.nc(3,wt,n.id,n.description)),d.Bb(2),d.Gc("",n.description," ")}}function It(t,e){1&t&&(d.Sb(0,"th",18),d.Sb(1,"div",30),d.Ec(2," Actions "),d.Rb(),d.Rb())}function Dt(t,e){if(1&t){var n=d.Tb();d.Sb(0,"td",31),d.Sb(1,"div",30),d.Sb(2,"button",32),d.Sb(3,"mat-icon"),d.Ec(4,"more_vert"),d.Rb(),d.Rb(),d.Sb(5,"mat-menu",null,33),d.Sb(7,"button",6),d.Zb("click",(function(){d.tc(n);var t=e.$implicit;return d.dc(2).deleteCategory(t)})),d.Ec(8," Delete "),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&t){var a=d.pc(6);d.Bb(2),d.jc("matMenuTriggerFor",a)}}function Mt(t,e){1&t&&d.Nb(0,"tr",34)}function Bt(t,e){1&t&&d.Nb(0,"tr",35)}function Nt(t,e){if(1&t&&(d.Sb(0,"table",9),d.Qb(1,10),d.Cc(2,xt,2,0,"th",11),d.Cc(3,Et,6,6,"td",12),d.Pb(),d.Qb(4,13),d.Cc(5,Ft,2,0,"th",11),d.Cc(6,jt,6,6,"td",12),d.Pb(),d.Qb(7,14),d.Cc(8,It,3,0,"th",11),d.Cc(9,Dt,9,1,"td",15),d.Pb(),d.Cc(10,Mt,1,0,"tr",16),d.Cc(11,Bt,1,0,"tr",17),d.Rb()),2&t){var n=d.dc();d.jc("dataSource",n.categoriesDatasource),d.Bb(10),d.jc("matHeaderRowDef",n.categoriesTableColums),d.Bb(1),d.jc("matRowDefColumns",n.categoriesTableColums)}}function Ot(t,e){1&t&&(d.Sb(0,"div"),d.Nb(1,"mat-progress-spinner",36),d.Rb()),2&t&&(d.Bb(1),d.jc("diameter",30))}function Tt(t,e){1&t&&d.Nb(0,"mat-progress-spinner",10)}function _t(t,e){if(1&t&&(d.Sb(0,"p",11),d.Ec(1),d.Rb()),2&t){var n=d.dc();d.Bb(1),d.Fc(n.errorCategoryMessage)}}function At(t,e){1&t&&d.Nb(0,"mat-progress-spinner",11),2&t&&d.jc("diameter",20)}var Ut=function(){function t(t,e,n,a){this.stockDatabase=t,this.formBuilder=e,this.dialog=n,this.snack=a,this.categoriesTableColums=["name","description","actions"],this.fetchCategoriesFlag=!1,this.nameFormControl=new m.f,this.descriptionFormControl=new m.f}return t.prototype.ngOnInit=function(){this.getCategories()},t.prototype.searchCategory=function(t){},t.prototype.getCategories=function(){var t=this;this.fetchCategoriesFlag=!0,this.stockDatabase.getAllCategory({size:100}).then((function(e){t.categoriesArray=JSON.parse(JSON.stringify(e)),t.categoriesDatasource=new L.o(t.categoriesArray),t.fetchCategoriesFlag=!1})).catch((function(e){console.log(e),t.fetchCategoriesFlag=!1}))},t.prototype.deleteCategory=function(t){var e=this;this.dialog.open(qt,{data:t,disableClose:!0}).afterClosed().subscribe((function(n){n?(e.categoriesArray=e.categoriesArray.filter((function(e){return e.id!==t.id})),e.categoriesDatasource=new L.o(e.categoriesArray),e.snack.open("Category deleted","Ok",{duration:2e3})):e.snack.open("Category not deleted","Ok",{duration:2e3})}))},t.prototype.updateCategoryName=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="name",this.updateCategory(t))},t.prototype.updateCategory=function(t){var e=this;this.snack.open("Update in progress..","Ok"),this.stockDatabase.updateCategory(t).then((function(n){var a=e.categoriesArray.findIndex((function(t){return t.id===n.id}));if(e.categoriesArray=e.categoriesArray.filter((function(e){return e.id!==t.id})),-1!==a){var i=e.categoriesArray[a];i[t.field]=t.value,e.categoriesDatasource.data[a]=i}else console.warn("fails to update category table");e.snack.open("Category updated","Ok",{duration:3e3})})).catch((function(t){e.snack.open(t&&t.message?t.message:"Fail to update category","Ok",{duration:3e3})}))},t.prototype.updateCategoryDescription=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="description",this.updateCategory(t))},t.prototype.openAddCategoryDialog=function(){var t=this;this.dialog.open(Zt,{closeOnNavigation:!0,hasBackdrop:!0}).afterClosed().subscribe((function(e){e&&(t.categoriesArray.push(e),t.categoriesDatasource.data=t.categoriesArray)}))},t.\u0275fac=function(e){return new(e||t)(d.Mb(ht.a),d.Mb(m.e),d.Mb(M.b),d.Mb(bt.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["smartstock-categories"]],decls:15,vars:3,consts:[[1,"mat-elevation-z0"],[1,"d-flex","flex-row"],["color","primary","mat-flat-button","",1,"ft-button",3,"click"],[1,"toolbar-spacer"],["mat-icon-button","",3,"matMenuTriggerFor"],["menuCategories",""],["mat-menu-item","",3,"click"],["style","margin-top: 16px","class","my-input","mat-table","",3,"dataSource",4,"ngIf"],[4,"ngIf"],["mat-table","",1,"my-input",2,"margin-top","16px",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","editable","matRipple","","mat-cell","",3,"matMenuTriggerFor","matMenuTriggerData",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","actions"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","table-data-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["matRipple","","mat-cell","",1,"editable",3,"matMenuTriggerFor","matMenuTriggerData"],["nameMenuTrigger","matMenuTrigger"],["nameMenu",""],["matMenuContent",""],[2,"padding","16px",3,"click"],["appearance","outline",1,"my-input"],["matInput","",3,"value","formControl"],["mat-button","",3,"click"],["descriptionMenuTrigger","matMenuTrigger"],["descriptionMenu",""],["style","padding: 16px","matMenuContent",""],[1,"d-flex","justify-content-end","align-items-end"],["mat-cell",""],["color","primary","mat-icon-button","",3,"matMenuTriggerFor"],["opts",""],["mat-header-row",""],["mat-row","",1,"table-data-row"],["matTooltip","fetch categories","mode","indeterminate","color","primary",3,"diameter"]],template:function(t,e){if(1&t&&(d.Sb(0,"mat-card",0),d.Sb(1,"mat-card-title",1),d.Sb(2,"button",2),d.Zb("click",(function(){return e.openAddCategoryDialog()})),d.Ec(3," Add Category "),d.Rb(),d.Nb(4,"span",3),d.Sb(5,"button",4),d.Sb(6,"mat-icon"),d.Ec(7,"more_vert"),d.Rb(),d.Rb(),d.Sb(8,"mat-menu",null,5),d.Sb(10,"button",6),d.Zb("click",(function(){return e.getCategories()})),d.Ec(11,"Reload Categories"),d.Rb(),d.Rb(),d.Rb(),d.Sb(12,"mat-card-content"),d.Cc(13,Nt,12,3,"table",7),d.Cc(14,Ot,2,1,"div",8),d.Rb(),d.Rb()),2&t){var n=d.pc(9);d.Bb(5),d.jc("matMenuTriggerFor",n),d.Bb(8),d.jc("ngIf",!e.fetchCategoriesFlag&&e.categoriesArray&&e.categoriesArray.length>0),d.Bb(1),d.jc("ngIf",e.fetchCategoriesFlag)}},directives:[r.a,r.h,o.a,A.d,T.a,A.e,A.b,r.c,nt.n,L.n,L.c,L.i,L.b,L.k,L.m,L.h,L.a,p.s,A.a,O.c,O.f,_.b,m.c,m.o,m.g,L.j,L.l,q.a,z.a],styles:["td[_ngcontent-%COMP%]{padding:8px}"]}),t}(),qt=function(){function t(t,e,n){this.dialogRef=t,this.stockDatabase=e,this.data=n,this.deleteProgress=!1}return t.prototype.deleteCategory=function(t){var e=this;this.errorCategoryMessage=void 0,this.deleteProgress=!0,this.stockDatabase.deleteCategory(t).then((function(n){e.dialogRef.close(t),e.deleteProgress=!1})).catch((function(t){e.errorCategoryMessage=t&&t.message?t.message:t.toString(),e.deleteProgress=!1}))},t.prototype.cancel=function(){this.dialogRef.close(null)},t.\u0275fac=function(e){return new(e||t)(d.Mb(M.g),d.Mb(ht.a),d.Mb(M.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["smartstock-dialog-delete"]],decls:16,vars:5,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"text-center"],[1,"d-flex","justify-content-center"],[1,"align-self-center",2,"margin","8px"],["color","primary","mat-button","",3,"disabled","click"],["matTooltip","Delete in progress...","style","display: inline-block","mode","indeterminate","diameter","15","color","accent",4,"ngIf"],[1,"alert-secondary",2,"margin","8px"],["class","bg-danger",4,"ngIf"],["matTooltip","Delete in progress...","mode","indeterminate","diameter","15","color","accent",2,"display","inline-block"],[1,"bg-danger"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"div",2),d.Sb(3,"mat-panel-title",3),d.Ec(4," Your about to delete : "),d.Sb(5,"b"),d.Ec(6),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(7,"div",4),d.Sb(8,"div",5),d.Sb(9,"button",6),d.Zb("click",(function(){return e.deleteCategory(e.data)})),d.Ec(10," Delete "),d.Cc(11,Tt,1,0,"mat-progress-spinner",7),d.Rb(),d.Rb(),d.Sb(12,"div",8),d.Sb(13,"button",6),d.Zb("click",(function(){return e.cancel()})),d.Ec(14,"Cancel"),d.Rb(),d.Rb(),d.Rb(),d.Cc(15,_t,2,1,"p",9),d.Rb()),2&t&&(d.Bb(6),d.Fc(" "+e.data.name),d.Bb(3),d.jc("disabled",e.deleteProgress),d.Bb(2),d.jc("ngIf",e.deleteProgress),d.Bb(2),d.jc("disabled",e.deleteProgress),d.Bb(2),d.jc("ngIf",e.errorCategoryMessage))},directives:[N.e,o.a,nt.n,q.a,z.a],encapsulation:2}),t}(),Zt=function(){function t(t,e,n,a){this.formBuilder=t,this.snack=e,this.stockDatabase=n,this.dialogRef=a,this.createCategoryProgress=!1}return t.prototype.ngOnInit=function(){this.initiateForm()},t.prototype.initiateForm=function(){this.newCategoryForm=this.formBuilder.group({name:["",[m.v.nullValidator,m.v.required]],description:[""]})},t.prototype.createCategory=function(){var t=this;this.newCategoryForm.valid?(this.createCategoryProgress=!0,this.stockDatabase.addCategory(this.newCategoryForm.value).then((function(e){t.createCategoryProgress=!1,e.name=t.newCategoryForm.value.name,e.description=t.newCategoryForm.value.description,t.dialogRef.close(e),t.snack.open("Category created","Ok",{duration:3e3})})).catch((function(e){console.log(e),t.createCategoryProgress=!1,t.snack.open("Category not created, try again","Ok",{duration:3e3})}))):this.snack.open("Please fll all details","Ok",{duration:3e3})},t.prototype.cancel=function(t){t.preventDefault(),this.dialogRef.close(null)},t.\u0275fac=function(e){return new(e||t)(d.Mb(m.e),d.Mb(bt.a),d.Mb(ht.a),d.Mb(M.g))},t.\u0275cmp=d.Gb({type:t,selectors:[["smartstock-new-category"]],decls:21,vars:4,consts:[[2,"min-width","300px"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"d-flex","flex-column",3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","type","text","formControlName","name","required",""],["matInput","","formControlName","description",3,"rows"],["color","primary","mat-flat-button","",1,"ft-button",3,"disabled"],["style","display: inline-block","mode","indeterminate",3,"diameter",4,"ngIf"],[2,"margin-bottom","8px"],["color","warn","mat-dialog-close","","mat-button","",3,"click"],["mode","indeterminate",2,"display","inline-block",3,"diameter"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Ec(2,"Create Category"),d.Rb(),d.Sb(3,"div",2),d.Sb(4,"form",3),d.Zb("ngSubmit",(function(){return e.createCategory()})),d.Sb(5,"mat-form-field",4),d.Sb(6,"mat-label"),d.Ec(7,"Name"),d.Rb(),d.Nb(8,"input",5),d.Sb(9,"mat-error"),d.Ec(10,"Name required"),d.Rb(),d.Rb(),d.Sb(11,"mat-form-field",4),d.Sb(12,"mat-label"),d.Ec(13,"Description"),d.Rb(),d.Nb(14,"textarea",6),d.Rb(),d.Sb(15,"button",7),d.Ec(16," Save "),d.Cc(17,At,1,1,"mat-progress-spinner",8),d.Rb(),d.Nb(18,"span",9),d.Sb(19,"button",10),d.Zb("click",(function(t){return e.cancel(t)})),d.Ec(20," Close "),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.Bb(4),d.jc("formGroup",e.newCategoryForm),d.Bb(10),d.jc("rows",3),d.Bb(1),d.jc("disabled",e.createCategoryProgress),d.Bb(2),d.jc("ngIf",e.createCategoryProgress))},directives:[M.h,M.e,m.w,m.p,m.i,O.c,O.f,_.b,m.c,m.o,m.h,m.u,O.b,o.a,nt.n,M.d,q.a],encapsulation:2}),t}();function Gt(t,e){1&t&&(d.Sb(0,"th",19),d.Ec(1,"Name"),d.Rb())}function Qt(t,e){if(1&t){var n=d.Tb();d.Sb(0,"div",24),d.Zb("click",(function(t){return d.tc(n),t.stopPropagation()})),d.Sb(1,"mat-form-field",25),d.Sb(2,"mat-label"),d.Ec(3,"Name"),d.Rb(),d.Nb(4,"input",26),d.Rb(),d.Sb(5,"button",27),d.Zb("click",(function(){d.tc(n);var t=e.id;d.dc();var a=d.pc(1),i=d.dc(2);return i.updateUnitName({id:t,value:i.nameFormControl.value},a)})),d.Ec(6,"Update "),d.Rb(),d.Rb()}if(2&t){var a=e.data,i=d.dc(3);d.Bb(4),d.jc("value",a)("formControl",i.nameFormControl)}}var Lt=function(t,e){return{id:t,data:e}};function Vt(t,e){if(1&t&&(d.Sb(0,"td",20,21),d.Ec(2),d.Sb(3,"mat-menu",null,22),d.Cc(5,Qt,7,2,"ng-template",23),d.Rb(),d.Rb()),2&t){var n=e.$implicit,a=d.pc(4);d.jc("matMenuTriggerFor",a)("matMenuTriggerData",d.nc(3,Lt,n.id,n.name)),d.Bb(2),d.Gc("",n.name," ")}}function zt(t,e){1&t&&(d.Sb(0,"th",19),d.Ec(1,"Abbreviation"),d.Rb())}function $t(t,e){if(1&t){var n=d.Tb();d.Sb(0,"div",24),d.Zb("click",(function(t){return d.tc(n),t.stopPropagation()})),d.Sb(1,"mat-form-field",25),d.Sb(2,"mat-label"),d.Ec(3,"Abbreviation"),d.Rb(),d.Nb(4,"input",26),d.Rb(),d.Sb(5,"button",27),d.Zb("click",(function(){d.tc(n);var t=e.id;d.dc();var a=d.pc(1),i=d.dc(2);return i.updateUnitAbbreviation({id:t,value:i.abbreviationFormControl.value},a)})),d.Ec(6,"Update "),d.Rb(),d.Rb()}if(2&t){var a=e.data,i=d.dc(3);d.Bb(4),d.jc("value",a)("formControl",i.abbreviationFormControl)}}function Jt(t,e){if(1&t&&(d.Sb(0,"td",20,21),d.Ec(2),d.Sb(3,"mat-menu",null,28),d.Cc(5,$t,7,2,"ng-template",23),d.Rb(),d.Rb()),2&t){var n=e.$implicit,a=d.pc(4);d.jc("matMenuTriggerFor",a)("matMenuTriggerData",d.nc(3,Lt,n.id,n.abbreviation)),d.Bb(2),d.Gc("",n.abbreviation," ")}}function Wt(t,e){1&t&&(d.Sb(0,"th",19),d.Ec(1,"Description"),d.Rb())}function Kt(t,e){if(1&t){var n=d.Tb();d.Sb(0,"div",24),d.Zb("click",(function(t){return d.tc(n),t.stopPropagation()})),d.Sb(1,"mat-form-field",25),d.Sb(2,"mat-label"),d.Ec(3,"Description"),d.Rb(),d.Nb(4,"textarea",26),d.Rb(),d.Sb(5,"button",27),d.Zb("click",(function(){d.tc(n);var t=e.id;d.dc();var a=d.pc(1),i=d.dc(2);return i.updateUnitDescription({id:t,value:i.descriptionFormControl.value},a)})),d.Ec(6,"Update "),d.Rb(),d.Rb()}if(2&t){var a=e.data,i=d.dc(3);d.Bb(4),d.jc("value",a)("formControl",i.descriptionFormControl)}}function Xt(t,e){if(1&t&&(d.Sb(0,"td",20,29),d.Ec(2),d.Sb(3,"mat-menu",null,30),d.Cc(5,Kt,7,2,"ng-template",31),d.Rb(),d.Rb()),2&t){var n=e.$implicit,a=d.pc(4);d.jc("matMenuTriggerFor",a)("matMenuTriggerData",d.nc(3,Lt,n.id,n.description)),d.Bb(2),d.Gc("",n.description," ")}}function Ht(t,e){1&t&&(d.Sb(0,"th",19),d.Sb(1,"div",32),d.Ec(2," Actions "),d.Rb(),d.Rb())}function Yt(t,e){if(1&t){var n=d.Tb();d.Sb(0,"td",33),d.Sb(1,"div",32),d.Sb(2,"button",34),d.Sb(3,"mat-icon"),d.Ec(4,"more_vert"),d.Rb(),d.Rb(),d.Sb(5,"mat-menu",null,35),d.Sb(7,"button",6),d.Zb("click",(function(){d.tc(n);var t=e.$implicit;return d.dc(2).deleteUnit(t)})),d.Ec(8," Delete "),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&t){var a=d.pc(6);d.Bb(2),d.jc("matMenuTriggerFor",a)}}function te(t,e){1&t&&d.Nb(0,"tr",36)}function ee(t,e){1&t&&d.Nb(0,"tr",37)}function ne(t,e){if(1&t&&(d.Sb(0,"table",9),d.Qb(1,10),d.Cc(2,Gt,2,0,"th",11),d.Cc(3,Vt,6,6,"td",12),d.Pb(),d.Qb(4,13),d.Cc(5,zt,2,0,"th",11),d.Cc(6,Jt,6,6,"td",12),d.Pb(),d.Qb(7,14),d.Cc(8,Wt,2,0,"th",11),d.Cc(9,Xt,6,6,"td",12),d.Pb(),d.Qb(10,15),d.Cc(11,Ht,3,0,"th",11),d.Cc(12,Yt,9,1,"td",16),d.Pb(),d.Cc(13,te,1,0,"tr",17),d.Cc(14,ee,1,0,"tr",18),d.Rb()),2&t){var n=d.dc();d.jc("dataSource",n.unitsDatasource),d.Bb(13),d.jc("matHeaderRowDef",n.unitsTableColums),d.Bb(1),d.jc("matRowDefColumns",n.unitsTableColums)}}function ae(t,e){1&t&&(d.Sb(0,"div"),d.Nb(1,"mat-progress-spinner",38),d.Rb()),2&t&&(d.Bb(1),d.jc("diameter",30))}function ie(t,e){1&t&&d.Nb(0,"mat-progress-spinner",10)}function oe(t,e){if(1&t&&(d.Sb(0,"p",11),d.Ec(1),d.Rb()),2&t){var n=d.dc();d.Bb(1),d.Fc(n.errorUnitMessage)}}function re(t,e){1&t&&d.Nb(0,"mat-progress-spinner",11),2&t&&d.jc("diameter",20)}var ce,se=function(){function t(t,e,n,a){this.stockDatabase=t,this.formBuilder=e,this.dialog=n,this.snack=a,this.unitsTableColums=["name","abbreviation","description","actions"],this.fetchUnitsFlag=!1,this.nameFormControl=new m.f,this.abbreviationFormControl=new m.f,this.descriptionFormControl=new m.f}return t.prototype.ngOnInit=function(){this.getUnits()},t.prototype.getUnits=function(){var t=this;this.fetchUnitsFlag=!0,this.stockDatabase.getAllUnit({size:100}).then((function(e){t.unitsArray=JSON.parse(JSON.stringify(e)),t.unitsDatasource=new L.o(t.unitsArray),t.fetchUnitsFlag=!1})).catch((function(e){t.fetchUnitsFlag=!1}))},t.prototype.deleteUnit=function(t){var e=this;this.dialog.open(le,{data:t,disableClose:!0}).afterClosed().subscribe((function(n){n?(e.unitsArray=e.unitsArray.filter((function(e){return e.id!==t.id})),e.unitsDatasource.data=e.unitsArray,e.snack.open("Unit deleted","Ok",{duration:2e3})):e.snack.open("Unit not deleted","Ok",{duration:2e3})}))},t.prototype.updateUnitName=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="name",this.updateUnit(t))},t.prototype.updateUnitAbbreviation=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="abbreviation",this.updateUnit(t))},t.prototype.updateUnit=function(t){var e=this;this.snack.open("Update units-mobile-ui in progress..","Ok"),this.stockDatabase.updateUnit(t).then((function(n){var a=e.unitsArray.findIndex((function(t){return t.id===n.id}));if(e.unitsArray=e.unitsArray.filter((function(e){return e.id!==t.id})),-1!==a){var i=e.unitsArray[a];i[t.field]=t.value,e.unitsArray[a]=i,e.unitsDatasource.data=e.unitsArray}else console.warn("fails to update unit table");e.snack.open("Unit updated","Ok",{duration:3e3})})).catch((function(t){e.snack.open("Fail to update unit","Ok",{duration:3e3})}))},t.prototype.updateUnitDescription=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="description",this.updateUnit(t))},t.prototype.openAddUnitDialog=function(){var t=this;this.dialog.open(be,{closeOnNavigation:!0,hasBackdrop:!0}).afterClosed().subscribe((function(e){e&&(t.unitsArray.push(e),t.unitsDatasource.data=t.unitsArray)}))},t.\u0275fac=function(e){return new(e||t)(d.Mb(ht.a),d.Mb(m.e),d.Mb(M.b),d.Mb(bt.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["smartstock-units"]],decls:15,vars:3,consts:[[1,"mat-elevation-z0"],[1,"d-flex","flex-row"],["color","primary","mat-flat-button","",1,"ft-button",3,"click"],[1,"toolbar-spacer"],["mat-icon-button","","color","primary",3,"matMenuTriggerFor"],["unitsMenu",""],["mat-menu-item","",3,"click"],["style","margin-top: 16px","class","my-input","mat-table","",3,"dataSource",4,"ngIf"],[4,"ngIf"],["mat-table","",1,"my-input",2,"margin-top","16px",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","editable","matRipple","","mat-cell","",3,"matMenuTriggerFor","matMenuTriggerData",4,"matCellDef"],["matColumnDef","abbreviation"],["matColumnDef","description"],["matColumnDef","actions"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","table-data-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["matRipple","","mat-cell","",1,"editable",3,"matMenuTriggerFor","matMenuTriggerData"],["nameMenuTrigger","matMenuTrigger"],["nameMenu",""],["matMenuContent",""],[2,"padding","16px",3,"click"],["appearance","outline",1,"my-input"],["matInput","",3,"value","formControl"],["mat-button","",3,"click"],["abbreviationMenu",""],["descriptionMenuTrigger","matMenuTrigger"],["descriptionMenu",""],["style","padding: 16px","matMenuContent",""],[1,"d-flex","justify-content-end","align-items-end"],["mat-cell",""],["color","primary","mat-icon-button","",3,"matMenuTriggerFor"],["opts",""],["mat-header-row",""],["mat-row","",1,"table-data-row"],["matTooltip","fetch units","mode","indeterminate","color","primary",3,"diameter"]],template:function(t,e){if(1&t&&(d.Sb(0,"mat-card",0),d.Sb(1,"mat-card-title",1),d.Sb(2,"button",2),d.Zb("click",(function(){return e.openAddUnitDialog()})),d.Ec(3,"Add Unit"),d.Rb(),d.Nb(4,"span",3),d.Sb(5,"button",4),d.Sb(6,"mat-icon"),d.Ec(7,"more_vert"),d.Rb(),d.Rb(),d.Sb(8,"mat-menu",null,5),d.Sb(10,"button",6),d.Zb("click",(function(){return e.getUnits()})),d.Ec(11,"Reload Units"),d.Rb(),d.Rb(),d.Rb(),d.Sb(12,"mat-card-content"),d.Cc(13,ne,15,3,"table",7),d.Cc(14,ae,2,1,"div",8),d.Rb(),d.Rb()),2&t){var n=d.pc(9);d.Bb(5),d.jc("matMenuTriggerFor",n),d.Bb(8),d.jc("ngIf",!e.fetchUnitsFlag&&e.unitsArray&&e.unitsArray.length>0),d.Bb(1),d.jc("ngIf",e.fetchUnitsFlag)}},directives:[r.a,r.h,o.a,A.d,T.a,A.e,A.b,r.c,nt.n,L.n,L.c,L.i,L.b,L.k,L.m,L.h,L.a,p.s,A.a,O.c,O.f,_.b,m.c,m.o,m.g,L.j,L.l,q.a,z.a],styles:["td[_ngcontent-%COMP%]{padding:8px}.editable[_ngcontent-%COMP%]:hover{outline:1px solid #0b2e13;cursor:pointer}"]}),t}(),le=function(){function t(t,e,n){this.dialogRef=t,this.stockDatabase=e,this.data=n,this.deleteProgress=!1}return t.prototype.deleteUnit=function(t){var e=this;this.errorUnitMessage=void 0,this.deleteProgress=!0,this.stockDatabase.deleteUnit(t).then((function(n){e.dialogRef.close(t),e.deleteProgress=!1})).catch((function(t){e.errorUnitMessage="Fails to delete, try again",e.deleteProgress=!1}))},t.prototype.cancel=function(){this.dialogRef.close(null)},t.\u0275fac=function(e){return new(e||t)(d.Mb(M.g),d.Mb(ht.a),d.Mb(M.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["smartstock-dialog-delete"]],decls:16,vars:5,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"text-center"],[1,"d-flex","justify-content-center"],[1,"align-self-center",2,"margin","8px"],["color","primary","mat-button","",3,"disabled","click"],["matTooltip","Delete in progress...","style","display: inline-block","mode","indeterminate","diameter","15","color","accent",4,"ngIf"],[1,"alert-secondary",2,"margin","8px"],["class","bg-danger",4,"ngIf"],["matTooltip","Delete in progress...","mode","indeterminate","diameter","15","color","accent",2,"display","inline-block"],[1,"bg-danger"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"div",2),d.Sb(3,"mat-panel-title",3),d.Ec(4," Your about to delete : "),d.Sb(5,"b"),d.Ec(6),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(7,"div",4),d.Sb(8,"div",5),d.Sb(9,"button",6),d.Zb("click",(function(){return e.deleteUnit(e.data)})),d.Ec(10," Delete "),d.Cc(11,ie,1,0,"mat-progress-spinner",7),d.Rb(),d.Rb(),d.Sb(12,"div",8),d.Sb(13,"button",6),d.Zb("click",(function(){return e.cancel()})),d.Ec(14,"Cancel"),d.Rb(),d.Rb(),d.Rb(),d.Cc(15,oe,2,1,"p",9),d.Rb()),2&t&&(d.Bb(6),d.Fc(" "+e.data.name),d.Bb(3),d.jc("disabled",e.deleteProgress),d.Bb(2),d.jc("ngIf",e.deleteProgress),d.Bb(2),d.jc("disabled",e.deleteProgress),d.Bb(2),d.jc("ngIf",e.errorUnitMessage))},directives:[N.e,o.a,nt.n,q.a,z.a],encapsulation:2}),t}(),be=function(){function t(t,e,n,a){this.formBuilder=t,this.snack=e,this.stockDatabase=n,this.dialogRef=a,this.createUnitProgress=!1}return t.prototype.ngOnInit=function(){this.initiateForm()},t.prototype.initiateForm=function(){this.newUnitForm=this.formBuilder.group({name:["",[m.v.nullValidator,m.v.required]],description:[""]})},t.prototype.createUnit=function(){var t=this;this.newUnitForm.valid?(this.createUnitProgress=!0,this.stockDatabase.addUnit(this.newUnitForm.value).then((function(e){t.createUnitProgress=!1,e.name=t.newUnitForm.value.name,e.description=t.newUnitForm.value.description,t.dialogRef.close(e),t.snack.open("Unit created","Ok",{duration:3e3})})).catch((function(e){t.createUnitProgress=!1,t.snack.open("Unit not created, try again","Ok",{duration:3e3})}))):this.snack.open("Please fll all details","Ok",{duration:3e3})},t.prototype.cancel=function(t){t.preventDefault(),this.dialogRef.close(null)},t.\u0275fac=function(e){return new(e||t)(d.Mb(m.e),d.Mb(bt.a),d.Mb(ht.a),d.Mb(M.g))},t.\u0275cmp=d.Gb({type:t,selectors:[["smartstock-new-unit"]],decls:21,vars:4,consts:[[2,"min-width","300px"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"d-flex","flex-column",3,"formGroup","ngSubmit"],["appearance","outline"],["placeholder","e.g Kilogram","matInput","","type","text","formControlName","name","required",""],["matInput","","formControlName","description",3,"rows"],["color","primary","mat-flat-button","",1,"ft-button",3,"disabled"],["style","display: inline-block","mode","indeterminate",3,"diameter",4,"ngIf"],[2,"margin-bottom","8px"],["color","warn","mat-dialog-close","","mat-button","",3,"click"],["mode","indeterminate",2,"display","inline-block",3,"diameter"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Ec(2,"Create Unit"),d.Rb(),d.Sb(3,"div",2),d.Sb(4,"form",3),d.Zb("ngSubmit",(function(){return e.createUnit()})),d.Sb(5,"mat-form-field",4),d.Sb(6,"mat-label"),d.Ec(7,"Name"),d.Rb(),d.Nb(8,"input",5),d.Sb(9,"mat-error"),d.Ec(10,"Name required"),d.Rb(),d.Rb(),d.Sb(11,"mat-form-field",4),d.Sb(12,"mat-label"),d.Ec(13,"Description"),d.Rb(),d.Nb(14,"textarea",6),d.Rb(),d.Sb(15,"button",7),d.Ec(16," Save "),d.Cc(17,re,1,1,"mat-progress-spinner",8),d.Rb(),d.Nb(18,"span",9),d.Sb(19,"button",10),d.Zb("click",(function(t){return e.cancel(t)})),d.Ec(20," Close "),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.Bb(4),d.jc("formGroup",e.newUnitForm),d.Bb(10),d.jc("rows",2),d.Bb(1),d.jc("disabled",e.createUnitProgress),d.Bb(2),d.jc("ngIf",e.createUnitProgress))},directives:[M.h,M.e,m.w,m.p,m.i,O.c,O.f,_.b,m.c,m.o,m.h,m.u,O.b,o.a,nt.n,M.d,q.a],encapsulation:2}),t}(),ue=n("UmPW"),de=n("doN5"),me=(ce=function(t,e){return(ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ce(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),pe=["sidenav"];function fe(t,e){1&t&&(d.Sb(0,"mat-icon"),d.Ec(1,"refresh"),d.Rb())}function he(t,e){1&t&&d.Nb(0,"mat-progress-spinner",43),2&t&&d.jc("diameter",20)}function ge(t,e){1&t&&(d.Sb(0,"mat-icon"),d.Ec(1,"cloud_download"),d.Rb())}function ke(t,e){1&t&&d.Nb(0,"mat-progress-spinner",44),2&t&&d.jc("diameter",20)}function ve(t,e){if(1&t){var n=d.Tb();d.Sb(0,"th",45),d.Sb(1,"mat-checkbox",46),d.Zb("change",(function(t){d.tc(n);var e=d.dc(2);return t?e.masterToggle():null})),d.Rb(),d.Rb()}if(2&t){var a=d.dc(2);d.Bb(1),d.jc("checked",a.selection.hasValue()&&a.isAllSelected())("indeterminate",a.selection.hasValue()&&!a.isAllSelected())("aria-label",a.checkboxLabel())}}function Se(t,e){if(1&t){var n=d.Tb();d.Sb(0,"td",47),d.Sb(1,"mat-checkbox",48),d.Zb("click",(function(t){return d.tc(n),t.stopPropagation()}))("change",(function(t){d.tc(n);var a=e.$implicit,i=d.dc(2);return t?i.selection.toggle(a):null})),d.Rb(),d.Rb()}if(2&t){var a=e.$implicit,i=d.dc(2);d.Bb(1),d.jc("checked",i.selection.isSelected(a))("aria-label",i.checkboxLabel(a))}}function ye(t,e){1&t&&(d.Sb(0,"th",45),d.Ec(1,"Product"),d.Rb())}function Re(t,e){if(1&t&&(d.Sb(0,"td",47),d.Ec(1),d.Rb()),2&t){var n=e.$implicit;d.Bb(1),d.Fc(n.product)}}function xe(t,e){1&t&&(d.Sb(0,"th",45),d.Ec(1,"Quantity"),d.Rb())}function Ce(t,e){if(1&t&&(d.Sb(0,"td",47),d.Ec(1),d.ec(2,"number"),d.Rb()),2&t){var n=e.$implicit;d.Bb(1),d.Fc(d.fc(2,1,n.quantity))}}function we(t,e){1&t&&(d.Sb(0,"th",45),d.Ec(1,"Purchase (TZS)"),d.Rb())}function Ee(t,e){if(1&t&&(d.Sb(0,"td",47),d.Ec(1),d.ec(2,"number"),d.Rb()),2&t){var n=e.$implicit;d.Bb(1),d.Fc(d.fc(2,1,n.purchase))}}function Fe(t,e){1&t&&(d.Sb(0,"th",45),d.Ec(1,"R.Price (TZS)"),d.Rb())}function Pe(t,e){if(1&t&&(d.Sb(0,"td",49),d.Ec(1),d.ec(2,"number"),d.Rb()),2&t){var n=e.$implicit;d.Bb(1),d.Fc(d.fc(2,1,n.retailPrice))}}function je(t,e){1&t&&(d.Sb(0,"th",45),d.Ec(1,"W.Price (TZS)"),d.Rb())}function Ie(t,e){if(1&t&&(d.Sb(0,"td",47),d.Ec(1),d.ec(2,"number"),d.Rb()),2&t){var n=e.$implicit;d.Bb(1),d.Fc(d.fc(2,1,n.wholesalePrice))}}function De(t,e){1&t&&(d.Sb(0,"th",45),d.Ec(1,"Expire"),d.Rb())}function Me(t,e){if(1&t&&(d.Sb(0,"td",47),d.Ec(1),d.ec(2,"date"),d.Rb()),2&t){var n=e.$implicit;d.Bb(1),d.Fc(d.fc(2,1,n.expire))}}function Be(t,e){1&t&&(d.Sb(0,"th",45),d.Sb(1,"div",50),d.Sb(2,"span"),d.Ec(3,"Actions"),d.Rb(),d.Rb(),d.Rb())}function Ne(t,e){if(1&t){var n=d.Tb();d.Sb(0,"td",47),d.Sb(1,"div",51),d.Sb(2,"button",52),d.Sb(3,"mat-icon",53),d.Ec(4,"more_vert"),d.Rb(),d.Rb(),d.Sb(5,"mat-menu",null,54),d.Sb(7,"button",55),d.Zb("click",(function(){d.tc(n);var t=e.$implicit;return d.dc(2).viewProduct(t)})),d.Ec(8,"View "),d.Rb(),d.Sb(9,"button",55),d.Zb("click",(function(){d.tc(n);var t=e.$implicit;return d.dc(2).editStock(t)})),d.Ec(10,"Edit "),d.Rb(),d.Sb(11,"button",55),d.Zb("click",(function(){d.tc(n);var t=e.$implicit;return d.dc(2).deleteStock(t)})),d.Ec(12,"Delete "),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&t){var a=d.pc(6);d.Bb(2),d.jc("matMenuTriggerFor",a),d.Bb(5),d.jc("matTooltip","change product information"),d.Bb(2),d.jc("matTooltip","change product information"),d.Bb(2),d.jc("matTooltip","permanent delete stock")}}function Oe(t,e){1&t&&d.Nb(0,"tr",56)}function Te(t,e){1&t&&d.Nb(0,"tr",57),2&t&&d.kc("matTooltip",e.$implicit.product)}var _e=function(){return[10,20,100]};function Ae(t,e){if(1&t){var n=d.Tb();d.Sb(0,"div"),d.Sb(1,"div",6),d.Sb(2,"div",7),d.Sb(3,"div",8),d.Sb(4,"mat-tab-group",9),d.Sb(5,"mat-tab",10),d.Sb(6,"div"),d.Sb(7,"mat-card",11),d.Sb(8,"mat-card-title",12),d.Sb(9,"button",13),d.Ec(10," Add Product "),d.Rb(),d.Nb(11,"span",14),d.Nb(12,"span",15),d.Sb(13,"button",16),d.Zb("click",(function(){return d.tc(n),d.dc().hotReloadStocks()})),d.Cc(14,fe,2,0,"mat-icon",5),d.Cc(15,he,1,1,"mat-progress-spinner",17),d.Rb(),d.Nb(16,"span",15),d.Sb(17,"button",18),d.Zb("click",(function(){return d.tc(n),d.dc().exportStock()})),d.Cc(18,ge,2,0,"mat-icon",5),d.Cc(19,ke,1,1,"mat-progress-spinner",19),d.Rb(),d.Nb(20,"span",15),d.Sb(21,"button",20),d.Zb("click",(function(){return d.tc(n),d.dc().importStocks()})),d.Sb(22,"mat-icon"),d.Ec(23,"cloud_upload"),d.Rb(),d.Rb(),d.Sb(24,"button",21),d.Sb(25,"mat-icon"),d.Ec(26,"more_vert"),d.Rb(),d.Rb(),d.Sb(27,"mat-menu",null,22),d.Sb(29,"button",23),d.Zb("click",(function(){return d.tc(n),d.dc().reload()})),d.Ec(30,"Reload"),d.Rb(),d.Rb(),d.Rb(),d.Sb(31,"table",24),d.Qb(32,25),d.Cc(33,ve,2,3,"th",26),d.Cc(34,Se,2,2,"td",27),d.Pb(),d.Qb(35,28),d.Cc(36,ye,2,0,"th",26),d.Cc(37,Re,2,1,"td",27),d.Pb(),d.Qb(38,29),d.Cc(39,xe,2,0,"th",26),d.Cc(40,Ce,3,3,"td",27),d.Pb(),d.Qb(41,30),d.Cc(42,we,2,0,"th",26),d.Cc(43,Ee,3,3,"td",27),d.Pb(),d.Qb(44,31),d.Cc(45,Fe,2,0,"th",26),d.Cc(46,Pe,3,3,"td",32),d.Pb(),d.Qb(47,33),d.Cc(48,je,2,0,"th",26),d.Cc(49,Ie,3,3,"td",27),d.Pb(),d.Qb(50,34),d.Cc(51,De,2,0,"th",26),d.Cc(52,Me,3,3,"td",27),d.Pb(),d.Qb(53,35),d.Cc(54,Be,4,0,"th",26),d.Cc(55,Ne,13,4,"td",27),d.Pb(),d.Cc(56,Oe,1,0,"tr",36),d.Cc(57,Te,1,1,"tr",37),d.Rb(),d.Nb(58,"mat-paginator",38,39),d.Rb(),d.Rb(),d.Rb(),d.Sb(60,"mat-tab",40),d.Nb(61,"smartstock-categories"),d.Rb(),d.Sb(62,"mat-tab",41),d.Nb(63,"smartstock-units"),d.Rb(),d.Sb(64,"mat-tab",42),d.Nb(65,"smartstock-suppliers"),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&t){var a=d.pc(28),i=d.dc();d.Bb(4),d.jc("selectedIndex",i.selectedTab),d.Bb(9),d.jc("disabled",i.hotReloadProgress),d.Bb(1),d.jc("ngIf",!i.hotReloadProgress),d.Bb(1),d.jc("ngIf",i.hotReloadProgress),d.Bb(2),d.jc("disabled",i.exportProgress),d.Bb(1),d.jc("ngIf",!i.exportProgress),d.Bb(1),d.jc("ngIf",i.exportProgress),d.Bb(5),d.jc("matMenuTriggerFor",a),d.Bb(7),d.jc("dataSource",i.stockDatasource),d.Bb(25),d.jc("matHeaderRowDef",i.stockColumns),d.Bb(1),d.jc("matRowDefColumns",i.stockColumns),d.Bb(1),d.jc("pageSizeOptions",d.lc(12,_e))}}function Ue(t,e){1&t&&d.Nb(0,"smartstock-stock-mobile")}function qe(t,e){1&t&&d.Nb(0,"smartstock-bottom-bar")}var Ze=function(t){function e(e,n,a,i,o,r,c,s,l){var b=t.call(this)||this;return b.router=e,b.indexDb=n,b.bottomSheet=a,b.snack=i,b.logger=o,b.dialog=r,b.eventApi=c,b.activatedRoute=s,b.stockDatabase=l,b.selectedTab=0,b.stockFetchProgress=!1,b.dataSource=new L.o,b.selection=new et.c(!0,[]),b.isMobile=tt.a.android,b.exportProgress=!1,b.showProgress=!1,b.hotReloadProgress=!1,b.totalPurchase=Object(K.a)(0),b.stockColumns=["select","product","quantity","purchase","retailPrice","wholesalePrice","expire","action"],b}return me(e,t),e.prototype.ngOnInit=function(){var t=this;this.activatedRoute.queryParams.subscribe((function(e){e&&(t.selectedTab=Number(e.t))})),this.eventApi.listen(St.a.STOCK_UPDATED,(function(e){t.reload()})),this.initializeView()},e.prototype.isAllSelected=function(){return this.selection.selected.length},e.prototype.masterToggle=function(){var t=this;this.isAllSelected()?this.selection.clear():this.stockDatasource.data.forEach((function(e){return t.selection.select(e)}))},e.prototype.checkboxLabel=function(t){return t?(this.selection.isSelected(t)?"deselect":"select")+" row "+(t.position+1):(this.isAllSelected()?"select":"deselect")+" all"},e.prototype.transferStock=function(){0===this.selection.selected.length?this.snack.open("select atleast one product","Ok",{duration:2e3}):this.dialog.open(ft,{width:"95%",data:{items:this.selection.selected}})},e.prototype.showProgressBar=function(){this.showProgress=!0},e.prototype.hideProgressBar=function(){this.showProgress=!1},e.prototype.initializeView=function(){this.getStocksFromCache()},e.prototype.getStocksFromCache=function(t){var e=this;this.stockFetchProgress=!0,this.indexDb.getStocks().then((function(n){if(!n&&!Array.isArray(n))throw e.hotReloadStocks(),new Error("StockModel not available in localstorage");if(n&&Array.isArray(n)&&0===n.length)throw e.hotReloadStocks(),new Error("StockModel not available in localstorage");e.stockDatasource=new L.o(n),e.stockDatasource.paginator=e.paginator,e._getTotalPurchaseOfStock(n),e.stockFetchProgress=!1,t&&t(null)})).catch((function(n){e.stockFetchProgress=!1,e.logger.e(n),e.snack.open("Failed to get stocks from local storage","Ok",{duration:3e3}),t&&t(n)}))},e.prototype.hotReloadStocks=function(){var t=this;this.hotReloadProgress=!0,this.stockDatabase.getAllStock().then((function(e){return n=t,void 0,i=function(){return function(t,e){var n,a,i,o,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(6===o[0]&&r.label<i[1]){r.label=i[1],i=o;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(o);break}i[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(c){o=[6,c],a=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.hotReloadProgress=!1,[4,this.indexDb.saveStocks(e)];case 1:return t.sent(),this.stockDatasource=new L.o(e),this.stockDatasource.paginator=this.paginator,this._getTotalPurchaseOfStock(e),this.stockFetchProgress=!1,this.snack.open("Successful retrieve stocks from server","Ok",{duration:3e3}),[3,3];case 2:throw t.sent();case 3:return[2]}}))},new((a=void 0)||(a=Promise))((function(t,e){function o(t){try{c(i.next(t))}catch(n){e(n)}}function r(t){try{c(i.throw(t))}catch(n){e(n)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(o,r)}c((i=i.apply(n,[])).next())}));var n,a,i})).catch((function(e){t.hotReloadProgress=!1,t.logger.e(e),t.snack.open("Fails to get stocks from server, try again","Ok",{duration:3e3})}))},e.prototype.editStock=function(t){var e=this;this.router.navigateByUrl("/stock/edit/"+t.id+"?stock="+encodeURI(JSON.stringify(t))).catch((function(t){return e.logger.e(t)}))},e.prototype.deleteStock=function(t){var e=this;this.dialog.open(st,{width:"350",data:t}).afterClosed().subscribe((function(n){"no"===n?e.snack.open("Deletion is cancelled","Ok",{duration:3e3}):(e.showProgressBar(),e.stockDatabase.deleteStock(t).then((function(n){e.snack.open("Product successful deleted","Ok",{duration:3e3}),e.hideProgressBar(),e._removeProductFromTable(t)})).catch((function(t){e.logger.e(t),e.snack.open("Product is not deleted successful, try again","Ok",{duration:3e3}),e.hideProgressBar()})))}))},e.prototype.viewProduct=function(t){this.bottomSheet.open(ct,{data:t,closeOnNavigation:!0})},e.prototype.handleSearch=function(t){var e=this;this.getStocksFromCache((function(){e.stockDatasource.filter=t?t.toString().toLowerCase():""}))},e.prototype._removeProductFromTable=function(t){var e=this;this.stockDatasource.data=this.stockDatasource.data.filter((function(e){return e.id!==t.id})),this._getTotalPurchaseOfStock(this.stockDatasource.data),this.indexDb.getStocks().then((function(n){var a=n.filter((function(e){return e.id!==t.id}));e.indexDb.saveStocks(a).catch((function(t){return e.logger.w("Fails to update stock due to deleted item")}))})).catch((function(t){e.logger.w("fails to update stocks to to deleted item")}))},e.prototype._getTotalPurchaseOfStock=function(t){var e=t.reduce((function(t,e){return{purchase:t.purchase+e.purchase}}));this.totalPurchase=Object(K.a)(e.purchase)},e.prototype.reload=function(){this.getStocksFromCache((function(){}))},e.prototype.exportStock=function(){var t=this;this.exportProgress=!0,this.stockDatabase.exportToExcel().then((function(e){t.exportProgress=!1,t.snack.open("StockModel sent to your email, visit your email to download it","Ok",{duration:1e4})})).catch((function(e){t.logger.e(e),t.exportProgress=!1,t.snack.open("Request fails try again later","Ok",{duration:3e3})}))},e.prototype.importStocks=function(){var t=this;this.dialog.open(kt,{closeOnNavigation:!0}).afterClosed().subscribe((function(e){!0===e&&t.hotReloadStocks()}))},e.prototype.ngOnDestroy=function(){this.eventApi.unListen(St.a.STOCK_UPDATED)},e.\u0275fac=function(t){return new(t||e)(d.Mb(W.b),d.Mb(H.a),d.Mb(i.b),d.Mb(bt.a),d.Mb(Y.a),d.Mb(M.b),d.Mb(X.a),d.Mb(W.a),d.Mb(ht.a))},e.\u0275cmp=d.Gb({type:e,selectors:[["smartstock-stock"]],viewQuery:function(t,e){var n;1&t&&(d.Jc(pe,!0),d.Jc(U.a,!0)),2&t&&(d.oc(n=d.ac())&&(e.sidenav=n.first),d.oc(n=d.ac())&&(e.paginator=n.first))},features:[d.yb],decls:9,vars:11,consts:[[1,"match-parent"],[1,"match-parent-side",3,"fixedInViewport","mode","opened"],["sidenav",""],[3,"swiperight"],[3,"heading","showSearch","searchPlaceholder","sidenav","showProgress","searchCallback"],[4,"ngIf"],[1,"container"],[1,"row",2,"margin","16px"],[1,"full-width","col-12"],["color","primary",3,"selectedIndex"],["label","Products"],[1,"mat-elevation-z0"],[1,"d-flex","flex-row"],["routerLink","/stock/create","color","primary","mat-flat-button","",1,"ft-button"],[1,"toolbar-spacer"],[2,"width","8px","height","8px"],["matTooltip","Reload from server","color","primary","mat-flat-button","",1,"ft-button",3,"disabled","click"],["matTooltip","Fetch products from server","mode","indeterminate","color","primary",3,"diameter",4,"ngIf"],["matTooltip","Export Products To Csv","color","primary","mat-flat-button","",1,"ft-button",3,"disabled","click"],["matTooltip","Export Products InProgress..","mode","indeterminate","color","primary",3,"diameter",4,"ngIf"],["matTooltip","Import Products","color","primary","mat-flat-button","",1,"ft-button",3,"click"],["color","primary","mat-icon-button","",3,"matMenuTriggerFor"],["stockMenu",""],["matTooltip","refresh products in table","mat-menu-item","",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","product"],["matColumnDef","quantity"],["matColumnDef","purchase"],["matColumnDef","retailPrice"],["matRipple","","mat-cell","",4,"matCellDef"],["matColumnDef","wholesalePrice"],["matColumnDef","expire"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["class","table-data-row","mat-row","",3,"matTooltip",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["paginator",""],["label","Categories"],["label","Units"],["label","Suppliers"],["matTooltip","Fetch products from server","mode","indeterminate","color","primary",3,"diameter"],["matTooltip","Export Products InProgress..","mode","indeterminate","color","primary",3,"diameter"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["matRipple","","mat-cell",""],[1,"d-flex","flex-row","justify-content-end","align-items-end"],[1,"d-flex","flex-row","flex-nowrap","justify-content-end","align-items-end"],["mat-icon-button","",3,"matMenuTriggerFor"],["color","primary"],["menu",""],["mat-menu-item","",3,"matTooltip","click"],["mat-header-row",""],["mat-row","",1,"table-data-row",3,"matTooltip"]],template:function(t,e){if(1&t){var n=d.Tb();d.Sb(0,"mat-sidenav-container",0),d.Sb(1,"mat-sidenav",1,2),d.Nb(3,"smartstock-admin-drawer"),d.Rb(),d.Sb(4,"mat-sidenav-content",3),d.Zb("swiperight",(function(){d.tc(n);var t=d.pc(2);return e.openDrawer(t)})),d.Sb(5,"smartstock-toolbar",4),d.Zb("searchCallback",(function(t){return e.handleSearch(t)})),d.Rb(),d.Cc(6,Ae,66,13,"div",5),d.Cc(7,Ue,1,0,"smartstock-stock-mobile",5),d.Cc(8,qe,1,0,"smartstock-bottom-bar",5),d.Rb(),d.Rb()}if(2&t){var a=d.pc(2);d.Bb(1),d.jc("fixedInViewport",!0)("mode",e.enoughWidth()?"side":"over")("opened",e.enoughWidth()),d.Bb(4),d.jc("heading","Stock")("showSearch",!e.isMobile)("searchPlaceholder","Type to search")("sidenav",a)("showProgress",e.showProgress),d.Bb(1),d.jc("ngIf",!e.isMobile),d.Bb(1),d.jc("ngIf",e.isMobile),d.Bb(1),d.jc("ngIf",e.isMobile&&!e.enoughWidth())}},directives:[Q.b,Q.a,yt.a,Q.c,Rt.a,nt.n,V.b,V.a,r.a,r.h,o.a,W.c,z.a,T.a,A.d,A.e,A.b,L.n,L.c,L.i,L.b,L.k,L.m,U.a,Ut,se,ue.b,q.a,L.h,P,L.a,p.s,L.j,L.l,de.a],pipes:[nt.g,nt.f],styles:[".space[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.full-width[_ngcontent-%COMP%]{width:100%}.example-option-img[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px}[dir=rtl][_ngcontent-%COMP%]   .example-option-img[_ngcontent-%COMP%]{margin-right:0;margin-left:8px}.input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}table[_ngcontent-%COMP%]{width:100%}.stockbtn[_ngcontent-%COMP%]{margin-right:1.5vw}"]}),e}(vt.a);function Ge(t,e){1&t&&d.Nb(0,"mat-progress-spinner",4),2&t&&d.jc("diameter",20)}function Qe(t,e){1&t&&(d.Sb(0,"span"),d.Ec(1,"Load Image"),d.Rb())}function Le(t,e){if(1&t){var n=d.Tb();d.Sb(0,"div",5),d.Sb(1,"button",6),d.Zb("click",(function(){return d.tc(n),d.dc().closeDialog()})),d.Ec(2,"Done"),d.Rb(),d.Rb()}}var Ve=function(){function t(t,e){this.dialogRef=t,this.data=e,this.loadImageFlag=!0}return t.prototype.ngOnInit=function(){this.fileEvent=null,this.fileEvent=this.data.event},t.prototype.imageCropped=function(t){this.croppedImage=t.base64},t.prototype.imageLoaded=function(){this.loadImageFlag=!1},t.prototype.cropperReady=function(){},t.prototype.loadImageFailed=function(){},t.prototype.closeDialog=function(){this.dialogRef.close(this.croppedImage)},t.prototype.ngOnDestroy=function(){this.fileEvent=null},t.\u0275fac=function(e){return new(e||t)(d.Mb(M.g),d.Mb(M.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["smartstock-dialog-image-crop"]],decls:6,vars:10,consts:[["mode","indeterminate","color","primary",3,"diameter",4,"ngIf"],[4,"ngIf"],["format","png",2,"max-height","60vh",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","imageQuality","autoCrop","alignImage","onlyScaleDown","imageCropped","imageLoaded","cropperReady","loadImageFailed"],["style","padding: 16px",4,"ngIf"],["mode","indeterminate","color","primary",3,"diameter"],[2,"padding","16px"],["color","primary","mat-button","",1,"btn-block",3,"click"]],template:function(t,e){1&t&&(d.Sb(0,"div"),d.Cc(1,Ge,1,1,"mat-progress-spinner",0),d.Cc(2,Qe,2,0,"span",1),d.Sb(3,"div"),d.Sb(4,"image-cropper",2),d.Zb("imageCropped",(function(t){return e.imageCropped(t)}))("imageLoaded",(function(){return e.imageLoaded()}))("cropperReady",(function(){return e.cropperReady()}))("loadImageFailed",(function(){return e.loadImageFailed()})),d.Rb(),d.Rb(),d.Cc(5,Le,3,0,"div",3),d.Rb()),2&t&&(d.Bb(1),d.jc("ngIf",e.loadImageFlag),d.Bb(1),d.jc("ngIf",e.loadImageFlag),d.Bb(2),d.jc("imageChangedEvent",e.fileEvent)("maintainAspectRatio",!0)("aspectRatio",16/9)("imageQuality",70)("autoCrop",!0)("alignImage","center")("onlyScaleDown",!0),d.Bb(1),d.jc("ngIf",!e.loadImageFlag))},directives:[nt.n,$.a,q.a,o.a],styles:[""]}),t}(),ze=function(t,e,n,a){return new(n||(n=Promise))((function(i,o){function r(t){try{s(a.next(t))}catch(e){o(e)}}function c(t){try{s(a.throw(t))}catch(e){o(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}s((a=a.apply(t,e||[])).next())}))},$e=function(t,e){var n,a,i,o,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(6===o[0]&&r.label<i[1]){r.label=i[1],i=o;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(o);break}i[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(c){o=[6,c],a=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};function Je(t,e){if(1&t){var n=d.Tb();d.Sb(0,"div",5),d.Sb(1,"mat-card",6),d.Sb(2,"span",7),d.Ec(3),d.Rb(),d.Nb(4,"span",8),d.Sb(5,"button",9),d.Zb("click",(function(t){d.tc(n);var a=e.index;return d.dc().removeFile(t,a)})),d.Sb(6,"mat-icon",10),d.Ec(7,"delete"),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&t){var a=e.$implicit;d.Bb(3),d.Gc(" ",a.name," ")}}var We=function(){function t(){this.files=[],this.uploadFileFormControl=new m.f([],[m.v.nullValidator,m.v.required])}return t.prototype.ngOnInit=function(){},t.prototype.removeFile=function(t,e){t.preventDefault(),this.files.splice(e,1)},t.prototype.uploadFiles=function(t,e){return ze(this,void 0,void 0,(function(){var n,a,i,o,r,c,s,l;return $e(this,(function(b){switch(b.label){case 0:return(n=t.target.files).item(0)?(a=n.item(0),0!==this.files.length?[3,2]:(o=(i=this.files).push,r={name:a.name,type:a.type},[4,this.readFileContent(a)])):[3,5];case 1:return o.apply(i,[(r.url=b.sent(),r)]),[3,4];case 2:return this.files=this.files.filter((function(t){return a.name!==t.name})),s=(c=this.files).push,l={name:a.name,type:a.type},[4,this.readFileContent(a)];case 3:s.apply(c,[(l.url=b.sent(),l)]),b.label=4;case 4:this.uploadFileFormControl.setValue(this.files),e.value="",b.label=5;case 5:return[2]}}))}))},t.prototype.readFileContent=function(t){return ze(this,void 0,void 0,(function(){return $e(this,(function(e){return[2,new Promise((function(e,n){var a=new FileReader;a.onload=function(t){e(t.target.result.toString())},a.onerror=function(t){n("Fails to read file")},a.readAsDataURL(t)}))]}))}))},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Gb({type:t,selectors:[["smartstock-upload-files"]],inputs:{files:"files",uploadFileFormControl:"uploadFileFormControl"},decls:7,vars:2,consts:[[2,"display","flex","flex-direction","row","flex-wrap","wrap","align-items","center","padding","8px"],["style","display: flex; flex-direction: row; flex-wrap: nowrap; align-items: center",4,"ngFor","ngForOf"],["matRipple","",2,"width","120px","height","50px","margin","5px",3,"click"],["type","file",2,"display","none",3,"multiple","change"],["uploadFile",""],[2,"display","flex","flex-direction","row","flex-wrap","nowrap","align-items","center"],[2,"height","50px","margin","5px","display","flex","flex-direction","row","align-items","center"],[2,"max-width","200px","overflow","hidden","white-space","nowrap","text-overflow","ellipsis"],[2,"width","10px"],["mat-icon-button","",2,"display","inline-block",3,"click"],["color","warn"]],template:function(t,e){if(1&t){var n=d.Tb();d.Sb(0,"div",0),d.Cc(1,Je,8,1,"div",1),d.Sb(2,"mat-card",2),d.Zb("click",(function(){return d.tc(n),d.pc(6).click()})),d.Sb(3,"span"),d.Ec(4,"Add File"),d.Rb(),d.Rb(),d.Rb(),d.Sb(5,"input",3,4),d.Zb("change",(function(t){d.tc(n);var a=d.pc(6);return e.uploadFiles(t,a)})),d.Rb()}2&t&&(d.Bb(1),d.jc("ngForOf",e.files),d.Bb(4),d.jc("multiple",!1))},directives:[nt.m,r.a,p.s,o.a,T.a],styles:[""]}),t}(),Ke=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();function Xe(t,e){1&t&&(d.Sb(0,"button",48),d.Ec(1,"Upload Image"),d.Rb())}function He(t,e){if(1&t){var n=d.Tb();d.Sb(0,"div",49),d.Sb(1,"button",50),d.Zb("click",(function(){d.tc(n);var t=d.dc(),e=d.pc(15);return t.removeImage(e)})),d.Ec(2,"Remove Image"),d.Rb(),d.Rb()}}function Ye(t,e){1&t&&(d.Sb(0,"h5"),d.Ec(1," Files "),d.Rb())}var tn=function(){return[]};function en(t,e){if(1&t&&(d.Sb(0,"div",17),d.Nb(1,"smartstock-upload-files",51),d.Rb()),2&t){var n=d.dc();d.Bb(1),d.jc("files",n.isUpdateMode?n.initialStock.downloads:d.lc(2,tn))("uploadFileFormControl",n.getDownloadsFormControl())}}function nn(t,e){if(1&t&&(d.Sb(0,"mat-option",52),d.Ec(1),d.Rb()),2&t){var n=e.$implicit;d.jc("value",n.name),d.Bb(1),d.Gc(" ",n.name," ")}}function an(t,e){1&t&&d.Nb(0,"mat-progress-spinner",53),2&t&&d.jc("diameter",20)}function on(t,e){if(1&t){var n=d.Tb();d.Sb(0,"button",54),d.Zb("click",(function(t){return d.tc(n),d.dc().refreshCategories(t)})),d.Sb(1,"mat-icon"),d.Ec(2,"refresh"),d.Rb(),d.Rb()}}function rn(t,e){if(1&t){var n=d.Tb();d.Sb(0,"button",55),d.Zb("click",(function(t){return d.tc(n),d.dc().addNewCategory(t)})),d.Sb(1,"mat-icon"),d.Ec(2,"add"),d.Rb(),d.Rb()}}function cn(t,e){if(1&t&&(d.Sb(0,"mat-option",52),d.Ec(1),d.Rb()),2&t){var n=e.$implicit;d.jc("value",n.name),d.Bb(1),d.Gc(" ",n.name," ")}}function sn(t,e){1&t&&d.Nb(0,"mat-progress-spinner",60),2&t&&d.jc("diameter",20)}function ln(t,e){if(1&t){var n=d.Tb();d.Sb(0,"button",61),d.Zb("click",(function(t){return d.tc(n),d.dc(2).refreshSuppliers(t)})),d.Sb(1,"mat-icon"),d.Ec(2,"refresh"),d.Rb(),d.Rb()}}function bn(t,e){if(1&t){var n=d.Tb();d.Sb(0,"button",62),d.Zb("click",(function(t){return d.tc(n),d.dc(2).addNewSupplier(t)})),d.Sb(1,"mat-icon"),d.Ec(2,"add"),d.Rb(),d.Rb()}}function un(t,e){if(1&t&&(d.Sb(0,"mat-form-field",29),d.Sb(1,"mat-label"),d.Ec(2,"Supplier"),d.Rb(),d.Sb(3,"mat-select",56),d.Cc(4,cn,2,2,"mat-option",31),d.ec(5,"async"),d.Rb(),d.Cc(6,sn,1,1,"mat-progress-spinner",57),d.Sb(7,"mat-error"),d.Ec(8,"Supplier required"),d.Rb(),d.Sb(9,"div",33),d.Cc(10,ln,3,0,"button",58),d.Cc(11,bn,3,0,"button",59),d.Rb(),d.Rb()),2&t){var n=d.dc();d.Bb(3),d.jc("multiple",!1),d.Bb(1),d.jc("ngForOf",d.fc(5,5,n.suppliers)),d.Bb(2),d.jc("ngIf",n.suppliersFetching),d.Bb(4),d.jc("ngIf",!n.suppliersFetching),d.Bb(1),d.jc("ngIf",!n.suppliersFetching)}}function dn(t,e){1&t&&(d.Sb(0,"mat-form-field",26),d.Sb(1,"mat-label"),d.Ec(2,"Purchase Price / Unit"),d.Rb(),d.Sb(3,"span",63),d.Ec(4,"TZS"),d.Rb(),d.Nb(5,"input",64),d.Sb(6,"mat-error"),d.Ec(7,"Purchase price required"),d.Rb(),d.Rb())}function mn(t,e){1&t&&(d.Sb(0,"mat-form-field",26),d.Sb(1,"mat-label"),d.Ec(2,"Retail Price / Unit"),d.Rb(),d.Sb(3,"span",63),d.Ec(4,"TZS"),d.Rb(),d.Nb(5,"input",65),d.Sb(6,"mat-error"),d.Ec(7,"Retail price required"),d.Rb(),d.Rb())}function pn(t,e){1&t&&(d.Sb(0,"mat-form-field",26),d.Sb(1,"mat-label"),d.Ec(2,"Wholesale Price / Unit"),d.Rb(),d.Sb(3,"span",63),d.Ec(4,"TZS"),d.Rb(),d.Nb(5,"input",66),d.Sb(6,"mat-error"),d.Ec(7,"Wholesale price required"),d.Rb(),d.Rb())}function fn(t,e){1&t&&(d.Sb(0,"mat-form-field",67),d.Sb(1,"mat-label"),d.Ec(2,"Wholesale Quantity"),d.Rb(),d.Nb(3,"input",68),d.Sb(4,"mat-error"),d.Ec(5,"Wholesale Quantity required"),d.Rb(),d.Rb())}function hn(t,e){1&t&&(d.Sb(0,"mat-form-field",69),d.Sb(1,"mat-label"),d.Ec(2,"Quantity"),d.Rb(),d.Nb(3,"input",70),d.Sb(4,"mat-error"),d.Ec(5,"Quantity required"),d.Rb(),d.Rb())}function gn(t,e){1&t&&(d.Sb(0,"mat-form-field",26),d.Sb(1,"mat-label"),d.Ec(2,"Reorder Level"),d.Rb(),d.Nb(3,"input",71),d.Sb(4,"mat-error"),d.Ec(5,"Reorder field required"),d.Rb(),d.Rb())}function kn(t,e){if(1&t&&(d.Sb(0,"mat-option",52),d.Ec(1),d.Rb()),2&t){var n=e.$implicit;d.jc("value",n.name),d.Bb(1),d.Gc(" ",n.name," ")}}function vn(t,e){1&t&&d.Nb(0,"mat-progress-spinner",53),2&t&&d.jc("diameter",20)}function Sn(t,e){if(1&t){var n=d.Tb();d.Sb(0,"button",72),d.Zb("click",(function(t){return d.tc(n),d.dc().refreshUnits(t)})),d.Sb(1,"mat-icon"),d.Ec(2,"refresh"),d.Rb(),d.Rb()}}function yn(t,e){if(1&t){var n=d.Tb();d.Sb(0,"button",73),d.Zb("click",(function(t){return d.tc(n),d.dc().addNewUnit(t)})),d.Sb(1,"mat-icon"),d.Ec(2,"add"),d.Rb(),d.Rb()}}function Rn(t,e){if(1&t&&(d.Sb(0,"mat-form-field",29),d.Sb(1,"mat-label"),d.Ec(2,"Expire Date"),d.Rb(),d.Nb(3,"input",74),d.Nb(4,"mat-datepicker-toggle",75),d.Nb(5,"mat-datepicker",76,77),d.Rb()),2&t){var n=d.pc(6);d.Bb(3),d.jc("matDatepicker",n),d.Bb(1),d.jc("for",n),d.Bb(1),d.jc("touchUi",!0)}}function xn(t,e){1&t&&d.Nb(0,"mat-progress-spinner",78)}var Cn=function(t){function e(e,n,a,i,o){var r=t.call(this)||this;return r.formBuilder=e,r.snack=n,r.dialog=a,r.router=i,r.stockDatabase=o,r.isUpdateMode=!1,r.croppedImage="",r.mainProgress=!1,r.unitsFetching=!0,r.categoriesFetching=!0,r.suppliersFetching=!0,r.isMobile=tt.a.android,r}return Ke(e,t),e.prototype.ngOnInit=function(){this.initializeForm(this.initialStock),this.getCategories(),this.getUnits(),this.getSuppliers(),this.metas=Object(K.a)([])},e.prototype.fileChangeEvent=function(t){var e=this;t&&this.dialog.open(Ve,{data:{event:t}}).afterClosed().subscribe((function(t){t&&(e.croppedImage=t)}))},e.prototype.initializeForm=function(t){t&&t.image&&(this.croppedImage=t.image),this.productForm=this.formBuilder.group({product:[t&&t.product?t.product:"",[m.v.nullValidator,m.v.required]],saleable:[!t||void 0===t.saleable||t.saleable],downloadable:[!(!t||void 0===t.downloadable)&&t.downloadable],downloads:[t&&t.downloads?t.downloads:[]],stockable:[!t||void 0===t.stockable||t.stockable],purchasable:[!t||void 0===t.purchasable||t.purchasable],description:[t&&t.description?t.description:""],purchase:[t&&t.purchase?t.purchase:0,[m.v.nullValidator,m.v.required]],retailPrice:[t&&t.retailPrice?t.retailPrice:0,[m.v.nullValidator,m.v.required]],wholesalePrice:[t&&t.wholesalePrice?t.wholesalePrice:0,[m.v.nullValidator,m.v.required]],wholesaleQuantity:[t&&t.wholesaleQuantity?t.wholesaleQuantity:0,[m.v.nullValidator,m.v.required]],quantity:[t&&t.quantity?t.quantity:0,[m.v.nullValidator,m.v.required]],reorder:[t&&t.reorder?t.reorder:0,[m.v.nullValidator,m.v.required]],unit:[t&&t.unit?t.unit:null,[m.v.nullValidator,m.v.required]],canExpire:[!t||void 0===t.canExpire||t.canExpire],expire:[t&&t.expire?t.expire:null],category:[t&&t.category?t.category:null,[m.v.required,m.v.nullValidator]],supplier:[t&&t.supplier?t.supplier:"general",[m.v.required,m.v.nullValidator]]})},e.prototype.getSaleableFormControl=function(){return this.productForm.get("saleable")},e.prototype.getPurchasableFormControl=function(){return this.productForm.get("purchasable")},e.prototype.getStockableFormControl=function(){return this.productForm.get("stockable")},e.prototype.getDownloadAbleFormControl=function(){return this.productForm.get("downloadable")},e.prototype.getDownloadsFormControl=function(){return this.productForm.get("downloads")},e.prototype.getCanExpireFormControl=function(){return this.productForm.get("canExpire")},e.prototype.getSuppliers=function(){var t=this;this.suppliersFetching=!0,this.stockDatabase.getAllSupplier({}).then((function(e){t.suppliersFetching=!1,t.suppliers=Object(K.a)(JSON.parse(JSON.stringify(e)))})).catch((function(e){t.suppliersFetching=!1,t.suppliers=Object(K.a)([{name:"Default"}])}))},e.prototype.getCategories=function(){var t=this;this.categoriesFetching=!0,this.stockDatabase.getAllCategory({size:1e4}).then((function(e){var n=JSON.parse(JSON.stringify(e));t.categories=Object(K.a)(n),t.categoriesFetching=!1})).catch((function(e){t.categories=Object(K.a)([{name:"No category"}]),console.warn(e),t.categoriesFetching=!1}))},e.prototype.getUnits=function(){var t=this;this.unitsFetching=!0,this.stockDatabase.getAllUnit({}).then((function(e){t.units=Object(K.a)(JSON.parse(JSON.stringify(e))),t.unitsFetching=!1})).catch((function(e){t.units=Object(K.a)([{name:"No unit"}]),console.warn(e),t.unitsFetching=!1}))},e.prototype.addProduct=function(t){var e=this;this.productForm.valid?this.productForm.value.purchase>=this.productForm.value.retailPrice||this.productForm.value.purchase>=this.productForm.value.wholesalePrice?this.snack.open("Purchase price must not be greater than retailPrice/wholesalePrice","Ok",{duration:3e3}):!this.productForm.get("canExpire").value||this.productForm.get("expire").value?(this.mainProgress=!0,this.croppedImage&&(this.productForm.value.image=this.croppedImage),this.stockDatabase.addStock(this.productForm.value,(function(t){})).then((function(n){e.mainProgress=!1,e.snack.open("Product added","Ok",{duration:3e3}),e.croppedImage=null,e.productForm.reset(),t.resetForm(),e.router.navigateByUrl("/stock").catch(console.log)})).catch((function(t){e.mainProgress=!1,e.snack.open(t.message?t.message:"Unknown","Ok",{duration:3e3})}))):this.snack.open("Please enter expire date","Ok",{duration:3e3}):this.snack.open("Fill all required fields","Ok",{duration:3e3})},e.prototype.updateProduct=function(t){var e=this;if(this.productForm.invalid)this.snack.open("Fill all required fields","Ok",{duration:3e3});else if(!this.productForm.get("canExpire").value||this.productForm.get("expire").value){this.mainProgress=!0;var n=this.productForm.value;n.id=this.initialStock.id,n.image=this.croppedImage,this.stockDatabase.updateStock(n,(function(t){console.log(t)})).then((function(n){e.mainProgress=!1,e.snack.open("Product updated","Ok",{duration:3e3}),e.productForm.reset(),t.resetForm(),e.router.navigateByUrl("/stock").catch((function(t){return console.log(t)}))})).catch((function(t){console.warn(t),e.mainProgress=!1,e.snack.open(t.message?t.message:"Unknown","Ok",{duration:3e3})}))}else this.snack.open("Please enter expire date","Ok",{duration:3e3})},e.prototype.addNewUnit=function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.dialog.open(be,{closeOnNavigation:!0}).afterClosed().subscribe((function(t){t&&e.getUnits()}))},e.prototype.refreshUnits=function(t){t.preventDefault(),t.stopPropagation(),this.getUnits()},e.prototype.addNewCategory=function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.dialog.open(Zt,{closeOnNavigation:!0}).afterClosed().subscribe((function(t){t&&e.getCategories()}))},e.prototype.refreshCategories=function(t){t.preventDefault(),t.stopPropagation(),this.getCategories()},e.prototype.addNewSupplier=function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.dialog.open(ue.a,{closeOnNavigation:!0}).afterClosed().subscribe((function(t){t&&e.getSuppliers()}))},e.prototype.refreshSuppliers=function(t){t.preventDefault(),t.stopPropagation(),this.getSuppliers()},e.prototype.removeImage=function(t){t.value="",this.croppedImage=null},e.\u0275fac=function(t){return new(t||e)(d.Mb(m.e),d.Mb(bt.a),d.Mb(M.b),d.Mb(W.b),d.Mb(ht.a))},e.\u0275cmp=d.Gb({type:e,selectors:[["smartstock-stock-new"]],inputs:{isUpdateMode:"isUpdateMode",initialStock:"initialStock"},features:[d.yb],decls:102,vars:37,consts:[[1,"match-parent"],[1,"match-parent-side",3,"fixedInViewport","mode","opened"],["sidenav",""],["backLink","/stock/products",3,"heading","sidenav","hasBackRoute","showProgress"],[1,"container","stock-new-wrapper"],[1,"row","d-flex","flex-column","justify-content-center","align-items-center",2,"padding","16px"],[1,"col-12","col-xl-9","col-lg-9",2,"padding","0"],["matRipple","",1,"col-12","col-xl-9","col-lg-9","d-flex","flex-column","justify-content-center","align-items-center",2,"width","100%","min-height","100px","border-radius","4px","background-color","#f5f5f5",3,"click"],["matCardImageLarge","","alt","",2,"width","100%","height","auto","margin-top","4px",3,"src"],["mat-button","","color","primary",4,"ngIf"],["style","padding: 0","class","col-12 col-xl-9 col-lg-9 d-flex justify-content-center align-items-center",4,"ngIf"],["type","file",2,"display","none",3,"change"],["imageInput",""],[3,"formGroup","ngSubmit"],["formElement","ngForm"],[1,"row","d-flex","justify-content-center","align-items-center"],[1,"col-12","col-xl-9","col-lg-9",2,"margin-bottom","16px"],[1,"card-wrapper"],["matLine",""],["formControlName","saleable","matSuffix",""],["formControlName","stockable","matSuffix",""],["formControlName","downloadable","matSuffix",""],["formControlName","purchasable","matSuffix",""],[4,"ngIf"],["class","card-wrapper",4,"ngIf"],[1,"card-content"],["appearance","fill",1,"my-input"],["matInput","","type","text","required","","formControlName","product"],["matInput","","type","text","formControlName","description"],["appearance","outline",1,"my-input"],["formControlName","category",3,"multiple"],[3,"value",4,"ngFor","ngForOf"],["matTooltip","Fetching units","matSuffix","","color","accent","mode","indeterminate",3,"diameter",4,"ngIf"],["matSuffix","",1,"d-flex","flex-row"],["mat-icon-button","","matTooltip","refresh categories",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","add new category",3,"click",4,"ngIf"],["appearance","outline","class","my-input",4,"ngIf"],["appearance","fill","class","my-input",4,"ngIf"],["appearance","fill","class","my-input","matTooltip","Quantity for this product to be sold as a whole or in bulk",4,"ngIf"],["appearance","fill","class","my-input","matTooltip","Total initial unit quantity available",4,"ngIf"],["formControlName","unit"],["mat-icon-button","","matTooltip","refresh units",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","add new unit",3,"click",4,"ngIf"],["matTooltip","Select if a product can expire","labelPosition","after","formControlName","canExpire",1,"my-input"],["color","primary","mat-raised-button","",1,"btn-block","ft-button",3,"disabled"],["style","display: inline-block","diameter","30","mode","indeterminate",4,"ngIf"],[2,"padding","16px 0"],["routerLink","/stock","color","primary","mat-button","",1,"btn-block","ft-button"],["mat-button","","color","primary"],[1,"col-12","col-xl-9","col-lg-9","d-flex","justify-content-center","align-items-center",2,"padding","0"],["color","warn","mat-button","",3,"click"],[3,"files","uploadFileFormControl"],[3,"value"],["matTooltip","Fetching units","matSuffix","","color","accent","mode","indeterminate",3,"diameter"],["mat-icon-button","","matTooltip","refresh categories",3,"click"],["mat-icon-button","","matTooltip","add new category",3,"click"],["formControlName","supplier",3,"multiple"],["matTooltip","Fetching suppliers","matSuffix","","color","accent","mode","indeterminate",3,"diameter",4,"ngIf"],["mat-icon-button","","matTooltip","refresh suppliers",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","add new supplier",3,"click",4,"ngIf"],["matTooltip","Fetching suppliers","matSuffix","","color","accent","mode","indeterminate",3,"diameter"],["mat-icon-button","","matTooltip","refresh suppliers",3,"click"],["mat-icon-button","","matTooltip","add new supplier",3,"click"],["matSuffix",""],["min","0","matInput","","type","number","required","","formControlName","purchase"],["min","0","matInput","","type","number","required","","formControlName","retailPrice"],["min","0","matInput","","type","number","required","","formControlName","wholesalePrice"],["appearance","fill","matTooltip","Quantity for this product to be sold as a whole or in bulk",1,"my-input"],["min","0","matInput","","type","number","required","","formControlName","wholesaleQuantity"],["appearance","fill","matTooltip","Total initial unit quantity available",1,"my-input"],["min","0","matInput","","type","number","required","","formControlName","quantity"],["min","0","matInput","","type","number","required","","formControlName","reorder"],["mat-icon-button","","matTooltip","refresh units",3,"click"],["mat-icon-button","","matTooltip","add new unit",3,"click"],["matInput","","formControlName","expire",3,"matDatepicker"],["matSuffix","",3,"for"],[3,"touchUi"],["picker",""],["diameter","30","mode","indeterminate",2,"display","inline-block"]],template:function(t,e){if(1&t){var n=d.Tb();d.Sb(0,"mat-sidenav-container",0),d.Sb(1,"mat-sidenav",1,2),d.Nb(3,"smartstock-admin-drawer"),d.Rb(),d.Sb(4,"mat-sidenav-content"),d.Nb(5,"smartstock-toolbar",3),d.Sb(6,"div",4),d.Sb(7,"div",5),d.Sb(8,"h5",6),d.Ec(9," Image "),d.Rb(),d.Sb(10,"mat-card",7),d.Zb("click",(function(){return d.tc(n),d.pc(15).click()})),d.Nb(11,"img",8),d.Cc(12,Xe,2,0,"button",9),d.Rb(),d.Cc(13,He,3,0,"div",10),d.Sb(14,"input",11,12),d.Zb("change",(function(t){return e.fileChangeEvent(t)})),d.Rb(),d.Rb(),d.Sb(16,"form",13,14),d.Zb("ngSubmit",(function(){d.tc(n);var t=d.pc(17);return e.isUpdateMode?e.updateProduct(t):e.addProduct(t)})),d.Sb(18,"div",15),d.Sb(19,"div",16),d.Sb(20,"h5"),d.Ec(21," Status "),d.Rb(),d.Sb(22,"mat-card",17),d.Sb(23,"mat-list"),d.Sb(24,"mat-list-item"),d.Sb(25,"p",18),d.Ec(26,"Can be sold"),d.Rb(),d.Nb(27,"mat-checkbox",19),d.Rb(),d.Sb(28,"mat-list-item"),d.Sb(29,"p",18),d.Ec(30,"Can be stocked"),d.Rb(),d.Nb(31,"mat-checkbox",20),d.Rb(),d.Sb(32,"mat-list-item"),d.Sb(33,"p",18),d.Ec(34,"Can be downloaded"),d.Rb(),d.Nb(35,"mat-checkbox",21),d.Rb(),d.Sb(36,"mat-list-item"),d.Sb(37,"p",18),d.Ec(38,"Can be purchased"),d.Rb(),d.Nb(39,"mat-checkbox",22),d.Rb(),d.Rb(),d.Rb(),d.Cc(40,Ye,2,0,"h5",23),d.Cc(41,en,2,3,"div",24),d.Sb(42,"h5"),d.Ec(43," Product "),d.Rb(),d.Sb(44,"mat-card",17),d.Sb(45,"mat-card-content",25),d.Sb(46,"mat-form-field",26),d.Sb(47,"mat-label"),d.Ec(48,"Product Name"),d.Rb(),d.Nb(49,"input",27),d.Sb(50,"mat-error"),d.Ec(51,"Product name required"),d.Rb(),d.Rb(),d.Sb(52,"mat-form-field",26),d.Sb(53,"mat-label"),d.Ec(54,"Description"),d.Rb(),d.Nb(55,"textarea",28),d.Rb(),d.Sb(56,"mat-form-field",29),d.Sb(57,"mat-label"),d.Ec(58,"Category"),d.Rb(),d.Sb(59,"mat-select",30),d.Cc(60,nn,2,2,"mat-option",31),d.ec(61,"async"),d.Rb(),d.Cc(62,an,1,1,"mat-progress-spinner",32),d.Sb(63,"mat-error"),d.Ec(64,"Category required"),d.Rb(),d.Sb(65,"div",33),d.Cc(66,on,3,0,"button",34),d.Cc(67,rn,3,0,"button",35),d.Rb(),d.Rb(),d.Cc(68,un,12,7,"mat-form-field",36),d.Rb(),d.Rb(),d.Sb(69,"h5"),d.Ec(70," Inventory "),d.Rb(),d.Sb(71,"mat-card",17),d.Sb(72,"mat-card-content",25),d.Cc(73,dn,8,0,"mat-form-field",37),d.Cc(74,mn,8,0,"mat-form-field",37),d.Cc(75,pn,8,0,"mat-form-field",37),d.Cc(76,fn,6,0,"mat-form-field",38),d.Cc(77,hn,6,0,"mat-form-field",39),d.Cc(78,gn,6,0,"mat-form-field",37),d.Sb(79,"mat-form-field",29),d.Sb(80,"mat-label"),d.Ec(81,"Unit"),d.Rb(),d.Sb(82,"mat-select",40),d.Cc(83,kn,2,2,"mat-option",31),d.ec(84,"async"),d.Rb(),d.Cc(85,vn,1,1,"mat-progress-spinner",32),d.Sb(86,"mat-error"),d.Ec(87,"Unit required"),d.Rb(),d.Sb(88,"div",33),d.Cc(89,Sn,3,0,"button",41),d.Cc(90,yn,3,0,"button",42),d.Rb(),d.Rb(),d.Sb(91,"mat-checkbox",43),d.Ec(92," Can Expire? "),d.Rb(),d.Cc(93,Rn,7,3,"mat-form-field",36),d.Rb(),d.Rb(),d.Rb(),d.Sb(94,"div",16),d.Sb(95,"div"),d.Sb(96,"button",44),d.Ec(97),d.Cc(98,xn,1,0,"mat-progress-spinner",45),d.Rb(),d.Sb(99,"div",46),d.Sb(100,"button",47),d.Ec(101," Cancel "),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&t){var a=d.pc(2);d.Bb(1),d.jc("fixedInViewport",!0)("mode",e.enoughWidth()?"side":"over")("opened",e.enoughWidth()),d.Bb(4),d.jc("heading",e.isUpdateMode?"Update StockModel":"Create StockModel")("sidenav",a)("hasBackRoute",e.isMobile)("showProgress",!1),d.Bb(6),d.jc("src",e.croppedImage,d.vc),d.Bb(1),d.jc("ngIf",!e.croppedImage),d.Bb(1),d.jc("ngIf",e.croppedImage),d.Bb(3),d.jc("formGroup",e.productForm),d.Bb(24),d.jc("ngIf",!0===e.getDownloadAbleFormControl().value),d.Bb(1),d.jc("ngIf",!0===e.getDownloadAbleFormControl().value),d.Bb(18),d.jc("multiple",!1),d.Bb(1),d.jc("ngForOf",d.fc(61,33,e.categories)),d.Bb(2),d.jc("ngIf",e.categoriesFetching),d.Bb(4),d.jc("ngIf",!e.categoriesFetching),d.Bb(1),d.jc("ngIf",!e.categoriesFetching),d.Bb(1),d.jc("ngIf",!0===e.getPurchasableFormControl().value),d.Bb(5),d.jc("ngIf",!0===e.getPurchasableFormControl().value),d.Bb(1),d.jc("ngIf",!0===e.getSaleableFormControl().value),d.Bb(1),d.jc("ngIf",!0===e.getSaleableFormControl().value),d.Bb(1),d.jc("ngIf",!0===e.getSaleableFormControl().value),d.Bb(1),d.jc("ngIf",!0===e.getStockableFormControl().value),d.Bb(1),d.jc("ngIf",!0===e.getStockableFormControl().value),d.Bb(5),d.jc("ngForOf",d.fc(84,35,e.units)),d.Bb(2),d.jc("ngIf",e.unitsFetching),d.Bb(4),d.jc("ngIf",!e.unitsFetching),d.Bb(1),d.jc("ngIf",!e.unitsFetching),d.Bb(3),d.jc("ngIf",!0===e.getCanExpireFormControl().value),d.Bb(3),d.jc("disabled",e.mainProgress),d.Bb(1),d.Gc(" ",e.isUpdateMode?"Update Product":"Create Product"," "),d.Bb(1),d.jc("ngIf",e.mainProgress)}},directives:[Q.b,Q.a,yt.a,Q.c,Rt.a,r.a,p.s,r.e,nt.n,m.w,m.p,m.i,J.a,J.c,p.k,P,m.o,m.h,O.h,r.c,O.c,O.f,_.b,m.c,m.u,O.b,G.a,nt.m,z.a,o.a,W.c,We,p.n,q.a,T.a,m.s,D.b,D.d,D.a],pipes:[nt.b],styles:[".stock-new-wrapper[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:24px}.card-wrapper[_ngcontent-%COMP%]{margin-bottom:16px}"]}),e}(vt.a),wn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();function En(t,e){if(1&t&&d.Nb(0,"smartstock-stock-new",1),2&t){var n=d.dc();d.jc("isUpdateMode",!0)("initialStock",n.stock)}}var Fn=function(t){function e(e,n){var a=t.call(this)||this;return a.activatedRoute=e,a.snack=n,a.mainProgress=!1,a.loadStock=!1,a}return wn(e,t),e.prototype.ngOnInit=function(){this.getStock()},e.prototype.getStock=function(){var t=this;this.loadStock=!0,this.activatedRoute.queryParams.subscribe((function(e){e&&e.stock?(t.loadStock=!1,t.stock=JSON.parse(e.stock)):(t.loadStock=!1,t.snack.open("Fails to get stock for update","Ok",{duration:3e3}))}))},e.\u0275fac=function(t){return new(t||e)(d.Mb(W.a),d.Mb(bt.a))},e.\u0275cmp=d.Gb({type:e,selectors:[["smartstock-stock-edit"]],features:[d.yb],decls:1,vars:1,consts:[[3,"isUpdateMode","initialStock",4,"ngIf"],[3,"isUpdateMode","initialStock"]],template:function(t,e){1&t&&d.Cc(0,En,1,2,"smartstock-stock-new",0),2&t&&d.jc("ngIf",!e.loadStock)},directives:[nt.n,Cn],styles:[".stock-new-wrapper[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:24px}.card-wrapper[_ngcontent-%COMP%]{margin-bottom:16px}"]}),e}(vt.a),Pn=n("Ktec"),jn=[{path:"",component:Ze},{path:"create",component:Cn},{path:"edit/:id",component:Fn}],In=function(){function t(){}return t.\u0275mod=d.Kb({type:t}),t.\u0275inj=d.Jb({factory:function(e){return new(e||t)},imports:[[nt.c,W.e.forChild(jn),Pn.a,Q.d,r.f,O.e,a.b,_.c,m.t,D.c,V.c,L.p,T.b,U.b,o.b,z.b,p.t,A.c,i.c,B.b,q.b,G.b,I,Z.a,N.b,M.f,$.b,J.d]]}),t}()}}]);