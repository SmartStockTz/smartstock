(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{UmPW:function(t,e,n){"use strict";n.d(e,"b",(function(){return G})),n.d(e,"a",(function(){return W}));var r=n("0IaG"),a=n("+0xr"),o=n("3Pt+"),i=n("tajD"),c=n("fXoL"),u=n("dNgK"),s=n("Wp6s"),l=n("bTqV"),p=n("STbY"),b=n("NFeN"),d=n("ofXK"),f=n("FKr1"),m=n("kmnG"),g=n("qFsG"),h=n("Xa2L"),v=n("Qu3c"),S=n("7EHt");function y(t,e){1&t&&(c.Sb(0,"th",20),c.Ec(1,"Name"),c.Rb())}function R(t,e){if(1&t){var n=c.Tb();c.Sb(0,"div",25),c.Zb("click",(function(t){return c.tc(n),t.stopPropagation()})),c.Sb(1,"mat-form-field",26),c.Sb(2,"mat-label"),c.Ec(3,"Name"),c.Rb(),c.Nb(4,"input",27),c.Rb(),c.Sb(5,"button",28),c.Zb("click",(function(){c.tc(n);var t=e.id;c.dc();var r=c.pc(1),a=c.dc(2);return a.updateSupplierName({id:t,value:a.nameFormControl.value},r)})),c.Ec(6,"Update "),c.Rb(),c.Rb()}if(2&t){var r=e.data,a=c.dc(3);c.Bb(4),c.jc("value",r)("formControl",a.nameFormControl)}}var k=function(t,e){return{id:t,data:e}};function w(t,e){if(1&t&&(c.Sb(0,"td",21,22),c.Ec(2),c.Sb(3,"mat-menu",null,23),c.Cc(5,R,7,2,"ng-template",24),c.Rb(),c.Rb()),2&t){var n=e.$implicit,r=c.pc(4);c.jc("matMenuTriggerFor",r)("matMenuTriggerData",c.nc(3,k,n.id,n.name)),c.Bb(2),c.Gc("",n.name," ")}}function C(t,e){1&t&&(c.Sb(0,"th",20),c.Ec(1,"Mobile"),c.Rb())}function F(t,e){if(1&t){var n=c.Tb();c.Sb(0,"div",25),c.Zb("click",(function(t){return c.tc(n),t.stopPropagation()})),c.Sb(1,"mat-form-field",26),c.Sb(2,"mat-label"),c.Ec(3,"Mobile"),c.Rb(),c.Nb(4,"textarea",27),c.Rb(),c.Sb(5,"button",28),c.Zb("click",(function(){c.tc(n);var t=e.id;c.dc();var r=c.pc(1),a=c.dc(2);return a.updateSupplierMobile({id:t,value:a.mobileFormControl.value},r)})),c.Ec(6,"Update "),c.Rb(),c.Rb()}if(2&t){var r=e.data,a=c.dc(3);c.Bb(4),c.jc("value",r)("formControl",a.mobileFormControl)}}function I(t,e){if(1&t&&(c.Sb(0,"td",21,29),c.Ec(2),c.Sb(3,"mat-menu",null,30),c.Cc(5,F,7,2,"ng-template",31),c.Rb(),c.Rb()),2&t){var n=e.$implicit,r=c.pc(4);c.jc("matMenuTriggerFor",r)("matMenuTriggerData",c.nc(3,k,n.id,n.number)),c.Bb(2),c.Gc("",n.number," ")}}function B(t,e){1&t&&(c.Sb(0,"th",20),c.Ec(1,"Email"),c.Rb())}function j(t,e){if(1&t){var n=c.Tb();c.Sb(0,"div",25),c.Zb("click",(function(t){return c.tc(n),t.stopPropagation()})),c.Sb(1,"mat-form-field",26),c.Sb(2,"mat-label"),c.Ec(3,"Email"),c.Rb(),c.Nb(4,"textarea",27),c.Rb(),c.Sb(5,"button",28),c.Zb("click",(function(){c.tc(n);var t=e.id;c.dc();var r=c.pc(1),a=c.dc(2);return a.updateSupplierEmail({id:t,value:a.emailFormControl.value},r)})),c.Ec(6,"Update "),c.Rb(),c.Rb()}if(2&t){var r=e.data,a=c.dc(3);c.Bb(4),c.jc("value",r)("formControl",a.emailFormControl)}}function A(t,e){if(1&t&&(c.Sb(0,"td",21,32),c.Ec(2),c.Sb(3,"mat-menu",null,33),c.Cc(5,j,7,2,"ng-template",31),c.Rb(),c.Rb()),2&t){var n=e.$implicit,r=c.pc(4);c.jc("matMenuTriggerFor",r)("matMenuTriggerData",c.nc(3,k,n.id,n.email)),c.Bb(2),c.Gc("",n.email," ")}}function M(t,e){1&t&&(c.Sb(0,"th",20),c.Ec(1,"Address"),c.Rb())}function E(t,e){if(1&t){var n=c.Tb();c.Sb(0,"div",25),c.Zb("click",(function(t){return c.tc(n),t.stopPropagation()})),c.Sb(1,"mat-form-field",26),c.Sb(2,"mat-label"),c.Ec(3,"Address"),c.Rb(),c.Nb(4,"textarea",27),c.Rb(),c.Sb(5,"button",28),c.Zb("click",(function(){c.tc(n);var t=e.id;c.dc();var r=c.pc(1),a=c.dc(2);return a.updateSupplierAddress({id:t,value:a.addressFormControl.value},r)})),c.Ec(6,"Update "),c.Rb(),c.Rb()}if(2&t){var r=e.data,a=c.dc(3);c.Bb(4),c.jc("value",r)("formControl",a.addressFormControl)}}function N(t,e){if(1&t&&(c.Sb(0,"td",21,34),c.Ec(2),c.Sb(3,"mat-menu",null,35),c.Cc(5,E,7,2,"ng-template",31),c.Rb(),c.Rb()),2&t){var n=e.$implicit,r=c.pc(4);c.jc("matMenuTriggerFor",r)("matMenuTriggerData",c.nc(3,k,n.id,n.address)),c.Bb(2),c.Gc("",n.address," ")}}function T(t,e){1&t&&c.Nb(0,"th",20)}function D(t,e){if(1&t){var n=c.Tb();c.Sb(0,"td",36),c.Sb(1,"div",37),c.Sb(2,"button",38),c.Sb(3,"mat-icon"),c.Ec(4,"more_vert"),c.Rb(),c.Rb(),c.Sb(5,"mat-menu",null,39),c.Sb(7,"button",6),c.Zb("click",(function(){c.tc(n);var t=e.$implicit;return c.dc(2).deleteSupplier(t)})),c.Ec(8," Delete "),c.Rb(),c.Rb(),c.Rb(),c.Rb()}if(2&t){var r=c.pc(6);c.Bb(2),c.jc("matMenuTriggerFor",r)}}function x(t,e){1&t&&c.Nb(0,"tr",40)}function _(t,e){1&t&&c.Nb(0,"tr",41)}function P(t,e){if(1&t&&(c.Sb(0,"table",9),c.Qb(1,10),c.Cc(2,y,2,0,"th",11),c.Cc(3,w,6,6,"td",12),c.Pb(),c.Qb(4,13),c.Cc(5,C,2,0,"th",11),c.Cc(6,I,6,6,"td",12),c.Pb(),c.Qb(7,14),c.Cc(8,B,2,0,"th",11),c.Cc(9,A,6,6,"td",12),c.Pb(),c.Qb(10,15),c.Cc(11,M,2,0,"th",11),c.Cc(12,N,6,6,"td",12),c.Pb(),c.Qb(13,16),c.Cc(14,T,1,0,"th",11),c.Cc(15,D,9,1,"td",17),c.Pb(),c.Cc(16,x,1,0,"tr",18),c.Cc(17,_,1,0,"tr",19),c.Rb()),2&t){var n=c.dc();c.jc("dataSource",n.suppliersDatasource),c.Bb(16),c.jc("matHeaderRowDef",n.suppliersTableColums),c.Bb(1),c.jc("matRowDefColumns",n.suppliersTableColums)}}function L(t,e){1&t&&(c.Sb(0,"div"),c.Nb(1,"mat-progress-spinner",42),c.Rb()),2&t&&(c.Bb(1),c.jc("diameter",30))}function q(t,e){1&t&&c.Nb(0,"mat-progress-spinner",11)}function O(t,e){if(1&t&&(c.Sb(0,"p",12),c.Ec(1),c.Rb()),2&t){var n=c.dc();c.Bb(1),c.Fc(n.errorSupplierMessage)}}function U(t,e){1&t&&c.Nb(0,"mat-progress-spinner",13),2&t&&c.jc("diameter",20)}var G=function(){function t(t,e,n,r){this.stockState=t,this.formBuilder=e,this.dialog=n,this.snack=r,this.suppliersTableColums=["name","email","mobile","address","actions"],this.fetchSuppliersFlag=!1,this.nameFormControl=new o.f,this.descriptionFormControl=new o.f,this.addressFormControl=new o.f,this.emailFormControl=new o.f,this.mobileFormControl=new o.f}return t.prototype.ngOnInit=function(){this.getSuppliers()},t.prototype.searchSupplier=function(t){},t.prototype.getSuppliers=function(){var t=this;this.fetchSuppliersFlag=!0,this.stockState.getAllSupplier({size:100}).then((function(e){t.suppliersArray=JSON.parse(JSON.stringify(e)),t.suppliersDatasource=new a.o(t.suppliersArray),t.fetchSuppliersFlag=!1})).catch((function(e){t.fetchSuppliersFlag=!1}))},t.prototype.deleteSupplier=function(t){var e=this;this.dialog.open(Z,{data:t,disableClose:!0}).afterClosed().subscribe((function(n){n?(e.suppliersArray=e.suppliersArray.filter((function(e){return e.id!==t.id})),e.suppliersDatasource=new a.o(e.suppliersArray),e.snack.open("Supplier deleted","Ok",{duration:2e3})):e.snack.open("Supplier not deleted","Ok",{duration:2e3})}))},t.prototype.updateSupplierName=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="name",this.updateSupplier(t))},t.prototype.updateSupplier=function(t){var e=this;this.snack.open("Update in progress..","Ok"),this.stockState.updateSupplier(t).then((function(n){var r=e.suppliersArray.findIndex((function(t){return t.id===n.id}));if(e.suppliersArray=e.suppliersArray.filter((function(e){return e.id!==t.id})),-1!==r){var a=e.suppliersArray[r];a[t.field]=t.value,e.suppliersDatasource.data[r]=a}else console.warn("fails to update supplier table");e.snack.open("Supplier updated","Ok",{duration:3e3})})).catch((function(t){e.snack.open("Fail to update supplier","Ok",{duration:3e3})}))},t.prototype.openAddSupplierDialog=function(){var t=this;this.dialog.open(W,{closeOnNavigation:!0,hasBackdrop:!0}).afterClosed().subscribe((function(e){e&&(t.suppliersArray.push(e),t.suppliersDatasource.data=t.suppliersArray)}))},t.prototype.updateSupplierEmail=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="email",this.updateSupplier(t))},t.prototype.updateSupplierAddress=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="address",this.updateSupplier(t))},t.prototype.updateSupplierMobile=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="number",this.updateSupplier(t))},t.\u0275fac=function(e){return new(e||t)(c.Mb(i.a),c.Mb(o.e),c.Mb(r.b),c.Mb(u.a))},t.\u0275cmp=c.Gb({type:t,selectors:[["smartstock-suppliers"]],decls:15,vars:3,consts:[[1,"mat-elevation-z0"],[1,"d-flex","flex-row"],["color","primary","mat-flat-button","",1,"ft-button",3,"click"],[1,"toolbar-spacer"],["mat-icon-button","",3,"matMenuTriggerFor"],["menuSuppliers",""],["mat-menu-item","",3,"click"],["style","margin-top: 16px","class","my-input","mat-table","",3,"dataSource",4,"ngIf"],[4,"ngIf"],["mat-table","",1,"my-input",2,"margin-top","16px",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","editable","matRipple","","mat-cell","",3,"matMenuTriggerFor","matMenuTriggerData",4,"matCellDef"],["matColumnDef","mobile"],["matColumnDef","email"],["matColumnDef","address"],["matColumnDef","actions"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","table-data-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["matRipple","","mat-cell","",1,"editable",3,"matMenuTriggerFor","matMenuTriggerData"],["nameMenuTrigger","matMenuTrigger"],["nameMenu",""],["matMenuContent",""],[2,"padding","16px",3,"click"],["appearance","outline",1,"my-input"],["matInput","",3,"value","formControl"],["mat-button","",3,"click"],["mobileMenuTrigger","matMenuTrigger"],["mobileMenu",""],["style","padding: 16px","matMenuContent",""],["emailMenuTrigger","matMenuTrigger"],["emailMenu",""],["addressMenuTrigger","matMenuTrigger"],["addressMenu",""],["mat-cell",""],[1,"d-flex","justify-content-end","align-items-end"],["color","primary","mat-icon-button","",3,"matMenuTriggerFor"],["opts",""],["mat-header-row",""],["mat-row","",1,"table-data-row"],["matTooltip","fetch suppliers","mode","indeterminate","color","primary",3,"diameter"]],template:function(t,e){if(1&t&&(c.Sb(0,"mat-card",0),c.Sb(1,"mat-card-title",1),c.Sb(2,"button",2),c.Zb("click",(function(){return e.openAddSupplierDialog()})),c.Ec(3," Add Supplier "),c.Rb(),c.Nb(4,"span",3),c.Sb(5,"button",4),c.Sb(6,"mat-icon"),c.Ec(7,"more_vert"),c.Rb(),c.Rb(),c.Sb(8,"mat-menu",null,5),c.Sb(10,"button",6),c.Zb("click",(function(){return e.getSuppliers()})),c.Ec(11,"Reload Suppliers"),c.Rb(),c.Rb(),c.Rb(),c.Sb(12,"mat-card-content"),c.Cc(13,P,18,3,"table",7),c.Cc(14,L,2,1,"div",8),c.Rb(),c.Rb()),2&t){var n=c.pc(9);c.Bb(5),c.jc("matMenuTriggerFor",n),c.Bb(8),c.jc("ngIf",!e.fetchSuppliersFlag&&e.suppliersArray&&e.suppliersArray.length>0),c.Bb(1),c.jc("ngIf",e.fetchSuppliersFlag)}},directives:[s.a,s.h,l.a,p.d,b.a,p.e,p.b,s.c,d.n,a.n,a.c,a.i,a.b,a.k,a.m,a.h,a.a,f.s,p.a,m.c,m.f,g.b,o.c,o.o,o.g,a.j,a.l,h.a,v.a],styles:[""]}),t}(),Z=function(){function t(t,e,n){this.dialogRef=t,this.stockDatabase=e,this.data=n,this.deleteProgress=!1}return t.prototype.deleteSupplier=function(t){var e=this;this.errorSupplierMessage=void 0,this.deleteProgress=!0,this.stockDatabase.deleteSupplier(t.id).then((function(n){e.dialogRef.close(t),e.deleteProgress=!1})).catch((function(t){e.errorSupplierMessage="Fails to delete supplier, try again",e.deleteProgress=!1}))},t.prototype.cancel=function(){this.dialogRef.close(null)},t.\u0275fac=function(e){return new(e||t)(c.Mb(r.g),c.Mb(i.a),c.Mb(r.a))},t.\u0275cmp=c.Gb({type:t,selectors:[["smartstock-dialog-delete"]],decls:16,vars:5,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"text-center"],[1,"d-flex","justify-content-center"],[1,"align-self-center",2,"margin","8px"],["color","primary","mat-button","",3,"disabled","click"],["matTooltip","Delete in progress...","style","display: inline-block","mode","indeterminate","diameter","15","color","accent",4,"ngIf"],[1,"alert-secondary",2,"margin","8px"],["mat-dialog-close","","color","primary","mat-button","",3,"disabled","click"],["class","bg-danger",4,"ngIf"],["matTooltip","Delete in progress...","mode","indeterminate","diameter","15","color","accent",2,"display","inline-block"],[1,"bg-danger"]],template:function(t,e){1&t&&(c.Sb(0,"div",0),c.Sb(1,"div",1),c.Sb(2,"div",2),c.Sb(3,"mat-panel-title",3),c.Ec(4," Your about to delete : "),c.Sb(5,"b"),c.Ec(6),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",4),c.Sb(8,"div",5),c.Sb(9,"button",6),c.Zb("click",(function(){return e.deleteSupplier(e.data)})),c.Ec(10," Delete "),c.Cc(11,q,1,0,"mat-progress-spinner",7),c.Rb(),c.Rb(),c.Sb(12,"div",8),c.Sb(13,"button",9),c.Zb("click",(function(){return e.cancel()})),c.Ec(14,"Cancel"),c.Rb(),c.Rb(),c.Rb(),c.Cc(15,O,2,1,"p",10),c.Rb()),2&t&&(c.Bb(6),c.Fc(" "+e.data.name),c.Bb(3),c.jc("disabled",e.deleteProgress),c.Bb(2),c.jc("ngIf",e.deleteProgress),c.Bb(2),c.jc("disabled",e.deleteProgress),c.Bb(2),c.jc("ngIf",e.errorSupplierMessage))},directives:[S.e,l.a,d.n,r.d,h.a,v.a],encapsulation:2}),t}(),W=function(){function t(t,e,n,r){this.formBuilder=t,this.snack=e,this.stockDatabase=n,this.dialogRef=r,this.createSupplierProgress=!1}return t.prototype.ngOnInit=function(){this.initiateForm()},t.prototype.initiateForm=function(){this.newSupplierForm=this.formBuilder.group({name:["",[o.v.nullValidator,o.v.required]],email:[""],number:[""],address:[""]})},t.prototype.createSupplier=function(){var t=this;this.newSupplierForm.valid?(this.createSupplierProgress=!0,this.stockDatabase.addSupplier(this.newSupplierForm.value).then((function(e){t.createSupplierProgress=!1,e.name=t.newSupplierForm.value.name,e.email=t.newSupplierForm.value.email,e.mobile=t.newSupplierForm.value.mobile,e.address=t.newSupplierForm.value.address,t.dialogRef.close(e),t.snack.open("Supplier created","Ok",{duration:3e3})})).catch((function(e){t.createSupplierProgress=!1,t.snack.open("Supplier not created, try again","Ok",{duration:3e3})}))):this.snack.open("Please fll all details","Ok",{duration:3e3})},t.prototype.cancel=function(t){t.preventDefault(),this.dialogRef.close(null)},t.\u0275fac=function(e){return new(e||t)(c.Mb(o.e),c.Mb(u.a),c.Mb(i.a),c.Mb(r.g))},t.\u0275cmp=c.Gb({type:t,selectors:[["smartstock-new-supplier"]],decls:35,vars:3,consts:[[2,"min-width","300px"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"d-flex","flex-column",3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","type","text","formControlName","name","required",""],["matInput","","formControlName","email"],["matInput","","formControlName","number"],["matInput","","formControlName","address","rows","2"],["color","primary","mat-flat-button","",1,"ft-button",3,"disabled"],["style","display: inline-block","mode","indeterminate",3,"diameter",4,"ngIf"],["mat-dialog-close","","mat-button","","color","warn",1,"btn-block"],[2,"margin-bottom","8px"],["mode","indeterminate",2,"display","inline-block",3,"diameter"]],template:function(t,e){1&t&&(c.Sb(0,"div",0),c.Sb(1,"div",1),c.Ec(2,"Create Supplier"),c.Rb(),c.Sb(3,"div",2),c.Sb(4,"form",3),c.Zb("ngSubmit",(function(){return e.createSupplier()})),c.Sb(5,"mat-form-field",4),c.Sb(6,"mat-label"),c.Ec(7,"Name"),c.Rb(),c.Nb(8,"input",5),c.Sb(9,"mat-error"),c.Ec(10,"Name required"),c.Rb(),c.Rb(),c.Sb(11,"mat-form-field",4),c.Sb(12,"mat-label"),c.Ec(13,"Email"),c.Rb(),c.Nb(14,"input",6),c.Sb(15,"mat-error"),c.Ec(16,"Email required"),c.Rb(),c.Rb(),c.Sb(17,"mat-form-field",4),c.Sb(18,"mat-label"),c.Ec(19,"Mobile"),c.Rb(),c.Nb(20,"input",7),c.Sb(21,"mat-error"),c.Ec(22,"Mobile required"),c.Rb(),c.Rb(),c.Sb(23,"mat-form-field",4),c.Sb(24,"mat-label"),c.Ec(25,"Address"),c.Rb(),c.Nb(26,"textarea",8),c.Sb(27,"mat-error"),c.Ec(28,"Address required"),c.Rb(),c.Rb(),c.Sb(29,"button",9),c.Ec(30," Save "),c.Cc(31,U,1,1,"mat-progress-spinner",10),c.Rb(),c.Sb(32,"button",11),c.Ec(33,"Close"),c.Rb(),c.Nb(34,"span",12),c.Rb(),c.Rb(),c.Rb()),2&t&&(c.Bb(4),c.jc("formGroup",e.newSupplierForm),c.Bb(25),c.jc("disabled",e.createSupplierProgress),c.Bb(2),c.jc("ngIf",e.createSupplierProgress))},directives:[r.h,r.e,o.w,o.p,o.i,m.c,m.f,g.b,o.c,o.o,o.h,o.u,m.b,l.a,d.n,r.d,h.a],encapsulation:2}),t}()},doN5:function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var r=n("fXoL"),a=n("/t3+"),o=n("ofXK"),i=n("bTqV"),c=n("tyNb"),u=n("NFeN");function s(t,e){if(1&t&&(r.Sb(0,"button",12),r.Sb(1,"mat-icon",13),r.Ec(2,"dashboard"),r.Rb(),r.Rb()),2&t){var n=r.dc();r.Bb(1),r.kc("color",n.activeNav("dashboard")?"primary":"")}}function l(t,e){1&t&&(r.Sb(0,"button",14),r.Sb(1,"mat-icon"),r.Ec(2,"dashboard"),r.Rb(),r.Rb())}function p(t,e){if(1&t&&(r.Sb(0,"button",15),r.Sb(1,"mat-icon",13),r.Ec(2,"shop"),r.Rb(),r.Rb()),2&t){var n=r.dc();r.Bb(1),r.kc("color",n.activeNav("sale")?"primary":"")}}function b(t,e){1&t&&(r.Sb(0,"button",16),r.Sb(1,"mat-icon"),r.Ec(2,"shop"),r.Rb(),r.Rb())}function d(t,e){if(1&t&&(r.Sb(0,"button",17),r.Sb(1,"mat-icon",13),r.Ec(2,"receipt"),r.Rb(),r.Rb()),2&t){var n=r.dc();r.Bb(1),r.kc("color",n.activeNav("purchase")?"primary":"")}}function f(t,e){1&t&&(r.Sb(0,"button",18),r.Sb(1,"mat-icon"),r.Ec(2,"receipt"),r.Rb(),r.Rb())}function m(t,e){if(1&t&&(r.Sb(0,"button",19),r.Sb(1,"mat-icon",13),r.Ec(2,"store"),r.Rb(),r.Rb()),2&t){var n=r.dc();r.Bb(1),r.kc("color",n.activeNav("stock")?"primary":"")}}function g(t,e){1&t&&(r.Sb(0,"button",20),r.Sb(1,"mat-icon"),r.Ec(2,"store"),r.Rb(),r.Rb())}function h(t,e){if(1&t&&(r.Sb(0,"button",21),r.Sb(1,"mat-icon",13),r.Ec(2,"settings"),r.Rb(),r.Rb()),2&t){var n=r.dc();r.Bb(1),r.kc("color",n.activeNav("settings")?"primary":"")}}function v(t,e){1&t&&(r.Sb(0,"button",22),r.Sb(1,"mat-icon"),r.Ec(2,"settings"),r.Rb(),r.Rb())}var S=function(){function t(){}return t.prototype.ngOnInit=function(){},t.prototype.activeNav=function(t){return new URL(location.href).pathname.startsWith("/"+t)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["smartstock-bottom-bar"]],decls:16,vars:10,consts:[[1,"fixed-bottom","bottom-smartstock-bar"],[1,"flex-grow-1","d-flex","justify-content-center","align-items-center","flex-column"],["mat-icon-button","","mat-flat-button","","routerLink","/dashboard",4,"ngIf"],["mat-icon-button","","routerLink","/dashboard",4,"ngIf"],["mat-icon-button","","mat-flat-button","","routerLink","/sale",4,"ngIf"],["mat-icon-button","","routerLink","/sale",4,"ngIf"],["mat-icon-button","","mat-flat-button","","routerLink","/purchase",4,"ngIf"],["mat-icon-button","","routerLink","/purchase",4,"ngIf"],["mat-icon-button","","mat-flat-button","","routerLink","/stock",4,"ngIf"],["mat-icon-button","","routerLink","/stock",4,"ngIf"],["mat-icon-button","","mat-flat-button","","routerLink","/account",4,"ngIf"],["mat-icon-button","","routerLink","/account",4,"ngIf"],["mat-icon-button","","mat-flat-button","","routerLink","/dashboard"],[3,"color"],["mat-icon-button","","routerLink","/dashboard"],["mat-icon-button","","mat-flat-button","","routerLink","/sale"],["mat-icon-button","","routerLink","/sale"],["mat-icon-button","","mat-flat-button","","routerLink","/purchase"],["mat-icon-button","","routerLink","/purchase"],["mat-icon-button","","mat-flat-button","","routerLink","/stock"],["mat-icon-button","","routerLink","/stock"],["mat-icon-button","","mat-flat-button","","routerLink","/account"],["mat-icon-button","","routerLink","/account"]],template:function(t,e){1&t&&(r.Sb(0,"mat-toolbar",0),r.Sb(1,"div",1),r.Cc(2,s,3,1,"button",2),r.Cc(3,l,3,0,"button",3),r.Rb(),r.Sb(4,"div",1),r.Cc(5,p,3,1,"button",4),r.Cc(6,b,3,0,"button",5),r.Rb(),r.Sb(7,"div",1),r.Cc(8,d,3,1,"button",6),r.Cc(9,f,3,0,"button",7),r.Rb(),r.Sb(10,"div",1),r.Cc(11,m,3,1,"button",8),r.Cc(12,g,3,0,"button",9),r.Rb(),r.Sb(13,"div",1),r.Cc(14,h,3,1,"button",10),r.Cc(15,v,3,0,"button",11),r.Rb(),r.Rb()),2&t&&(r.Bb(2),r.jc("ngIf",e.activeNav("dashboard")),r.Bb(1),r.jc("ngIf",!e.activeNav("dashboard")),r.Bb(2),r.jc("ngIf",e.activeNav("sale")),r.Bb(1),r.jc("ngIf",!e.activeNav("sale")),r.Bb(2),r.jc("ngIf",e.activeNav("purchase")),r.Bb(1),r.jc("ngIf",!e.activeNav("purchase")),r.Bb(2),r.jc("ngIf",e.activeNav("stock")),r.Bb(1),r.jc("ngIf",!e.activeNav("stock")),r.Bb(2),r.jc("ngIf",e.activeNav("settings")),r.Bb(1),r.jc("ngIf",!e.activeNav("settings")))},directives:[a.a,o.n,i.a,c.c,u.a],styles:["span[_ngcontent-%COMP%]{font-weight:lighter;font-size:11px}.bottom-smartstock-bar[_ngcontent-%COMP%]{background:#fff;box-shadow:0 -1px 7px rgba(0,0,0,.35)}"]}),t}()},tajD:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n("doIf"),a=n("VcMg"),o=n("4vfi"),i=n("nBS7"),c=n("fXoL"),u=n("tk/3"),s=function(t,e,n,r){return new(n||(n=Promise))((function(a,o){function i(t){try{u(r.next(t))}catch(e){o(e)}}function c(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}u((r=r.apply(t,e||[])).next())}))},l=function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(c){o=[6,c],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},p=function(){function t(t,e,n,r){this._httpClient=t,this._user=e,this._storage=n,this._settings=r}return t.prototype.exportToExcel=function(){return s(this,void 0,void 0,(function(){var t,e,n;return l(this,(function(r){switch(r.label){case 0:return[4,this._user.currentUser()];case 1:return t=r.sent(),[4,this._settings.getCustomerProjectId()];case 2:return e=r.sent(),n=encodeURIComponent(t.email),[2,o.BFast.functions(e).request(this._settings.ssmFunctionsURL+"/functions/stocks/export/"+e+"/"+n).get({})]}}))}))},t.prototype.addAllCategory=function(t,e){},t.prototype.importStocks=function(t){return s(this,void 0,void 0,(function(){var e;return l(this,(function(n){switch(n.label){case 0:return[4,this._storage.getActiveShop()];case 1:return e=n.sent(),[2,o.BFast.functions(e.projectId).request(this._settings.ssmFunctionsURL+"/functions/stocks/import/"+e.projectId).post(t,{headers:this._settings.ssmFunctionsHeader})]}}))}))},t.prototype.addAllSupplier=function(t,e){},t.prototype.addCategory=function(t){return s(this,void 0,void 0,(function(){var e;return l(this,(function(n){switch(n.label){case 0:return[4,this._storage.getActiveShop()];case 1:return e=n.sent(),[2,o.BFast.database(e.projectId).collection("categories").save(t)]}}))}))},t.prototype.addUnit=function(t){return s(this,void 0,void 0,(function(){var e;return l(this,(function(n){switch(n.label){case 0:return[4,this._storage.getActiveShop()];case 1:return e=n.sent(),[2,o.BFast.database(e.projectId).collection("units").save(t)]}}))}))},t.prototype.getAllUnit=function(t){return s(this,void 0,void 0,(function(){var t,e;return l(this,(function(n){switch(n.label){case 0:return[4,this._storage.getActiveShop()];case 1:return t=n.sent(),[4,o.BFast.database(t.projectId).collection("units").getAll()];case 2:return(e=n.sent()).sort((function(t,e){return new Date(e.updatedAt).getTime()-new Date(t.updatedAt).getTime()})),[2,e]}}))}))},t.prototype.addStock=function(t,e){return s(this,void 0,void 0,(function(){var n,r,a,i,c,u;return l(this,(function(s){switch(s.label){case 0:return[4,this._storage.getActiveShop()];case 1:return n=s.sent(),t.image&&t.image instanceof File?(r=t,[4,o.BFast.storage(n.projectId).save(t.image,e)]):[3,3];case 2:r.image=s.sent(),s.label=3;case 3:if(!(t.downloads&&t.downloads.length>0))return[3,7];a=0,i=t.downloads,s.label=4;case 4:return a<i.length?(c=i[a])&&c.url instanceof File?(u=c,[4,o.BFast.storage(n.projectId).save(c.url,e)]):[3,6]:[3,7];case 5:u.url=s.sent(),s.label=6;case 6:return a++,[3,4];case 7:return[2,o.BFast.database(n.projectId).collection("stocks").save(t)]}}))}))},t.prototype.addSupplier=function(t){return s(this,void 0,void 0,(function(){var e;return l(this,(function(n){switch(n.label){case 0:return[4,this._storage.getActiveShop()];case 1:return e=n.sent(),[2,o.BFast.database(e.projectId).collection("suppliers").save(t)]}}))}))},t.prototype.deleteAllCategory=function(t,e){},t.prototype.deleteAllStock=function(t,e){},t.prototype.deleteAllSupplier=function(t,e){},t.prototype.deleteCategory=function(t){return s(this,void 0,void 0,(function(){var e;return l(this,(function(n){switch(n.label){case 0:return[4,this._storage.getActiveShop()];case 1:return e=n.sent(),[2,o.BFast.database(e.projectId).collection("categories").query().byId(t.id).delete()]}}))}))},t.prototype.deleteStock=function(t){return s(this,void 0,void 0,(function(){var e;return l(this,(function(n){switch(n.label){case 0:return[4,this._storage.getActiveShop()];case 1:return e=n.sent(),[2,o.BFast.database(e.projectId).collection("stocks").query().byId(t._id?t._id:t.id).delete()]}}))}))},t.prototype.deleteSupplier=function(t){return s(this,void 0,void 0,(function(){var e;return l(this,(function(n){switch(n.label){case 0:return[4,this._storage.getActiveShop()];case 1:return e=n.sent(),[2,o.BFast.database(e.projectId).collection("suppliers").query().byId(t).delete()]}}))}))},t.prototype.getAllCategory=function(t){return s(this,void 0,void 0,(function(){var t;return l(this,(function(e){switch(e.label){case 0:return[4,this._storage.getActiveShop()];case 1:return t=e.sent(),[2,o.BFast.database(t.projectId).collection("categories").getAll(null,{cacheEnable:!0,dtl:7,freshDataCallback:function(t){}})]}}))}))},t.prototype.getAllStock=function(){return s(this,void 0,void 0,(function(){var t,e;return l(this,(function(n){switch(n.label){case 0:return[4,this._storage.getActiveShop()];case 1:return t=n.sent(),[4,o.BFast.database(t.projectId).collection("stocks").getAll(void 0,{cacheEnable:!1,dtl:0})];case 2:return e=n.sent(),[4,this._storage.saveStocks(e)];case 3:return n.sent(),[2,e]}}))}))},t.prototype.getAllSupplier=function(t){return s(this,void 0,void 0,(function(){var t,e;return l(this,(function(n){switch(n.label){case 0:return[4,this._storage.getActiveShop()];case 1:return t=n.sent(),[4,o.BFast.database(t.projectId).collection("suppliers").getAll()];case 2:return(e=n.sent()).sort((function(t,e){return new Date(e.updatedAt).getTime()-new Date(t.updatedAt).getTime()})),[2,e]}}))}))},t.prototype.getCategory=function(t,e){},t.prototype.getStock=function(t,e){return s(this,void 0,void 0,(function(){var e;return l(this,(function(n){switch(n.label){case 0:return[4,this._storage.getActiveShop()];case 1:return e=n.sent(),[2,o.BFast.database(e.projectId).collection("stocks").get(t)]}}))}))},t.prototype.getSupplier=function(t,e){},t.prototype.updateAllCategory=function(t,e){},t.prototype.updateAllStock=function(t,e){},t.prototype.updateAllSupplier=function(t){},t.prototype.updateCategory=function(t){return s(this,void 0,void 0,(function(){var e,n,r,a;return l(this,(function(i){switch(i.label){case 0:return[4,this._storage.getActiveShop()];case 1:return e=i.sent(),n=t.id,(r={})[t.field]=t.value,delete t.id,[4,o.BFast.database(e.projectId).collection("categories").query().byId(n).updateBuilder().update(r)];case 2:return(a=i.sent()).id=n,[2,a]}}))}))},t.prototype.updateCategoryMobile=function(t,e){return s(this,void 0,void 0,(function(){var n;return l(this,(function(r){switch(r.label){case 0:return[4,this._storage.getActiveShop()];case 1:return n=r.sent(),[2,o.BFast.database(n.projectId).collection("categories").query().byId(e).updateBuilder().doc(t).update()]}}))}))},t.prototype.updateStock=function(t,e){return s(this,void 0,void 0,(function(){var n,r,a,i,c,u,s;return l(this,(function(l){switch(l.label){case 0:return[4,this._storage.getActiveShop()];case 1:return n=l.sent(),r=t._id?t._id:t.id,delete t.id,t.image&&!t.image.toString().startsWith("http")&&t.image instanceof File?(a=t,[4,o.BFast.storage(n.projectId).save(t.image,e)]):[3,3];case 2:a.image=l.sent(),l.label=3;case 3:if(!(t.downloads&&t.downloads.length>0))return[3,7];i=0,c=t.downloads,l.label=4;case 4:return i<c.length?(u=c[i])&&u.url instanceof File?(s=u,[4,o.BFast.storage(n.projectId).save(u.url,e)]):[3,6]:[3,7];case 5:s.url=l.sent(),l.label=6;case 6:return i++,[3,4];case 7:return[2,o.BFast.database(n.projectId).collection("stocks").query().byId(r.trim()).updateBuilder().doc(t).update()]}}))}))},t.prototype.updateSupplier=function(t){return s(this,void 0,void 0,(function(){var e,n,r;return l(this,(function(a){switch(a.label){case 0:return[4,this._storage.getActiveShop()];case 1:return e=a.sent(),n=t.id,delete t.id,[4,o.BFast.database(e.projectId).collection("suppliers").query().byId(n).updateBuilder().set(t.field,t.value).update()];case 2:return(r=a.sent()).id=n,[2,r]}}))}))},t.prototype.updateUnit=function(t){return s(this,void 0,void 0,(function(){var e,n,r;return l(this,(function(a){switch(a.label){case 0:return[4,this._storage.getActiveShop()];case 1:return e=a.sent(),n=t.id,delete t.id,[4,o.BFast.database(e.projectId).collection("units").query().byId(n).updateBuilder().set(t.field,t.value).update()];case 2:return(r=a.sent()).id=n,[2,r]}}))}))},t.prototype.deleteUnit=function(t){return s(this,void 0,void 0,(function(){var e;return l(this,(function(n){switch(n.label){case 0:return[4,this._storage.getActiveShop()];case 1:return e=n.sent(),[2,o.BFast.database(e.projectId).collection("units").query().byId(t.id).delete()]}}))}))},t.\u0275fac=function(e){return new(e||t)(c.Wb(u.a),c.Wb(r.a),c.Wb(i.a),c.Wb(a.a))},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}]);