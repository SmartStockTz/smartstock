(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{OPgv:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("fXoL"),o=n("tyNb"),i=n("Wp6s"),a=n("ofXK"),s=n("NFeN"),c=n("Qu3c"),l=n("bTqV"),u=n("kmnG");function b(t,e){1&t&&r.Nb(0,"hr",8)}function p(t,e){if(1&t){var n=r.Tb();r.Sb(0,"mat-card-actions",9),r.Nb(1,"span",10),r.Sb(2,"button",11),r.Zb("click",(function(){return r.tc(n),r.dc().goTo()})),r.Ec(3," EXPLORE REPORT "),r.Sb(4,"mat-icon",12),r.Ec(5,"arrow_forward"),r.Rb(),r.Rb(),r.Rb()}}var m=function(t){return{height:t}},d=function(){function t(t){this.router=t,this.title="",this.height=300,this.description=""}return t.prototype.ngOnInit=function(){},t.prototype.goTo=function(){this.reportLink&&this.router.navigateByUrl(this.reportLink).catch(console.log)},t.\u0275fac=function(e){return new(e||t)(r.Mb(o.b))},t.\u0275cmp=r.Gb({type:t,selectors:[["smartstock-dash-card"]],inputs:{title:"title",height:"height",description:"description",reportLink:"reportLink",content:"content"},decls:11,vars:8,consts:[[1,"d-flex","flex-column",3,"ngStyle"],[2,"margin","0"],[2,"margin-left","8px"],[3,"matTooltip"],[1,"flex-grow-1"],[3,"ngTemplateOutlet"],["style","width: 100%; margin: 0; padding: 0",4,"ngIf"],["class","d-flex flex-row",4,"ngIf"],[2,"width","100%","margin","0","padding","0"],[1,"d-flex","flex-row"],[2,"flex","1 1 auto"],["color","primary","mat-button","",3,"click"],["matSuffix",""]],template:function(t,e){1&t&&(r.Sb(0,"mat-card",0),r.Sb(1,"mat-card-header",1),r.Sb(2,"span"),r.Ec(3),r.Rb(),r.Nb(4,"span",2),r.Sb(5,"mat-icon",3),r.Ec(6,"info_outline"),r.Rb(),r.Rb(),r.Sb(7,"mat-card-content",4),r.Ob(8,5),r.Rb(),r.Cc(9,b,1,0,"hr",6),r.Cc(10,p,6,0,"mat-card-actions",7),r.Rb()),2&t&&(r.jc("ngStyle",r.mc(6,m,e.height+"px")),r.Bb(3),r.Fc(e.title),r.Bb(2),r.kc("matTooltip",e.description),r.Bb(3),r.jc("ngTemplateOutlet",e.content),r.Bb(1),r.jc("ngIf",e.reportLink),r.Bb(1),r.jc("ngIf",e.reportLink))},directives:[i.a,a.o,i.d,s.a,c.a,i.c,a.s,a.n,i.b,l.a,u.h],styles:[""]}),t}()},ZBrE:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("fXoL"),o=n("ofXK"),i=n("Xa2L");function a(t,e){if(1&t&&(r.Sb(0,"div",2),r.Nb(1,"img",3),r.Sb(2,"span"),r.Ec(3,"Data is not ready yet"),r.Rb(),r.Rb()),2&t){var n=r.dc();r.Bb(1),r.kc("width",n.width),r.kc("height",n.height)}}function s(t,e){1&t&&(r.Sb(0,"div",4),r.Nb(1,"mat-progress-spinner",5),r.Rb()),2&t&&(r.Bb(1),r.jc("diameter",30))}var c=function(){function t(){this.width=200,this.height=200,this.isLoading=!1}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["smartstock-data-not-ready"]],inputs:{width:"width",height:"height",isLoading:"isLoading"},decls:2,vars:2,consts:[["style","margin-top: 10px; margin-bottom: 10px","class","d-flex flex-column justify-content-center align-items-center",4,"ngIf"],["style","width: 100%; height: 100%; display: flex; justify-content: center; align-items: center",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center",2,"margin-top","10px","margin-bottom","10px"],["alt","no data","src","../../../../assets/img/data.svg",3,"width","height"],[2,"width","100%","height","100%","display","flex","justify-content","center","align-items","center"],["mode","indeterminate",3,"diameter"]],template:function(t,e){1&t&&(r.Cc(0,a,4,2,"div",0),r.Cc(1,s,2,1,"div",1)),2&t&&(r.jc("ngIf",!e.isLoading),r.Bb(1),r.jc("ngIf",e.isLoading))},directives:[o.n,i.a],styles:[""]}),t}()},lKKO:function(t,e,n){"use strict";n.r(e),n.d(e,"AccountModule",(function(){return Ve}));var r,o=n("ofXK"),i=n("soNi"),a=n("VcMg"),s=n("AytR"),c=n("wROQ"),l=n("l8oG"),u=n("fXoL"),b=n("3Pt+"),p=n("dNgK"),m=n("XhcP"),d=n("veC1"),f=n("eQIs"),g=n("Xa2L"),h=n("Qu3c"),v=n("Wp6s"),y=n("1jcm"),S=n("kmnG"),R=n("qFsG"),w=n("bTqV"),P=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function k(t,e){1&t&&u.Nb(0,"mat-progress-spinner",7),2&t&&u.jc("diameter",20)("matTooltip","Fetch settings")}function C(t,e){1&t&&u.Nb(0,"mat-progress-spinner",22),2&t&&u.jc("diameter",20)}function _(t,e){if(1&t){var n=u.Tb();u.Sb(0,"form",8),u.Sb(1,"h4"),u.Ec(2,"Sales"),u.Rb(),u.Sb(3,"mat-card",9),u.Sb(4,"mat-card-content"),u.Sb(5,"div",10),u.Sb(6,"mat-card-subtitle"),u.Ec(7,"Allow Retail"),u.Rb(),u.Nb(8,"span",11),u.Nb(9,"mat-slide-toggle",12),u.Rb(),u.Nb(10,"div",13),u.Sb(11,"div",10),u.Sb(12,"mat-card-subtitle"),u.Ec(13,"Allow Wholesale"),u.Rb(),u.Nb(14,"span",11),u.Nb(15,"mat-slide-toggle",14),u.Rb(),u.Rb(),u.Rb(),u.Nb(16,"div",13),u.Sb(17,"h4"),u.Ec(18,"Printer"),u.Rb(),u.Sb(19,"mat-card",9),u.Sb(20,"mat-card-content"),u.Sb(21,"div",10),u.Sb(22,"mat-card-subtitle"),u.Ec(23,"Allow to sale without printer"),u.Rb(),u.Nb(24,"span",11),u.Nb(25,"mat-slide-toggle",15),u.Rb(),u.Sb(26,"div",16),u.Sb(27,"mat-form-field",17),u.Sb(28,"mat-label"),u.Ec(29,"Header"),u.Rb(),u.Sb(30,"textarea",18),u.Ec(31,"                "),u.Rb(),u.Rb(),u.Rb(),u.Sb(32,"div",16),u.Sb(33,"mat-form-field",17),u.Sb(34,"mat-label"),u.Ec(35,"Footer"),u.Rb(),u.Sb(36,"textarea",19),u.Ec(37,"                "),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Sb(38,"button",20),u.Zb("click",(function(){return u.tc(n),u.dc().saveSettings()})),u.Ec(39,"Update "),u.Cc(40,C,1,1,"mat-progress-spinner",21),u.Rb(),u.Rb()}if(2&t){var r=u.dc();u.jc("formGroup",r.settingsForm),u.Bb(30),u.jc("rows",6),u.Bb(6),u.jc("rows",6),u.Bb(2),u.jc("disabled",r.saveSettingProgress||!r.settingsForm.dirty),u.Bb(2),u.jc("ngIf",r.saveSettingProgress)}}var x=function(t){function e(e,n,r,o){var i=t.call(this)||this;return i.formBuilder=e,i.snack=n,i.eventApi=r,i.settings=o,i.getSettingsProgress=!1,i.saveSettingProgress=!1,i.isMobile=s.a.android,i}return P(e,t),e.prototype.ngOnInit=function(){this._getSettings()},e.prototype._getSettings=function(){var t=this;this.getSettingsProgress=!0,this.settings.getSettings().then((function(e){t._initiateSettingsForm(e),t.getSettingsProgress=!1})).catch((function(e){console.log(e),t._initiateSettingsForm({saleWithoutPrinter:!0,printerHeader:"",printerFooter:"",allowRetail:!0,allowWholesale:!0}),t.getSettingsProgress=!1}))},e.prototype._initiateSettingsForm=function(t){this.settingsForm=this.formBuilder.group({saleWithoutPrinter:[t.saleWithoutPrinter],printerHeader:[t.printerHeader],printerFooter:[t.printerFooter],allowRetail:[t.allowRetail],allowWholesale:[t.allowWholesale]})},e.prototype.saveSettings=function(){var t=this;this.saveSettingProgress=!0,this.settings.saveSettings(this.settingsForm.value).then((function(e){t.snack.open("Settings saved","Ok",{duration:3e3}),t.saveSettingProgress=!1,t.eventApi.broadcast(l.a.SETTINGS_UPDATED)})).catch((function(e){console.warn(e),t.snack.open("Fails to save settings, try again later","Ok",{duration:3e3}),t.saveSettingProgress=!1}))},e.\u0275fac=function(t){return new(t||e)(u.Mb(b.e),u.Mb(p.a),u.Mb(i.a),u.Mb(a.a))},e.\u0275cmp=u.Gb({type:e,selectors:[["smartstock-setting"]],features:[u.yb],decls:9,vars:10,consts:[[1,"match-parent"],[1,"match-parent-side",3,"fixedInViewport","mode","opened"],["sidenav",""],[3,"heading","sidenav","hasBackRoute","backLink","showProgress"],[1,"container","d-flex","flex-column","justify-content-center","align-items-center","stock-new-wrapper"],["mode","indeterminate","color","primary",3,"diameter","matTooltip",4,"ngIf"],["style","margin-top: 16px","class","col-xl-10 col-lg-10 col-md-12 col-sm-12 col-12",3,"formGroup",4,"ngIf"],["mode","indeterminate","color","primary",3,"diameter","matTooltip"],[1,"col-xl-10","col-lg-10","col-md-12","col-sm-12","col-12",2,"margin-top","16px",3,"formGroup"],[1,"mat-elevation-z0"],[1,"d-flex","flex-row","align-items-center"],[1,"toolbar-spacer"],["formControlName","allowRetail","matTooltip","If you disable you wont sale without printer","color","primary","labelPosition","after"],[2,"height","20px"],["formControlName","allowWholesale","matTooltip","If you disable you wont sale without printer","color","primary","labelPosition","after"],["formControlName","saleWithoutPrinter","matTooltip","If you disable you wont sale without printer","color","primary","labelPosition","after"],[2,"margin-top","16px"],["appearance","fill"],["matTooltip","This content will be shown on top of a receipt when printed","formControlName","printerHeader","placeholder","Type here...","matInput","","type","text",3,"rows"],["matTooltip","This content will be shown on bottom of a receipt when printed","formControlName","printerFooter","placeholder","Type here...","matInput","","type","text",3,"rows"],["color","primary","mat-flat-button","",1,"btn-block","ft-button",2,"margin-top","16px","margin-bottom","16px",3,"disabled","click"],["style","display: inline-block","color","primary","mode","indeterminate",3,"diameter",4,"ngIf"],["color","primary","mode","indeterminate",2,"display","inline-block",3,"diameter"]],template:function(t,e){if(1&t&&(u.Sb(0,"mat-sidenav-container",0),u.Sb(1,"mat-sidenav",1,2),u.Nb(3,"smartstock-admin-drawer"),u.Rb(),u.Sb(4,"mat-sidenav-content"),u.Nb(5,"smartstock-toolbar",3),u.Sb(6,"div",4),u.Cc(7,k,1,2,"mat-progress-spinner",5),u.Cc(8,_,41,5,"form",6),u.Rb(),u.Rb(),u.Rb()),2&t){var n=u.pc(2);u.Bb(1),u.jc("fixedInViewport",!0)("mode",e.enoughWidth()?"side":"over")("opened",!e.isMobile),u.Bb(4),u.jc("heading","General")("sidenav",n)("hasBackRoute",e.isMobile)("backLink","/account")("showProgress",!1),u.Bb(2),u.jc("ngIf",e.getSettingsProgress),u.Bb(1),u.jc("ngIf",!e.getSettingsProgress&&e.settingsForm)}},directives:[m.b,m.a,d.a,m.c,f.a,o.n,g.a,h.a,b.w,b.p,b.i,v.a,v.c,v.g,y.a,b.o,b.h,S.c,S.f,b.c,R.b,w.a],styles:[".mat-card-subtitle[_ngcontent-%COMP%]{margin-bottom:0}.mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e}(c.a),E=n("FKr1"),F=n("0IaG"),B=n("f0Cb"),M=n("7EHt"),I=n("NFeN"),O=n("STbY"),N=n("QibW"),j=n("d3UM"),U=n("+0xr"),G=n("wZkO"),q=n("doIf");function A(t,e){1&t&&u.Nb(0,"mat-progress-spinner",17),2&t&&u.jc("diameter",30)}function T(t,e){if(1&t){var n=u.Tb();u.Sb(0,"form",5),u.Zb("ngSubmit",(function(){return u.tc(n),u.dc().updatePersonalInformation()})),u.Sb(1,"div",6),u.Sb(2,"div",7),u.Sb(3,"mat-form-field",8),u.Sb(4,"mat-label"),u.Ec(5,"Username"),u.Rb(),u.Nb(6,"input",9),u.Rb(),u.Sb(7,"mat-form-field",10),u.Sb(8,"mat-label"),u.Ec(9,"First Name"),u.Rb(),u.Nb(10,"input",11),u.Sb(11,"mat-error"),u.Ec(12,"first name field required"),u.Rb(),u.Rb(),u.Sb(13,"mat-form-field",10),u.Sb(14,"mat-label"),u.Ec(15,"Last Name"),u.Rb(),u.Nb(16,"input",12),u.Sb(17,"mat-error"),u.Ec(18,"last name field required"),u.Rb(),u.Rb(),u.Rb(),u.Sb(19,"div",7),u.Sb(20,"mat-form-field",10),u.Sb(21,"mat-label"),u.Ec(22,"Mobile"),u.Rb(),u.Nb(23,"input",13),u.Sb(24,"mat-error"),u.Ec(25,"mobile field required"),u.Rb(),u.Rb(),u.Sb(26,"mat-form-field",10),u.Sb(27,"mat-label"),u.Ec(28,"Email"),u.Rb(),u.Nb(29,"input",14),u.Sb(30,"mat-error"),u.Ec(31,"email field required"),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Sb(32,"div",6),u.Sb(33,"button",15),u.Ec(34," SAVE "),u.Cc(35,A,1,1,"mat-progress-spinner",16),u.Rb(),u.Rb(),u.Rb()}if(2&t){var r=u.dc();u.jc("formGroup",r.personalForm),u.Bb(6),u.jc("formControl",r.usernameFormControl)("readonly",!0),u.Bb(27),u.jc("disabled",r.updateUserProgress),u.Bb(2),u.jc("ngIf",r.updateUserProgress)}}function D(t,e){1&t&&u.Nb(0,"mat-progress-spinner",18),2&t&&u.jc("diameter",25)}function L(t,e){if(1&t){var n=u.Tb();u.Sb(0,"div"),u.Sb(1,"mat-card-subtitle"),u.Ec(2," Failure when try to fetch your personal information, try to refresh "),u.Rb(),u.Sb(3,"button",19),u.Zb("click",(function(){return u.tc(n),u.dc()._getCurrentUser()})),u.Sb(4,"mat-icon",20),u.Ec(5," refresh "),u.Rb(),u.Rb(),u.Rb()}}var V=function(){function t(t,e,n){this._formBuilder=t,this._snack=e,this._userApi=n,this.getUserProgress=!1,this.updateUserProgress=!1,this.usernameFormControl=new b.f("",[b.v.nullValidator,b.v.required])}return t.prototype.ngOnInit=function(){this._getCurrentUser()},t.prototype._initializeForm=function(t){this.usernameFormControl.setValue(t.username),this.personalForm=this._formBuilder.group({firstname:[t.firstname,[b.v.nullValidator,b.v.required]],lastname:[t.lastname,[b.v.nullValidator,b.v.required]],email:[t.email,[b.v.nullValidator,b.v.required]],mobile:[t.mobile,[b.v.nullValidator,b.v.required]]})},t.prototype._getCurrentUser=function(){var t=this;this.getUserProgress=!0,this._userApi.currentUser().then((function(e){t.currentUser=e,t._initializeForm(t.currentUser),t.getUserProgress=!1})).catch((function(e){t.getUserProgress=!1,t._snack.open("Error when trying get your details","Ok",{duration:3e3})}))},t.prototype.updatePersonalInformation=function(){var t=this;this.personalForm.valid?(this.updateUserProgress=!0,this._userApi.updateUser(this.currentUser,this.personalForm.value).then((function(e){return n=t,void 0,o=function(){return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(t){switch(t.label){case 0:return this.updateUserProgress=!1,this._snack.open("Your personal information is updated","Ok",{duration:3e3}),[4,this._userApi.updateCurrentUser(e)];case 1:return t.sent(),this.personalForm.reset({firstname:e.firstname,lastname:e.lastname,email:e.email,mobile:e.mobile}),[2]}}))},new((r=void 0)||(r=Promise))((function(t,e){function i(t){try{s(o.next(t))}catch(n){e(n)}}function a(t){try{s(o.throw(t))}catch(n){e(n)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(i,a)}s((o=o.apply(n,[])).next())}));var n,r,o})).catch((function(e){console.log(e),t.updateUserProgress=!1,t._snack.open("Fails to update your persona information try again later","Ok",{duration:3e3}),t.personalForm.reset({firstname:t.currentUser.firstname,lastname:t.currentUser.lastname,email:t.currentUser.email,mobile:t.currentUser.mobile})}))):this._snack.open("Please fill all required fields","Ok",{duration:3e3})},t.\u0275fac=function(e){return new(e||t)(u.Mb(b.e),u.Mb(p.a),u.Mb(q.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["smartstock-profile-personal"]],decls:5,vars:3,consts:[[1,"profile-personal-wrapper"],[1,"mat-elevation-z0"],[3,"formGroup","ngSubmit",4,"ngIf"],["mode","indeterminate","color","primary",3,"diameter",4,"ngIf"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12","col-sm-12","col-md-6","col-xl-6","col-lg-6"],["appearance","outline","matTooltip","read only field",1,"btn-block"],["matInput","","type","text",2,"color","gray",3,"formControl","readonly"],["appearance","outline",1,"btn-block"],["matInput","","formControlName","firstname","type","text"],["matInput","","formControlName","lastname","type","text"],["matInput","","formControlName","mobile","type","number"],["matInput","","formControlName","email","type","email"],["mat-flat-button","","color","primary",1,"ft-button",3,"disabled"],["style","display: inline-block","mode","indeterminate","color","primary",3,"diameter",4,"ngIf"],["mode","indeterminate","color","primary",2,"display","inline-block",3,"diameter"],["mode","indeterminate","color","primary",3,"diameter"],["mat-icon-button","",3,"click"],["color","primary"]],template:function(t,e){1&t&&(u.Sb(0,"div",0),u.Sb(1,"mat-card",1),u.Cc(2,T,36,5,"form",2),u.Cc(3,D,1,1,"mat-progress-spinner",3),u.Cc(4,L,6,0,"div",4),u.Rb(),u.Rb()),2&t&&(u.Bb(2),u.jc("ngIf",!e.getUserProgress&&e.personalForm),u.Bb(1),u.jc("ngIf",e.getUserProgress),u.Bb(1),u.jc("ngIf",!e.getUserProgress&&!e.personalForm))},directives:[v.a,o.n,b.w,b.p,b.i,S.c,h.a,S.f,R.b,b.c,b.o,b.g,b.h,S.b,b.s,w.a,g.a,v.g,I.a],styles:[".my-profile-wrapper[_ngcontent-%COMP%]{margin-top:16px}.profile-auth-wrapper[_ngcontent-%COMP%], .profile-business-wrapper[_ngcontent-%COMP%], .profile-personal-wrapper[_ngcontent-%COMP%]{padding:16px;border-radius:4px;background-color:#fff}"]}),t}(),Z=n("nBS7");function z(t,e){1&t&&u.Nb(0,"mat-progress-spinner",16),2&t&&u.jc("diameter",30)}function H(t,e){if(1&t){var n=u.Tb();u.Sb(0,"form",5),u.Zb("ngSubmit",(function(){return u.tc(n),u.dc().updatePersonalInformation()})),u.Sb(1,"div",6),u.Sb(2,"div",7),u.Sb(3,"mat-form-field",8),u.Sb(4,"mat-label"),u.Ec(5,"Principal Shop"),u.Rb(),u.Nb(6,"input",9),u.Rb(),u.Sb(7,"mat-form-field",10),u.Sb(8,"mat-label"),u.Ec(9,"Country"),u.Rb(),u.Nb(10,"input",11),u.Sb(11,"mat-error"),u.Ec(12,"country field required"),u.Rb(),u.Rb(),u.Sb(13,"mat-form-field",10),u.Sb(14,"mat-label"),u.Ec(15,"Region"),u.Rb(),u.Nb(16,"input",12),u.Sb(17,"mat-error"),u.Ec(18,"last name field required"),u.Rb(),u.Rb(),u.Rb(),u.Sb(19,"div",7),u.Sb(20,"mat-form-field",10),u.Sb(21,"mat-label"),u.Ec(22,"street"),u.Rb(),u.Nb(23,"textarea",13),u.Sb(24,"mat-error"),u.Ec(25,"street field required"),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Sb(26,"div",6),u.Sb(27,"button",14),u.Ec(28," SAVE "),u.Cc(29,z,1,1,"mat-progress-spinner",15),u.Rb(),u.Rb(),u.Rb()}if(2&t){var r=u.dc();u.jc("formGroup",r.businessForm),u.Bb(6),u.jc("formControl",r.businessFormControl)("readonly",!0),u.Bb(17),u.jc("rows",3),u.Bb(4),u.jc("disabled",r.updateBusinessProgress),u.Bb(2),u.jc("ngIf",r.updateBusinessProgress)}}function W(t,e){1&t&&u.Nb(0,"mat-progress-spinner",17),2&t&&u.jc("diameter",25)}function K(t,e){if(1&t){var n=u.Tb();u.Sb(0,"div"),u.Sb(1,"mat-card-subtitle"),u.Ec(2," Failure when try to fetch your business information, try to refresh "),u.Rb(),u.Sb(3,"button",18),u.Zb("click",(function(){return u.tc(n),u.dc().getCurrentBusiness()})),u.Sb(4,"mat-icon",19),u.Ec(5," refresh "),u.Rb(),u.Rb(),u.Rb()}}var Q=function(){function t(t,e,n,r){this._formBuilder=t,this._snack=e,this._storage=n,this._userApi=r,this.getBusinessProgress=!1,this.updateBusinessProgress=!1,this.businessFormControl=new b.f("",[b.v.nullValidator,b.v.required])}return t.prototype.ngOnInit=function(){this.getCurrentBusiness()},t.prototype._initializeForm=function(t){this.businessFormControl.setValue(t.businessName),this.businessForm=this._formBuilder.group({country:[t.country,[b.v.nullValidator,b.v.required]],street:[t.street,[b.v.nullValidator,b.v.required]],region:[t.region,[b.v.nullValidator,b.v.required]]})},t.prototype.getCurrentBusiness=function(){var t=this;this.getBusinessProgress=!0,this._storage.getActiveUser().then((function(e){t.currentUser=e,t._initializeForm(t.currentUser),t.getBusinessProgress=!1})).catch((function(e){t.getBusinessProgress=!1,t._snack.open("Error when trying to get shop details","Ok",{duration:3e3})}))},t.prototype.updatePersonalInformation=function(){var t=this;this.businessForm.valid?(this.updateBusinessProgress=!0,this._userApi.updateUser(this.currentUser,this.businessForm.value).then((function(e){return n=t,void 0,o=function(){return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(t){switch(t.label){case 0:return this.updateBusinessProgress=!1,this._snack.open("Your shop information is updated","Ok",{duration:3e3}),[4,this._userApi.updateCurrentUser(e)];case 1:return t.sent(),this.businessForm.reset({country:e.country,region:e.region,street:e.street}),[2]}}))},new((r=void 0)||(r=Promise))((function(t,e){function i(t){try{s(o.next(t))}catch(n){e(n)}}function a(t){try{s(o.throw(t))}catch(n){e(n)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(i,a)}s((o=o.apply(n,[])).next())}));var n,r,o})).catch((function(e){console.log(e),t.updateBusinessProgress=!1,t._snack.open("Fails to update your shop information try again later","Ok",{duration:3e3}),t.businessForm.reset({country:t.currentUser.country,region:t.currentUser.region,street:t.currentUser.street})}))):this._snack.open("Please fill all required fields","Ok",{duration:3e3})},t.\u0275fac=function(e){return new(e||t)(u.Mb(b.e),u.Mb(p.a),u.Mb(Z.a),u.Mb(q.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["smartstock-profile-address"]],decls:5,vars:3,consts:[[1,"profile-business-wrapper"],[1,"mat-elevation-z0"],[3,"formGroup","ngSubmit",4,"ngIf"],["mode","indeterminate","color","primary",3,"diameter",4,"ngIf"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12","col-sm-12","col-md-6","col-xl-6","col-lg-6"],["appearance","outline","matTooltip","read only field",1,"btn-block"],["matInput","","type","text",2,"color","gray",3,"formControl","readonly"],["appearance","outline",1,"btn-block"],["matInput","","formControlName","country","type","text"],["matInput","","formControlName","region","type","text"],["matInput","","formControlName","street","type","text",3,"rows"],["mat-flat-button","","color","primary",1,"ft-button",3,"disabled"],["style","display: inline-block","mode","indeterminate","color","primary",3,"diameter",4,"ngIf"],["mode","indeterminate","color","primary",2,"display","inline-block",3,"diameter"],["mode","indeterminate","color","primary",3,"diameter"],["mat-icon-button","",3,"click"],["color","primary"]],template:function(t,e){1&t&&(u.Sb(0,"div",0),u.Sb(1,"mat-card",1),u.Cc(2,H,30,6,"form",2),u.Cc(3,W,1,1,"mat-progress-spinner",3),u.Cc(4,K,6,0,"div",4),u.Rb(),u.Rb()),2&t&&(u.Bb(2),u.jc("ngIf",!e.getBusinessProgress&&e.businessForm),u.Bb(1),u.jc("ngIf",e.getBusinessProgress),u.Bb(1),u.jc("ngIf",!e.getBusinessProgress&&!e.businessForm))},directives:[v.a,o.n,b.w,b.p,b.i,S.c,h.a,S.f,R.b,b.c,b.o,b.g,b.h,S.b,w.a,g.a,v.g,I.a],styles:[".my-profile-wrapper[_ngcontent-%COMP%]{margin-top:16px}.profile-auth-wrapper[_ngcontent-%COMP%], .profile-business-wrapper[_ngcontent-%COMP%], .profile-personal-wrapper[_ngcontent-%COMP%]{padding:16px;border-radius:4px;background-color:#fff}"]}),t}();function X(t,e){1&t&&(u.Sb(0,"mat-icon"),u.Ec(1,"visibility_on"),u.Rb())}function $(t,e){1&t&&(u.Sb(0,"mat-icon"),u.Ec(1,"visibility_off"),u.Rb())}function Y(t,e){1&t&&(u.Sb(0,"mat-icon"),u.Ec(1,"visibility_on"),u.Rb())}function J(t,e){1&t&&(u.Sb(0,"mat-icon"),u.Ec(1,"visibility_off"),u.Rb())}function tt(t,e){1&t&&u.Nb(0,"mat-progress-spinner",14),2&t&&u.jc("diameter",30)}function et(t,e){if(1&t){var n=u.Tb();u.Sb(0,"form",5),u.Zb("ngSubmit",(function(){return u.tc(n),u.dc().changePassword()})),u.Sb(1,"div",6),u.Sb(2,"div",7),u.Sb(3,"mat-form-field",8),u.Sb(4,"mat-label"),u.Ec(5,"Last Password"),u.Rb(),u.Nb(6,"input",9),u.Sb(7,"button",10),u.Zb("click",(function(){return u.tc(n),u.dc().toggleLastPasswordVisibility()})),u.Cc(8,X,2,0,"mat-icon",4),u.Cc(9,$,2,0,"mat-icon",4),u.Rb(),u.Sb(10,"mat-error"),u.Ec(11,"last password required"),u.Rb(),u.Rb(),u.Sb(12,"mat-form-field",8),u.Sb(13,"mat-label"),u.Ec(14,"New Password"),u.Rb(),u.Nb(15,"input",11),u.Sb(16,"button",10),u.Zb("click",(function(){return u.tc(n),u.dc().togglePasswordVisibility()})),u.Cc(17,Y,2,0,"mat-icon",4),u.Cc(18,J,2,0,"mat-icon",4),u.Rb(),u.Sb(19,"mat-error"),u.Ec(20,"new password required, and must be at least 6 characters"),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Sb(21,"div",6),u.Sb(22,"button",12),u.Ec(23," CHANGE "),u.Cc(24,tt,1,1,"mat-progress-spinner",13),u.Rb(),u.Rb(),u.Rb()}if(2&t){var r=u.dc();u.jc("formGroup",r.authForm),u.Bb(6),u.jc("type",r.showLastPassword?"text":"password"),u.Bb(2),u.jc("ngIf",r.showLastPassword),u.Bb(1),u.jc("ngIf",!r.showLastPassword),u.Bb(6),u.jc("type",r.showPassword?"text":"password"),u.Bb(2),u.jc("ngIf",r.showPassword),u.Bb(1),u.jc("ngIf",!r.showPassword),u.Bb(4),u.jc("disabled",r.updateUserProgress),u.Bb(2),u.jc("ngIf",r.updateUserProgress)}}function nt(t,e){1&t&&u.Nb(0,"mat-progress-spinner",15),2&t&&u.jc("diameter",25)}function rt(t,e){if(1&t){var n=u.Tb();u.Sb(0,"div"),u.Sb(1,"mat-card-subtitle"),u.Ec(2," Failure when try to fetch your personal information, try to refresh "),u.Rb(),u.Sb(3,"button",16),u.Zb("click",(function(){return u.tc(n),u.dc().getCurrentUser()})),u.Sb(4,"mat-icon",17),u.Ec(5," refresh "),u.Rb(),u.Rb(),u.Rb()}}var ot=function(){function t(t,e,n){this._formBuilder=t,this._snack=e,this._userApi=n,this.getUserProgress=!1,this.updateUserProgress=!1,this.showLastPassword=!1,this.showPassword=!1}return t.prototype.ngOnInit=function(){this.getCurrentUser()},t.prototype._initializeForm=function(t){this.authForm=this._formBuilder.group({lastPassword:[""],password:[""]})},t.prototype.getCurrentUser=function(){var t=this;this.getUserProgress=!0,this._userApi.currentUser().then((function(e){t.currentUser=e,t._initializeForm(t.currentUser),t.getUserProgress=!1})).catch((function(e){t.getUserProgress=!1,t._snack.open("Error when trying to get user details","Ok",{duration:3e3})}))},t.prototype.changePassword=function(){var t=this;this.authForm.valid?(this.updateUserProgress=!0,this._userApi.changePasswordFromOld({lastPassword:this.authForm.value.lastPassword,password:this.authForm.value.password,user:this.currentUser}).then((function(e){return n=t,void 0,o=function(){return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(t){switch(t.label){case 0:return this.updateUserProgress=!1,this._snack.open("Your password changed successful","Ok",{duration:3e3}),[4,this._userApi.updateCurrentUser(e)];case 1:return t.sent(),this._resetForm(!0),[2]}}))},new((r=void 0)||(r=Promise))((function(t,e){function i(t){try{s(o.next(t))}catch(n){e(n)}}function a(t){try{s(o.throw(t))}catch(n){e(n)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(i,a)}s((o=o.apply(n,[])).next())}));var n,r,o})).catch((function(e){t.updateUserProgress=!1,t._snack.open("Fails to change password, try again or contact support","Ok",{duration:3e3}),t._resetForm(!0)}))):this._snack.open("Please fill all required fields","Ok",{duration:3e3})},t.prototype._resetForm=function(t){var e=this;t&&this.authForm.reset({lastPassword:"",password:""}),Object.keys(this.authForm.controls).forEach((function(t){e.authForm.get(t).markAsUntouched()}))},t.prototype.toggleLastPasswordVisibility=function(){this.showLastPassword=!this.showLastPassword},t.prototype.togglePasswordVisibility=function(){this.showPassword=!this.showPassword},t.\u0275fac=function(e){return new(e||t)(u.Mb(b.e),u.Mb(p.a),u.Mb(q.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["smartstock-profile-authentication"]],decls:5,vars:3,consts:[[1,"profile-auth-wrapper"],[1,"mat-elevation-z0"],[3,"formGroup","ngSubmit",4,"ngIf"],["mode","indeterminate","color","primary",3,"diameter",4,"ngIf"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12","col-sm-12","col-md-6","col-xl-6","col-lg-6"],["appearance","outline",1,"btn-block"],["matInput","","formControlName","lastPassword",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["matInput","","formControlName","password","type","text",3,"type"],["mat-flat-button","","color","primary",1,"ft-button","btn-block",3,"disabled"],["style","display: inline-block","mode","indeterminate","color","primary",3,"diameter",4,"ngIf"],["mode","indeterminate","color","primary",2,"display","inline-block",3,"diameter"],["mode","indeterminate","color","primary",3,"diameter"],["mat-icon-button","",3,"click"],["color","primary"]],template:function(t,e){1&t&&(u.Sb(0,"div",0),u.Sb(1,"mat-card",1),u.Cc(2,et,25,9,"form",2),u.Cc(3,nt,1,1,"mat-progress-spinner",3),u.Cc(4,rt,6,0,"div",4),u.Rb(),u.Rb()),2&t&&(u.Bb(2),u.jc("ngIf",!e.getUserProgress&&e.authForm),u.Bb(1),u.jc("ngIf",e.getUserProgress),u.Bb(1),u.jc("ngIf",!e.getUserProgress&&!e.authForm))},directives:[v.a,o.n,b.w,b.p,b.i,S.c,S.f,R.b,b.c,b.o,b.h,w.a,S.h,S.b,I.a,g.a,v.g],styles:[".my-profile-wrapper[_ngcontent-%COMP%]{margin-top:16px}.profile-auth-wrapper[_ngcontent-%COMP%], .profile-business-wrapper[_ngcontent-%COMP%], .profile-personal-wrapper[_ngcontent-%COMP%]{padding:16px;border-radius:4px;background-color:#fff}"]}),t}(),it=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function at(t,e){if(1&t&&(u.Sb(0,"mat-sidenav-container",2),u.Sb(1,"mat-sidenav",3,4),u.Nb(3,"smartstock-admin-drawer"),u.Rb(),u.Sb(4,"mat-sidenav-content"),u.Nb(5,"smartstock-toolbar",5),u.Sb(6,"div",6),u.Sb(7,"mat-tab-group"),u.Sb(8,"mat-tab",7),u.Nb(9,"smartstock-profile-personal"),u.Rb(),u.Sb(10,"mat-tab",8),u.Nb(11,"smartstock-profile-address"),u.Rb(),u.Sb(12,"mat-tab",9),u.Nb(13,"smartstock-profile-authentication"),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb()),2&t){var n=u.pc(2),r=u.dc();u.Bb(1),u.jc("fixedInViewport",!0)("mode",r.enoughWidth()?"side":"over")("opened",!0),u.Bb(4),u.jc("sidenav",n)("showProgress",!1)}}function st(t,e){1&t&&u.Nb(0,"smartstock-profile-mobile")}var ct=function(t){function e(){var e=t.call(this)||this;return e.isMobile=s.a.android,e}return it(e,t),e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Gb({type:e,selectors:[["smartstock-profile"]],features:[u.yb],decls:2,vars:2,consts:[["class","match-parent",4,"ngIf"],[4,"ngIf"],[1,"match-parent"],[1,"match-parent-side",3,"fixedInViewport","mode","opened"],["sidenav",""],[3,"heading","sidenav","showProgress"],[1,"container","my-profile-wrapper"],["label","Personal Information"],["label","Shop Information"],["label","Authentication"]],template:function(t,e){1&t&&(u.Cc(0,at,14,5,"mat-sidenav-container",0),u.Cc(1,st,1,0,"smartstock-profile-mobile",1)),2&t&&(u.jc("ngIf",!e.isMobile),u.Bb(1),u.jc("ngIf",e.isMobile))},directives:[o.n,m.b,m.a,d.a,m.c,f.a,G.b,G.a,V,Q,ot],styles:[".my-profile-wrapper[_ngcontent-%COMP%]{margin-top:16px}.profile-auth-wrapper[_ngcontent-%COMP%], .profile-business-wrapper[_ngcontent-%COMP%], .profile-personal-wrapper[_ngcontent-%COMP%]{padding:16px;border-radius:4px;background-color:#fff}"]}),e}(c.a),lt=n("bRFb"),ut=n("Qfq9"),bt=n("Fprw"),pt=n("2ChS"),mt=n("OPgv"),dt=n("MutI"),ft=n("ZBrE");function gt(t,e){if(1&t&&(u.Sb(0,"mat-list-item"),u.Sb(1,"h1",4),u.Ec(2),u.Rb(),u.Sb(3,"p",4),u.Ec(4),u.ec(5,"currency"),u.Rb(),u.Sb(6,"p",5),u.Ec(7),u.ec(8,"date"),u.Rb(),u.Rb()),2&t){var n=e.$implicit;u.Bb(2),u.Fc(n.name),u.Bb(2),u.Fc(u.gc(5,3,n.amount,"TZS ")),u.Bb(3),u.Fc(u.fc(8,6,n.date))}}function ht(t,e){if(1&t&&(u.Sb(0,"mat-list"),u.Cc(1,gt,9,8,"mat-list-item",3),u.Rb()),2&t){var n=u.dc();u.Bb(1),u.jc("ngForOf",n.invoices)}}function vt(t,e){if(1&t&&u.Nb(0,"smartstock-data-not-ready",6),2&t){var n=u.dc();u.jc("isLoading",n.invoiceProgressFlag)}}var yt=function(){function t(t,e){this.billingApi=t,this.logger=e,this.invoices=[],this.invoiceProgressFlag=!1}return t.prototype.ngOnInit=function(){this.getInvoices()},t.prototype.getInvoices=function(){var t=this;this.invoiceProgressFlag=!0,this.billingApi.getInvoices().then((function(e){t.invoiceProgressFlag=!1,e.forEach((function(e){e.invoice.forEach((function(n){t.invoices.push({amount:n.amount,date:n._id,name:e.businessName})}))}))})).catch((function(e){t.invoiceProgressFlag=!1,t.logger.i(e)}))},t.\u0275fac=function(e){return new(e||t)(u.Mb(lt.a),u.Mb(ut.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["smartstock-billing-invoices"]],decls:3,vars:2,consts:[[1,"mat-elevation-z0"],[4,"ngIf"],["style","padding: 16px",3,"isLoading",4,"ngIf"],[4,"ngFor","ngForOf"],["matLine",""],["matSuffix",""],[2,"padding","16px",3,"isLoading"]],template:function(t,e){1&t&&(u.Sb(0,"mat-card",0),u.Cc(1,ht,2,1,"mat-list",1),u.Cc(2,vt,1,1,"smartstock-data-not-ready",2),u.Rb()),2&t&&(u.Bb(1),u.jc("ngIf",!e.invoiceProgressFlag),u.Bb(1),u.jc("ngIf",e.invoiceProgressFlag))},directives:[v.a,o.n,dt.a,o.m,dt.c,E.k,S.h,ft.a],pipes:[o.d,o.f],encapsulation:2}),t}();function St(t,e){if(1&t&&(u.Sb(0,"mat-list-item"),u.Sb(1,"h1",4),u.Ec(2),u.Rb(),u.Sb(3,"p",4),u.Ec(4),u.ec(5,"currency"),u.Rb(),u.Sb(6,"p",5),u.Ec(7),u.ec(8,"date"),u.Rb(),u.Rb()),2&t){var n=e.$implicit;u.Bb(2),u.Fc(n.receipt),u.Bb(2),u.Fc(u.gc(5,3,n.amount,"TZS ")),u.Bb(3),u.Fc(u.fc(8,6,n.date))}}function Rt(t,e){if(1&t&&(u.Sb(0,"mat-list"),u.Cc(1,St,9,8,"mat-list-item",3),u.Rb()),2&t){var n=u.dc();u.Bb(1),u.jc("ngForOf",n.receipts)}}function wt(t,e){if(1&t&&u.Nb(0,"smartstock-data-not-ready",6),2&t){var n=u.dc();u.jc("isLoading",n.receiptProgressFlag)}}var Pt=function(){function t(t,e){this.billingApi=t,this.logger=e,this.receiptProgressFlag=!1}return t.prototype.ngOnInit=function(){this.getReceipts()},t.prototype.getReceipts=function(){var t=this;this.receiptProgressFlag=!0,this.billingApi.getReceipt().then((function(e){t.receiptProgressFlag=!1,t.receipts=e.payments.map((function(t){return{amount:t.amount,date:t.date.iso?t.date.iso:t.date,id:t.id,receipt:t.receipt}}))})).catch((function(e){t.receiptProgressFlag=!1,t.logger.i(e)}))},t.\u0275fac=function(e){return new(e||t)(u.Mb(lt.a),u.Mb(ut.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["smartstock-billing-receipts"]],decls:3,vars:2,consts:[[1,"mat-elevation-z0"],[4,"ngIf"],["style","padding: 16px",3,"isLoading",4,"ngIf"],[4,"ngFor","ngForOf"],["matLine",""],["matSuffix",""],[2,"padding","16px",3,"isLoading"]],template:function(t,e){1&t&&(u.Sb(0,"mat-card",0),u.Cc(1,Rt,2,1,"mat-list",1),u.Cc(2,wt,1,1,"smartstock-data-not-ready",2),u.Rb()),2&t&&(u.Bb(1),u.jc("ngIf",!e.receiptProgressFlag),u.Bb(1),u.jc("ngIf",e.receiptProgressFlag))},directives:[v.a,o.n,dt.a,o.m,dt.c,E.k,S.h,ft.a],pipes:[o.d,o.f],styles:[""]}),t}(),kt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Ct(t,e){if(1&t&&(u.Sb(0,"span",18),u.Ec(1),u.ec(2,"currency"),u.Rb()),2&t){var n=u.dc(2);u.Bb(1),u.Gc(" ",u.gc(2,1,n.dueBill,"TZS ")," ")}}function _t(t,e){if(1&t&&u.Nb(0,"smartstock-data-not-ready",19),2&t){var n=u.dc(2);u.jc("isLoading",n.getDueBalanceFlag)("height",100)("width",100)}}function xt(t,e){if(1&t&&(u.Sb(0,"div",15),u.Cc(1,Ct,3,4,"span",16),u.Cc(2,_t,1,3,"smartstock-data-not-ready",17),u.Rb()),2&t){var n=u.dc();u.Bb(1),u.jc("ngIf",!n.getDueBalanceFlag),u.Bb(1),u.jc("ngIf",n.getDueBalanceFlag||void 0===n.dueBill)}}function Et(t,e){if(1&t&&(u.Sb(0,"span",18),u.Ec(1),u.ec(2,"currency"),u.Rb()),2&t){var n=u.dc(2);u.Bb(1),u.Gc(" ",u.gc(2,1,n.unInvoicedBalance,"TZS ")," ")}}function Ft(t,e){if(1&t&&u.Nb(0,"smartstock-data-not-ready",19),2&t){var n=u.dc(2);u.jc("isLoading",n.getUnInvoicedBalanceFlag)("height",100)("width",100)}}function Bt(t,e){if(1&t&&(u.Sb(0,"div",15),u.Cc(1,Et,3,4,"span",16),u.Cc(2,Ft,1,3,"smartstock-data-not-ready",17),u.Rb()),2&t){var n=u.dc();u.Bb(1),u.jc("ngIf",!n.getUnInvoicedBalanceFlag),u.Bb(1),u.jc("ngIf",n.getUnInvoicedBalanceFlag||!n.unInvoicedBalance)}}function Mt(t,e){if(1&t){var n=u.Tb();u.Sb(0,"div"),u.Sb(1,"div"),u.Sb(2,"p",5),u.Ec(3," Payments "),u.Rb(),u.Rb(),u.Sb(4,"div",6),u.Sb(5,"button",20),u.Zb("click",(function(){return u.tc(n),u.dc().mobilePay()})),u.Ec(6," Mobile Pay "),u.Rb(),u.Rb(),u.Rb()}}var It=function(t){function e(e,n,r){var o=t.call(this)||this;return o.billingApi=e,o.bottomSheet=n,o.logger=r,o.isMobilePay=!0,o.amountFormControl=new b.f(0),o.isMobile=s.a.android,o.getReferenceNumberFlag=!1,o.getUnInvoicedBalanceFlag=!1,o.getDueBalanceFlag=!1,o}return kt(e,t),e.prototype.ngOnInit=function(){this.getDueBalance(),this.getUnInvoicedBalance(),this.getPaymentReference()},e.prototype.getPaymentReference=function(){var t=this;this.getReferenceNumberFlag=!0,this.billingApi.getPaymentReference().then((function(e){t.getReferenceNumberFlag=!1,t.referenceNumber=e})).catch((function(e){t.getReferenceNumberFlag=!1,t.logger.i(e)}))},e.prototype.getDueBalance=function(){var t=this;this.getDueBalanceFlag=!0,this.billingApi.getDueBalance("TZS").then((function(e){t.getDueBalanceFlag=!1;var n=e.CR,r=e.DR.map((function(t){return t.total})).reduce((function(t,e){return t+e}),0);t.dueBill=n-r})).catch((function(e){t.getDueBalanceFlag=!1,t.logger.i(e)}))},e.prototype.getUnInvoicedBalance=function(){var t=this;this.getUnInvoicedBalanceFlag=!0,this.billingApi.getUnInvoicesBalance("TZS").then((function(e){t.getUnInvoicedBalanceFlag=!1,t.unInvoicedBalance=e.map((function(t){return t.total})).reduce((function(t,e){return t+e}),0)})).catch((function(e){t.getUnInvoicedBalanceFlag=!1,t.logger.i(e)}))},e.prototype.mobilePay=function(){var t=this;this.bottomSheet.open(bt.a,{autoFocus:!0,closeOnNavigation:!1,data:{ref:this.referenceNumber,amount:this.dueBill}}).afterDismissed().subscribe((function(e){!0===e&&(t.getDueBalance(),t.getUnInvoicedBalance())}))},e.\u0275fac=function(t){return new(t||e)(u.Mb(lt.a),u.Mb(pt.b),u.Mb(ut.a))},e.\u0275cmp=u.Gb({type:e,selectors:[["smartstock-billing"]],features:[u.yb],decls:27,vars:19,consts:[[1,"match-parent"],[1,"match-parent-side",3,"fixedInViewport","mode","opened"],["sidenav",""],[3,"heading","sidenav","showProgress","backLink","hasBackRoute"],[3,"ngClass"],[2,"padding","10px 0"],[1,"row",2,"margin-bottom","16px"],[1,"col-12","col-md-6","col-xl-6","col-sm-12","col-lg-6",2,"margin-bottom","8px"],[3,"content","title","height","description"],["dueBalance",""],["unInvoiced",""],[4,"ngIf"],[2,"width","100%"],["label","Invoices"],["label","Receipts"],[2,"display","flex","height","100%","justify-content","center","align-items","center"],["style","font-size: 30px; text-space: 2px",4,"ngIf"],[3,"isLoading","height","width",4,"ngIf"],[2,"font-size","30px","text-space","2px"],[3,"isLoading","height","width"],["mat-flat-button","","color","primary",1,"ft-button",3,"click"]],template:function(t,e){if(1&t&&(u.Sb(0,"mat-sidenav-container",0),u.Sb(1,"mat-sidenav",1,2),u.Nb(3,"smartstock-admin-drawer"),u.Rb(),u.Sb(4,"mat-sidenav-content"),u.Nb(5,"smartstock-toolbar",3),u.Sb(6,"div",4),u.Sb(7,"div",4),u.Sb(8,"div"),u.Sb(9,"p",5),u.Ec(10," Billing "),u.Rb(),u.Rb(),u.Sb(11,"div",6),u.Sb(12,"div",7),u.Sb(13,"smartstock-dash-card",8),u.Cc(14,xt,3,2,"ng-template",null,9,u.Dc),u.Rb(),u.Rb(),u.Sb(16,"div",7),u.Sb(17,"smartstock-dash-card",8),u.Cc(18,Bt,3,2,"ng-template",null,10,u.Dc),u.Rb(),u.Rb(),u.Rb(),u.Cc(20,Mt,7,0,"div",11),u.Sb(21,"div",6),u.Sb(22,"mat-tab-group",12),u.Sb(23,"mat-tab",13),u.Nb(24,"smartstock-billing-invoices"),u.Rb(),u.Sb(25,"mat-tab",14),u.Nb(26,"smartstock-billing-receipts"),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb()),2&t){var n=u.pc(2),r=u.pc(15),o=u.pc(19);u.Bb(1),u.jc("fixedInViewport",!0)("mode",e.enoughWidth()?"side":"over")("opened",!e.isMobile),u.Bb(4),u.jc("heading","Bills")("sidenav",n)("showProgress",!1)("backLink","/account")("hasBackRoute",e.isMobile),u.Bb(1),u.jc("ngClass",e.isMobile?"container-fluid":"container my-billing-wrapper"),u.Bb(1),u.jc("ngClass",e.isMobile?"col-12":"col-12 col-lg-10 col-xl-10 offset-xl-1 offset-lg-1 offset-md-0 offset-sm-0"),u.Bb(6),u.jc("content",r)("title","Balance")("height",250)("description","If bill is negative means you have un paid invoices"),u.Bb(4),u.jc("content",o)("title","Un Invoiced")("height",250)("description","Your usage cost before billed, this is approximation actual cost will be billed end of the month"),u.Bb(3),u.jc("ngIf",void 0!==e.dueBill)}},directives:[m.b,m.a,d.a,m.c,f.a,o.l,mt.a,o.n,G.b,G.a,yt,Pt,ft.a,w.a],pipes:[o.d],styles:[".my-billing-wrapper[_ngcontent-%COMP%]{padding:16px 36px}.my-billing-title[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-style:normal;font-weight:400;font-size:24px;line-height:28px;color:#626262}.bill-card-top[_ngcontent-%COMP%]{height:125px;background:#fff;border-radius:4px;margin:5px}.bill-card-top-title[_ngcontent-%COMP%]{font-family:Roboto Roboto,Helvetica Neue,sans-serif;font-weight:700;color:#aaa}.bill-card-top-number[_ngcontent-%COMP%], .bill-card-top-title[_ngcontent-%COMP%]{font-style:normal;font-size:18px;line-height:21px}.bill-card-top-number[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-weight:400;color:#000}mat-card-content[_ngcontent-%COMP%]{height:100%}"]}),e}(c.a),Ot=n("tyNb"),Nt=n("z4as"),jt=n("Ktec"),Ut=function(){function t(t,e){this.dialogRef=t,this.data=e,this.message="Please enter your <b>username</b> to reset your password"}return t.prototype.ngOnInit=function(){this.data&&this.data.message&&(this.message=this.data.message)},t.\u0275fac=function(e){return new(e||t)(u.Mb(F.g),u.Mb(F.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["ng-component"]],decls:7,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content","",3,"innerHTML"],["mat-dialog-actions",""],["mat-dialog-close","","mat-button",""]],template:function(t,e){1&t&&(u.Sb(0,"div"),u.Sb(1,"h5",0),u.Ec(2,"Password Reset"),u.Rb(),u.Nb(3,"p",1),u.Sb(4,"div",2),u.Sb(5,"button",3),u.Ec(6,"Close"),u.Rb(),u.Rb(),u.Rb()),2&t&&(u.Bb(3),u.jc("innerHTML",e.message,u.uc))},directives:[F.h,F.e,F.c,w.a,F.d],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.login-title[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-style:normal;font-weight:700;font-size:36px;line-height:56px;margin-bottom:10px;color:#fff}.login-wrapper[_ngcontent-%COMP%]{display:flex;min-height:100vh;justify-content:center;align-items:center;flex-direction:column;background-color:#0b2e13}.login-sec[_ngcontent-%COMP%]{width:100%}"]}),t}(),Gt=n("bv9b");function qt(t,e){1&t&&u.Nb(0,"mat-progress-bar",16)}function At(t,e){1&t&&(u.Sb(0,"mat-icon"),u.Ec(1,"visibility_on"),u.Rb())}function Tt(t,e){1&t&&(u.Sb(0,"mat-icon"),u.Ec(1,"visibility_off"),u.Rb())}function Dt(t,e){1&t&&(u.Sb(0,"mat-card-actions"),u.Sb(1,"button",17),u.Ec(2," Login "),u.Rb(),u.Rb())}function Lt(t,e){if(1&t){var n=u.Tb();u.Sb(0,"mat-card-actions"),u.Sb(1,"button",18),u.Zb("click",(function(t){return u.tc(n),t.preventDefault()})),u.Ec(2," Open Account For Free "),u.Rb(),u.Rb()}}function Vt(t,e){1&t&&(u.Sb(0,"a",19),u.Ec(1," Go Back Home "),u.Rb())}var Zt=function(){function t(t,e,n,r,o,i){this.snack=t,this.routes=e,this.dialog=n,this.log=r,this.formBuilder=o,this.userDatabase=i,this.showProgress=!1,this.showPasswordFlag=!1,this.isBrowser=s.a.browser}return t.prototype.ngOnInit=function(){this.initializeForm()},t.prototype.initializeForm=function(){this.loginForm=this.formBuilder.group({username:["",[b.v.required,b.v.nullValidator]],password:["",[b.v.required,b.v.nullValidator]]})},t.prototype.login=function(t){var e=this;this.loginForm.valid?(this.showProgress=!0,this.loginForm.value.username.trim(),this.loginForm.value.password.trim(),this.userDatabase.login(this.loginForm.value).then((function(n){"admin"===n.role?(e.stopProgressAndCleanForm(t),e.showMainUi("admin",t)):(e.stopProgressAndCleanForm(t),e.showMainUi("cashier",t))})).catch((function(t){e.log.i(t),e.showProgress=!1,e.snack.open("Invalid username/password try again","Ok",{duration:5e3})}))):this.snack.open("Enter all required field","Ok",{duration:3e3})},t.prototype.stopProgressAndCleanForm=function(t){this.showProgress=!1,this.loginForm.reset(),t.resetForm()},t.prototype.showMainUi=function(t,e){var n=this;"admin"===t?this.routes.navigateByUrl("/dashboard").catch((function(t){return n.log.i(t)})).then((function(){n.loginForm.reset(),e.resetForm()})):this.routes.navigateByUrl("/sale").catch((function(t){return n.log.i(t)})).then((function(){n.loginForm.reset(),e.resetForm()}))},t.prototype.reset=function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.loginForm.value.username?(this.showProgress=!0,this.userDatabase.resetPassword(this.loginForm.value.username).then((function(t){e.showProgress=!1,e.dialog.open(Ut,{data:{message:t&&t.message?t.message:null},closeOnNavigation:!0})})).catch((function(t){e.showProgress=!1,e.snack.open(t&&t.message?t.message:t.toString(),"Ok",{duration:3e3})}))):this.dialog.open(Ut,{closeOnNavigation:!0})},t.prototype.showPassword=function(t){t.preventDefault(),this.showPasswordFlag=!this.showPasswordFlag},t.prototype.handleEnterKey=function(t,e){"Enter"===t.code&&this.login(e)},t.\u0275fac=function(e){return new(e||t)(u.Mb(p.a),u.Mb(Ot.b),u.Mb(F.b),u.Mb(ut.a),u.Mb(b.e),u.Mb(q.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["smartstock-login"]],decls:34,vars:8,consts:[[1,"login-wrapper"],[1,"container","login-sec"],[1,"login-title","text-center"],[1,"col-sm-12","col-12","col-md-6","col-xl-4","col-lg-6","offset-xl-4","offset-lg-3","offset-md-3"],["class","full-width rounded-top","mode","indeterminate",4,"ngIf"],[3,"formGroup","ngSubmit"],["formElement","ngForm"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","type","text","required",""],["matInput","","formControlName","password","required","",3,"type","keypress"],["matSuffix","","mat-icon-button","",3,"click"],[4,"ngIf"],[2,"display","flex","flex-direction","row","padding","8px","align-items","center"],["style","color: white; padding: 8px","routerLink","/",4,"ngIf"],["href","#",2,"color","white","padding","8px",3,"click"],[1,"text-center",2,"color","white","margin-top","8px"],["mode","indeterminate",1,"full-width","rounded-top"],["mat-raised-button","","color","primary",1,"btn-block","ft-button"],["routerLink","/account/register","mat-raised-button","","color","primary",1,"btn-block","ft-button",3,"click"],["routerLink","/",2,"color","white","padding","8px"]],template:function(t,e){if(1&t){var n=u.Tb();u.Sb(0,"div",0),u.Sb(1,"div",1),u.Sb(2,"div",2),u.Ec(3," Login "),u.Rb(),u.Sb(4,"div",3),u.Cc(5,qt,1,0,"mat-progress-bar",4),u.Sb(6,"form",5,6),u.Zb("ngSubmit",(function(){u.tc(n);var t=u.pc(7);return e.login(t)})),u.Sb(8,"mat-card"),u.Sb(9,"mat-card-content"),u.Sb(10,"mat-form-field",7),u.Sb(11,"mat-label"),u.Ec(12,"Username"),u.Rb(),u.Nb(13,"input",8),u.Sb(14,"mat-error"),u.Ec(15,"Username required"),u.Rb(),u.Rb(),u.Sb(16,"mat-form-field",7),u.Sb(17,"mat-label"),u.Ec(18,"Password"),u.Rb(),u.Sb(19,"input",9),u.Zb("keypress",(function(t){u.tc(n);var r=u.pc(7);return e.handleEnterKey(t,r)})),u.Rb(),u.Sb(20,"button",10),u.Zb("click",(function(t){return e.showPassword(t)})),u.Cc(21,At,2,0,"mat-icon",11),u.Cc(22,Tt,2,0,"mat-icon",11),u.Rb(),u.Sb(23,"mat-error"),u.Ec(24,"Password required"),u.Rb(),u.Rb(),u.Rb(),u.Cc(25,Dt,3,0,"mat-card-actions",11),u.Cc(26,Lt,3,0,"mat-card-actions",11),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Sb(27,"footer"),u.Sb(28,"div",12),u.Cc(29,Vt,2,0,"a",13),u.Sb(30,"a",14),u.Zb("click",(function(t){return e.reset(t)})),u.Ec(31," Reset Password "),u.Rb(),u.Rb(),u.Sb(32,"p",15),u.Ec(33,"FahamuTech \xa9 2020"),u.Rb(),u.Rb(),u.Rb()}2&t&&(u.Bb(5),u.jc("ngIf",e.showProgress),u.Bb(1),u.jc("formGroup",e.loginForm),u.Bb(13),u.jc("type",e.showPasswordFlag?"text":"password"),u.Bb(2),u.jc("ngIf",e.showPasswordFlag),u.Bb(1),u.jc("ngIf",!e.showPasswordFlag),u.Bb(3),u.jc("ngIf",!e.showProgress),u.Bb(1),u.jc("ngIf",!e.showProgress),u.Bb(3),u.jc("ngIf",e.isBrowser))},directives:[o.n,b.w,b.p,b.i,v.a,v.c,S.c,S.f,R.b,b.c,b.o,b.h,b.u,S.b,w.a,S.h,Gt.a,I.a,v.b,Ot.c,Ot.d],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.login-title[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-style:normal;font-weight:700;font-size:36px;line-height:56px;margin-bottom:10px;color:#fff}.login-wrapper[_ngcontent-%COMP%]{display:flex;min-height:100vh;justify-content:center;align-items:center;flex-direction:column;background-color:#0b2e13}.login-sec[_ngcontent-%COMP%]{width:100%}"]}),t}(),zt=function(){function t(t,e){this.dialogRef=t,this.data=e}return t.\u0275fac=function(e){return new(e||t)(u.Mb(F.g),u.Mb(F.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["ng-component"]],decls:8,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"]],template:function(t,e){1&t&&(u.Sb(0,"div"),u.Sb(1,"div",0),u.Ec(2," Hello "),u.Rb(),u.Sb(3,"p",1),u.Ec(4),u.Rb(),u.Sb(5,"div",2),u.Sb(6,"button",3),u.Zb("click",(function(){return e.dialogRef.close(e.data.goLogin)})),u.Ec(7,"Close"),u.Rb(),u.Rb(),u.Rb()),2&t&&(u.Bb(4),u.Gc(" ",e.data.message," "))},directives:[F.h,F.e,F.c,w.a],styles:[".main-container[_ngcontent-%COMP%]{height:600px;padding-top:16px;padding-bottom:16px}mat-toolbar[_ngcontent-%COMP%]{background-color:#fff}mat-toolbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#027206;text-decoration:none}.stepper-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}  .mat-focused .mat-form-field-label{color:green!important} .mat-form-field-ripple,  .mat-form-field-underline{background-color:green!important}.login-link[_ngcontent-%COMP%]{text-decoration:none;color:#027206;margin:0 auto;padding-left:100px}  .mat-step-header .mat-step-icon{background-color:#55ff5c;color:#fff}  .mat-step-header .mat-step-label{font-size:20px;color:#000;font-weight:500}.stepper-btn[_ngcontent-%COMP%],   .mat-step-header .mat-step-icon-selected{background-color:#027206;color:#fff}.stepper-btn[_ngcontent-%COMP%]{border-radius:6px;margin:10px 20px 0 0;padding:0 30px}.landing-footer[_ngcontent-%COMP%]{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;bottom:0;width:100%;margin:0}form[_ngcontent-%COMP%]{padding-top:8px}"]}),t}(),Ht=n("QVH4"),Wt=n("/t3+"),Kt=n("xHqg"),Qt=function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Gb({type:t,selectors:[["smartstock-personal-details-form"]],inputs:{personalFormGroup:"personalFormGroup"},decls:39,vars:1,consts:[[3,"formGroup"],[1,"stepper-inputs"],["appearance","fill"],["matSuffix",""],["matInput","","type","text","formControlName","firstname","required","",1,"inputs"],["matInput","","type","text","formControlName","lastname","required","",1,"inputs"],["matInput","","type","email","formControlName","email","required","",1,"inputs"],["matPrefix",""],["matInput","","type","number","formControlName","mobile","required","",1,"inputs"],["mat-button","","matStepperNext","",1,"stepper-btn"]],template:function(t,e){1&t&&(u.Sb(0,"form",0),u.Sb(1,"div",1),u.Sb(2,"mat-form-field",2),u.Sb(3,"mat-label"),u.Ec(4,"FirstName"),u.Rb(),u.Sb(5,"mat-icon",3),u.Ec(6,"face"),u.Rb(),u.Nb(7,"input",4),u.Sb(8,"mat-error"),u.Ec(9,"FirstName required"),u.Rb(),u.Rb(),u.Sb(10,"mat-form-field",2),u.Sb(11,"mat-label"),u.Ec(12,"LastName"),u.Rb(),u.Sb(13,"mat-icon",3),u.Ec(14,"face"),u.Rb(),u.Nb(15,"input",5),u.Sb(16,"mat-error"),u.Ec(17,"LastName required"),u.Rb(),u.Rb(),u.Sb(18,"mat-form-field",2),u.Sb(19,"mat-label"),u.Ec(20,"Email"),u.Rb(),u.Sb(21,"mat-icon",3),u.Ec(22,"email"),u.Rb(),u.Nb(23,"input",6),u.Sb(24,"mat-error"),u.Ec(25,"Email required"),u.Rb(),u.Rb(),u.Sb(26,"mat-form-field",2),u.Sb(27,"mat-label"),u.Ec(28,"Mobile number"),u.Rb(),u.Sb(29,"span",7),u.Ec(30,"+"),u.Rb(),u.Sb(31,"mat-icon",3),u.Ec(32,"phone"),u.Rb(),u.Nb(33,"input",8),u.Sb(34,"mat-error"),u.Ec(35,"Mobile number required"),u.Rb(),u.Rb(),u.Rb(),u.Sb(36,"div"),u.Sb(37,"button",9),u.Ec(38,"Next"),u.Rb(),u.Rb(),u.Rb()),2&t&&u.jc("formGroup",e.personalFormGroup)},directives:[b.w,b.p,b.i,S.c,S.f,I.a,S.h,R.b,b.c,b.o,b.h,b.u,S.b,S.g,b.s,w.a,Kt.d],styles:[".main-container[_ngcontent-%COMP%]{height:600px;padding-top:16px;padding-bottom:16px}mat-toolbar[_ngcontent-%COMP%]{background-color:#fff}mat-toolbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#027206;text-decoration:none}.stepper-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}  .mat-focused .mat-form-field-label{color:green!important} .mat-form-field-ripple,  .mat-form-field-underline{background-color:green!important}.login-link[_ngcontent-%COMP%]{text-decoration:none;color:#027206;margin:0 auto;padding-left:100px}  .mat-step-header .mat-step-icon{background-color:#55ff5c;color:#fff}  .mat-step-header .mat-step-label{font-size:20px;color:#000;font-weight:500}.stepper-btn[_ngcontent-%COMP%],   .mat-step-header .mat-step-icon-selected{background-color:#027206;color:#fff}.stepper-btn[_ngcontent-%COMP%]{border-radius:6px;margin:10px 20px 0 0;padding:0 30px}.landing-footer[_ngcontent-%COMP%]{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;bottom:0;width:100%;margin:0}form[_ngcontent-%COMP%]{padding-top:8px}"]}),t}(),Xt=function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Gb({type:t,selectors:[["smartstock-business-details-form"]],inputs:{businessFormGroup:"businessFormGroup"},decls:69,vars:1,consts:[[3,"formGroup"],[1,"stepper-inputs"],["appearance","fill"],["matSuffix",""],["matInput","","type","text","formControlName","businessName","required","",1,"inputs"],["formControlName","category","required","",1,""],["value","atrists_photographers_creative"],["value","consultants_professionals"],["value","finance_insurance"],["value","product_provider"],["value","service_provider"],["value","hair_spa_aesthetics"],["value","medical_dental_health_service"],["value","nonprofit_associations_groups"],["value","realestate_home"],["value","retailers_and_resellers"],["value","web_media_freelancer"],["matInput","","type","text","formControlName","country","required","",1,"inputs"],["matInput","","type","text","formControlName","region","required","",1,"inputs"],["matInput","","formControlName","street","required","",1,"inputs"],["mat-button","","matStepperPrevious","",1,"stepper-btn"],["mat-button","","matStepperNext","",1,"stepper-btn"]],template:function(t,e){1&t&&(u.Sb(0,"form",0),u.Sb(1,"div",1),u.Sb(2,"mat-form-field",2),u.Sb(3,"mat-label"),u.Ec(4,"Business Name"),u.Rb(),u.Sb(5,"mat-icon",3),u.Ec(6,"business"),u.Rb(),u.Nb(7,"input",4),u.Sb(8,"mat-error"),u.Ec(9,"Business name required"),u.Rb(),u.Rb(),u.Sb(10,"mat-form-field",2),u.Sb(11,"mat-label"),u.Ec(12,"Shop Category"),u.Rb(),u.Sb(13,"mat-icon",3),u.Ec(14,"category"),u.Rb(),u.Sb(15,"mat-select",5),u.Sb(16,"mat-option",6),u.Ec(17,"Artists, Photographers & Creative Types "),u.Rb(),u.Sb(18,"mat-option",7),u.Ec(19,"Consultants & Professionals"),u.Rb(),u.Sb(20,"mat-option",8),u.Ec(21,"Financial Services"),u.Rb(),u.Sb(22,"mat-option",9),u.Ec(23,"General: I make or sell a PRODUCT"),u.Rb(),u.Sb(24,"mat-option",10),u.Ec(25,"General: I provide a SERVICE"),u.Rb(),u.Sb(26,"mat-option",11),u.Ec(27,"Hair, Spa & Aesthetics"),u.Rb(),u.Sb(28,"mat-option",12),u.Ec(29,"Medical, Dental, Health"),u.Rb(),u.Sb(30,"mat-option",13),u.Ec(31,"Non-profits, Associations & Groups"),u.Rb(),u.Sb(32,"mat-option",14),u.Ec(33,"Real Estate, Construction & Home Improvement"),u.Rb(),u.Sb(34,"mat-option",15),u.Ec(35,"Retailers, Resellers & Sales"),u.Rb(),u.Sb(36,"mat-option",16),u.Ec(37,"Web, Tech & Media"),u.Rb(),u.Rb(),u.Sb(38,"mat-error"),u.Ec(39,"Choose category"),u.Rb(),u.Rb(),u.Sb(40,"mat-form-field",2),u.Sb(41,"mat-label"),u.Ec(42,"Country"),u.Rb(),u.Sb(43,"mat-icon",3),u.Ec(44,"person_pin"),u.Rb(),u.Nb(45,"input",17),u.Sb(46,"mat-error"),u.Ec(47,"Country required"),u.Rb(),u.Rb(),u.Sb(48,"mat-form-field",2),u.Sb(49,"mat-label"),u.Ec(50,"Region"),u.Rb(),u.Sb(51,"mat-icon",3),u.Ec(52,"person_pin"),u.Rb(),u.Nb(53,"input",18),u.Sb(54,"mat-error"),u.Ec(55,"Region required"),u.Rb(),u.Rb(),u.Sb(56,"mat-form-field",2),u.Sb(57,"mat-label"),u.Ec(58,"Street / Business location"),u.Rb(),u.Sb(59,"mat-icon",3),u.Ec(60,"person_pin"),u.Rb(),u.Nb(61,"textarea",19),u.Sb(62,"mat-error"),u.Ec(63,"Street required"),u.Rb(),u.Rb(),u.Rb(),u.Sb(64,"div"),u.Sb(65,"button",20),u.Ec(66,"Back"),u.Rb(),u.Sb(67,"button",21),u.Ec(68,"Next"),u.Rb(),u.Rb(),u.Rb()),2&t&&u.jc("formGroup",e.businessFormGroup)},directives:[b.w,b.p,b.i,S.c,S.f,I.a,S.h,R.b,b.c,b.o,b.h,b.u,S.b,j.a,E.n,w.a,Kt.e,Kt.d],styles:[".main-container[_ngcontent-%COMP%]{height:600px;padding-top:16px;padding-bottom:16px}mat-toolbar[_ngcontent-%COMP%]{background-color:#fff}mat-toolbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#027206;text-decoration:none}.stepper-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}  .mat-focused .mat-form-field-label{color:green!important} .mat-form-field-ripple,  .mat-form-field-underline{background-color:green!important}.login-link[_ngcontent-%COMP%]{text-decoration:none;color:#027206;margin:0 auto;padding-left:100px}  .mat-step-header .mat-step-icon{background-color:#55ff5c;color:#fff}  .mat-step-header .mat-step-label{font-size:20px;color:#000;font-weight:500}.stepper-btn[_ngcontent-%COMP%],   .mat-step-header .mat-step-icon-selected{background-color:#027206;color:#fff}.stepper-btn[_ngcontent-%COMP%]{border-radius:6px;margin:10px 20px 0 0;padding:0 30px}.landing-footer[_ngcontent-%COMP%]{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;bottom:0;width:100%;margin:0}form[_ngcontent-%COMP%]{padding-top:8px}"]}),t}();function $t(t,e){1&t&&(u.Sb(0,"mat-icon"),u.Ec(1,"visibility_on"),u.Rb())}function Yt(t,e){1&t&&(u.Sb(0,"mat-icon"),u.Ec(1,"visibility_off"),u.Rb())}var Jt=function(){function t(){this.showPasswordFlag=!1}return t.prototype.ngOnInit=function(){},t.prototype.showPassword=function(t){t.preventDefault(),this.showPasswordFlag=!this.showPasswordFlag},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Gb({type:t,selectors:[["smartstock-login-details-form"]],inputs:{loginFormGroup:"loginFormGroup"},decls:19,vars:4,consts:[[3,"formGroup"],[1,"stepper-inputs"],["appearance","fill"],["matSuffix",""],["matInput","","type","text","formControlName","username","required","",1,"inputs"],["matInput","","formControlName","password","placeholder","Password","required","",1,"inputs",3,"type"],["matSuffix","","mat-icon-button","",3,"click"],[4,"ngIf"]],template:function(t,e){1&t&&(u.Sb(0,"form",0),u.Sb(1,"div",1),u.Sb(2,"mat-form-field",2),u.Sb(3,"mat-label"),u.Ec(4,"Username"),u.Rb(),u.Sb(5,"mat-icon",3),u.Ec(6,"face"),u.Rb(),u.Nb(7,"input",4),u.Sb(8,"mat-error"),u.Ec(9,"Username required, and must be a valid email"),u.Rb(),u.Rb(),u.Sb(10,"mat-form-field",2),u.Sb(11,"mat-label"),u.Ec(12,"Password"),u.Rb(),u.Nb(13,"input",5),u.Sb(14,"mat-error"),u.Ec(15,"Password required, and must be at least 8 character long"),u.Rb(),u.Sb(16,"button",6),u.Zb("click",(function(t){return e.showPassword(t)})),u.Cc(17,$t,2,0,"mat-icon",7),u.Cc(18,Yt,2,0,"mat-icon",7),u.Rb(),u.Rb(),u.Rb(),u.Rb()),2&t&&(u.jc("formGroup",e.loginFormGroup),u.Bb(13),u.jc("type",e.showPasswordFlag?"text":"password"),u.Bb(4),u.jc("ngIf",e.showPasswordFlag),u.Bb(1),u.jc("ngIf",!e.showPasswordFlag))},directives:[b.w,b.p,b.i,S.c,S.f,I.a,S.h,R.b,b.c,b.o,b.h,b.u,S.b,w.a,o.n],styles:[".main-container[_ngcontent-%COMP%]{height:600px;padding-top:16px;padding-bottom:16px}mat-toolbar[_ngcontent-%COMP%]{background-color:#fff}mat-toolbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#027206;text-decoration:none}.stepper-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}  .mat-focused .mat-form-field-label{color:green!important} .mat-form-field-ripple,  .mat-form-field-underline{background-color:green!important}.login-link[_ngcontent-%COMP%]{text-decoration:none;color:#027206;margin:0 auto;padding-left:100px}  .mat-step-header .mat-step-icon{background-color:#55ff5c;color:#fff}  .mat-step-header .mat-step-label{font-size:20px;color:#000;font-weight:500}.stepper-btn[_ngcontent-%COMP%],   .mat-step-header .mat-step-icon-selected{background-color:#027206;color:#fff}.stepper-btn[_ngcontent-%COMP%]{border-radius:6px;margin:10px 20px 0 0;padding:0 30px}.landing-footer[_ngcontent-%COMP%]{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;bottom:0;width:100%;margin:0}form[_ngcontent-%COMP%]{padding-top:8px}"]}),t}();function te(t,e){1&t&&u.Ec(0,"Fill personal details")}function ee(t,e){1&t&&u.Ec(0,"Fill your business details")}function ne(t,e){1&t&&u.Ec(0,"Login Information")}function re(t,e){if(1&t){var n=u.Tb();u.Sb(0,"button",16),u.Zb("click",(function(){return u.tc(n),u.dc().openAccount()})),u.Ec(1," Create Account "),u.Rb()}}function oe(t,e){1&t&&u.Nb(0,"mat-progress-spinner",17),2&t&&u.jc("matTooltip","create account in progress")("diameter",30)}var ie=function(){function t(t,e,n,r,o,i){this._formBuilder=t,this.router=e,this.dialog=n,this.logger=r,this.userDatabase=o,this.messageService=i,this.registerProgress=!1}return t.prototype.ngOnInit=function(){this.initializeForm()},t.prototype.initializeForm=function(){var t=this;this.personalFormGroup=this._formBuilder.group({firstname:["",[b.v.required,b.v.nullValidator]],lastname:["",[b.v.required,b.v.nullValidator]],email:["",[b.v.required,b.v.nullValidator,b.v.email]],mobile:["",[b.v.required,b.v.nullValidator]]}),this.businessFormGroup=this._formBuilder.group({businessName:["",[b.v.required,b.v.nullValidator]],category:["",[b.v.required,b.v.nullValidator]],country:["",[b.v.required,b.v.nullValidator]],region:["",[b.v.required,b.v.nullValidator]],street:["",[b.v.required,b.v.nullValidator]]}),this.loginFormGroup=this._formBuilder.group({username:["",[b.v.required,b.v.nullValidator,b.v.email]],password:["",[b.v.required,b.v.nullValidator,b.v.minLength(8)]]}),this.personalFormGroup.get("email").valueChanges.subscribe((function(e){e&&t.loginFormGroup.get("username").setValue(e)}))},t.prototype.openAccount=function(){var t=this;if(this.businessFormGroup.valid&&this.personalFormGroup.valid&&this.loginFormGroup.valid){var e={};Object.assign(e,this.personalFormGroup.value),Object.assign(e,this.businessFormGroup.value),Object.assign(e,this.loginFormGroup.value),delete e.confPassword,this.registerProgress=!0,this.userDatabase.register(e).then((function(n){t.registerProgress=!1,t.logger.i(n),t.dialog.open(zt,{closeOnNavigation:!0,disableClose:!0,maxWidth:"500px",data:{message:"Account verification email sent to this email: "+e.email+". Verify your account to be able to login"}}).afterClosed().subscribe((function(e){t.router.navigateByUrl("/account/login").catch((function(t){return console.log(t)}))}))})).catch((function(e){t.logger.e(e),t.registerProgress=!1,t.dialog.open(zt,{closeOnNavigation:!0,disableClose:!0,data:{message:e&&e.message?e.message:"Your request was not successful, try again"}})}))}else this.messageService.showMobileInfoMessage("Enter all required information")},t.\u0275fac=function(e){return new(e||t)(u.Mb(b.e),u.Mb(Ot.b),u.Mb(F.b),u.Mb(ut.a),u.Mb(q.a),u.Mb(Ht.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["smartstock-register"]],decls:25,vars:10,consts:[["color","primary",1,"mat-elevation-z2"],["routerLink","/","mat-icon-button",""],["routerLink","/"],[2,"flex","1 1 auto"],[1,"main-container","container"],[1,"register-form","col-xl-9","col-lg-9","col-sm-12","col-md-10","col-12","container-fluid"],[3,"linear"],["stepper",""],[3,"stepControl"],["matStepLabel",""],[3,"personalFormGroup"],[3,"businessFormGroup"],[3,"loginFormGroup"],["mat-button","","matStepperPrevious","",1,"stepper-btn",3,"disabled"],["mat-button","","class","stepper-btn",3,"click",4,"ngIf"],["style","display: inline-block","mode","indeterminate","color","primary",3,"matTooltip","diameter",4,"ngIf"],["mat-button","",1,"stepper-btn",3,"click"],["mode","indeterminate","color","primary",2,"display","inline-block",3,"matTooltip","diameter"]],template:function(t,e){1&t&&(u.Sb(0,"mat-toolbar",0),u.Sb(1,"button",1),u.Sb(2,"mat-icon"),u.Ec(3,"arrow_back"),u.Rb(),u.Rb(),u.Sb(4,"span",2),u.Ec(5,"SmartStock - Register"),u.Rb(),u.Nb(6,"span",3),u.Rb(),u.Sb(7,"div",4),u.Sb(8,"div",5),u.Sb(9,"mat-vertical-stepper",6,7),u.Sb(11,"mat-step",8),u.Cc(12,te,1,0,"ng-template",9),u.Nb(13,"smartstock-personal-details-form",10),u.Rb(),u.Sb(14,"mat-step",8),u.Cc(15,ee,1,0,"ng-template",9),u.Nb(16,"smartstock-business-details-form",11),u.Rb(),u.Sb(17,"mat-step",8),u.Cc(18,ne,1,0,"ng-template",9),u.Nb(19,"smartstock-login-details-form",12),u.Sb(20,"div"),u.Sb(21,"button",13),u.Ec(22,"Back "),u.Rb(),u.Cc(23,re,2,0,"button",14),u.Cc(24,oe,1,2,"mat-progress-spinner",15),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb()),2&t&&(u.Bb(9),u.jc("linear",!0),u.Bb(2),u.jc("stepControl",e.personalFormGroup),u.Bb(2),u.jc("personalFormGroup",e.personalFormGroup),u.Bb(1),u.jc("stepControl",e.businessFormGroup),u.Bb(2),u.jc("businessFormGroup",e.businessFormGroup),u.Bb(1),u.jc("stepControl",e.loginFormGroup),u.Bb(2),u.jc("loginFormGroup",e.loginFormGroup),u.Bb(2),u.jc("disabled",e.registerProgress),u.Bb(2),u.jc("ngIf",!e.registerProgress),u.Bb(1),u.jc("ngIf",e.registerProgress))},directives:[Wt.a,w.a,Ot.c,I.a,Kt.f,Kt.a,Kt.b,Qt,Xt,Jt,Kt.e,o.n,g.a,h.a],styles:[".main-container[_ngcontent-%COMP%]{height:600px;padding-top:16px;padding-bottom:16px}mat-toolbar[_ngcontent-%COMP%]{background-color:#fff}mat-toolbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#027206;text-decoration:none}.stepper-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}  .mat-focused .mat-form-field-label{color:green!important} .mat-form-field-ripple,  .mat-form-field-underline{background-color:green!important}.login-link[_ngcontent-%COMP%]{text-decoration:none;color:#027206;margin:0 auto;padding-left:100px}  .mat-step-header .mat-step-icon{background-color:#55ff5c;color:#fff}  .mat-step-header .mat-step-label{font-size:20px;color:#000;font-weight:500}.stepper-btn[_ngcontent-%COMP%],   .mat-step-header .mat-step-icon-selected{background-color:#027206;color:#fff}.stepper-btn[_ngcontent-%COMP%]{border-radius:6px;margin:10px 20px 0 0;padding:0 30px}.landing-footer[_ngcontent-%COMP%]{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;bottom:0;width:100%;margin:0}form[_ngcontent-%COMP%]{padding-top:8px}"]}),t}(),ae=n("PsOl"),se=n("tk/3"),ce=function(){function t(t,e,n){this._httpClient=t,this._storage=e,this._settings=n}return t.prototype.createShop=function(t){var e=this;return new Promise((function(n,r){return o=e,void 0,a=function(){var e,o;return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._storage.getActiveUser()];case 1:return e=i.sent(),this._httpClient.post(this._settings.ssmFunctionsURL+"/shops/"+e.id,t,{headers:this._settings.ssmFunctionsHeader}).subscribe((function(t){n(t)}),(function(t){r(t)})),[3,3];case 2:return o=i.sent(),r(o),[3,3];case 3:return[2]}}))},new((i=void 0)||(i=Promise))((function(t,e){function n(t){try{s(a.next(t))}catch(n){e(n)}}function r(t){try{s(a.throw(t))}catch(n){e(n)}}function s(e){var o;e.done?t(e.value):(o=e.value,o instanceof i?o:new i((function(t){t(o)}))).then(n,r)}s((a=a.apply(o,[])).next())}));var o,i,a}))},t.\u0275fac=function(e){return new(e||t)(u.Wb(se.a),u.Wb(Z.a),u.Wb(a.a))},t.\u0275prov=u.Ib({token:t,factory:t.\u0275fac}),t}();function le(t,e){1&t&&u.Nb(0,"mat-progress-spinner",23),2&t&&u.jc("diameter",20)}var ue=function(){function t(t,e,n,r,o,i){this.dialogRef=t,this.data=e,this.snack=n,this._storage=r,this._shopApi=o,this.formBuilder=i,this.createShopProgress=!1}return t.prototype.createShop=function(){var t=this;this.createShopForm.valid?(this.createShopProgress=!0,this._shopApi.createShop(this.createShopForm.value).then((function(e){return n=t,void 0,o=function(){var t;return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this._storage.getActiveUser()];case 1:return(t=n.sent()).shops.push(e),[4,this._storage.saveActiveUser(t)];case 2:return n.sent(),this.dialogRef.close(e),this.snack.open("Shop created successful","Ok",{duration:3e3}),this.createShopProgress=!1,[3,4];case 3:return n.sent(),[3,4];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(t,e){function i(t){try{s(o.next(t))}catch(n){e(n)}}function a(t){try{s(o.throw(t))}catch(n){e(n)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(i,a)}s((o=o.apply(n,[])).next())}));var n,r,o})).catch((function(e){t.snack.open(e.message,"Ok",{duration:3e3}),t.createShopProgress=!1}))):this.snack.open("Please fill all required fields","Ok",{duration:3e3})},t.prototype.ngOnInit=function(){this.createShopForm=this.formBuilder.group({businessName:["",[b.v.nullValidator,b.v.required]],country:["",[b.v.nullValidator,b.v.required]],category:["product_provider",[b.v.nullValidator,b.v.required]],region:["",[b.v.nullValidator,b.v.required]],street:["",[b.v.nullValidator,b.v.required]]})},t.prototype.closeDialog=function(t){t.preventDefault(),this.dialogRef.close(null)},t.\u0275fac=function(e){return new(e||t)(u.Mb(F.g),u.Mb(F.a),u.Mb(p.a),u.Mb(Z.a),u.Mb(ce),u.Mb(b.e))},t.\u0275cmp=u.Gb({type:t,selectors:[["ng-component"]],features:[u.Ab([ce])],decls:61,vars:3,consts:[[1,"create-shop-form-container",3,"formGroup","ngSubmit"],["appearance",""],["matInput","","formControlName","businessName","placeholder","Shop Name"],["formControlName","category","required","",1,""],["value","atrists_photographers_creative"],["value","consultants_professionals"],["value","finance_insurance"],["value","product_provider"],["value","service_provider"],["value","hair_spa_aesthetics"],["value","medical_dental_health_service"],["value","nonprofit_associations_groups"],["value","realestate_home"],["value","retailers_and_resellers"],["value","web_media_freelancer"],["matInput","","formControlName","country","placeholder","Country"],["matInput","","formControlName","region","placeholder","Region"],["matInput","","formControlName","street","placeholder","Street/ Location"],[1,""],["color","primary","mat-raised-button","",1,"ft-button","btn-block",3,"disabled"],["style","display: inline-block","mode","indeterminate","color","primary",3,"diameter",4,"ngIf"],[2,"margin-top","6px"],["mat-button","","color","primary",1,"btn-block",3,"click"],["mode","indeterminate","color","primary",2,"display","inline-block",3,"diameter"]],template:function(t,e){1&t&&(u.Sb(0,"div"),u.Sb(1,"form",0),u.Zb("ngSubmit",(function(){return e.createShop()})),u.Sb(2,"mat-form-field",1),u.Sb(3,"mat-label"),u.Ec(4,"Shop Name"),u.Rb(),u.Nb(5,"input",2),u.Sb(6,"mat-error"),u.Ec(7,"Shop name required"),u.Rb(),u.Rb(),u.Sb(8,"mat-form-field"),u.Sb(9,"mat-label"),u.Ec(10,"Shop Category"),u.Rb(),u.Sb(11,"mat-select",3),u.Sb(12,"mat-option",4),u.Ec(13,"Artists, Photographers & Creative Types"),u.Rb(),u.Sb(14,"mat-option",5),u.Ec(15,"Consultants & Professionals"),u.Rb(),u.Sb(16,"mat-option",6),u.Ec(17,"Financial Services"),u.Rb(),u.Sb(18,"mat-option",7),u.Ec(19,"General: I make or sell a PRODUCT"),u.Rb(),u.Sb(20,"mat-option",8),u.Ec(21,"General: I provide a SERVICE"),u.Rb(),u.Sb(22,"mat-option",9),u.Ec(23,"Hair, Spa & Aesthetics"),u.Rb(),u.Sb(24,"mat-option",10),u.Ec(25,"Medical, Dental, Health"),u.Rb(),u.Sb(26,"mat-option",11),u.Ec(27,"Non-profits, Associations & Groups"),u.Rb(),u.Sb(28,"mat-option",12),u.Ec(29,"Real Estate, Construction & Home Improvement"),u.Rb(),u.Sb(30,"mat-option",13),u.Ec(31,"Retailers, Resellers & Sales"),u.Rb(),u.Sb(32,"mat-option",14),u.Ec(33,"Web, Tech & Media"),u.Rb(),u.Rb(),u.Sb(34,"mat-error"),u.Ec(35,"Choose category"),u.Rb(),u.Rb(),u.Sb(36,"mat-form-field",1),u.Sb(37,"mat-label"),u.Ec(38,"Country"),u.Rb(),u.Nb(39,"input",15),u.Sb(40,"mat-error"),u.Ec(41,"Country required"),u.Rb(),u.Rb(),u.Sb(42,"mat-form-field",1),u.Sb(43,"mat-label"),u.Ec(44,"Region"),u.Rb(),u.Nb(45,"input",16),u.Sb(46,"mat-error"),u.Ec(47,"Region required"),u.Rb(),u.Rb(),u.Sb(48,"mat-form-field",1),u.Sb(49,"mat-label"),u.Ec(50,"Street"),u.Rb(),u.Nb(51,"input",17),u.Sb(52,"mat-error"),u.Ec(53,"Street required"),u.Rb(),u.Rb(),u.Sb(54,"div",18),u.Sb(55,"button",19),u.Ec(56," Create Shop "),u.Cc(57,le,1,1,"mat-progress-spinner",20),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Sb(58,"div",21),u.Sb(59,"button",22),u.Zb("click",(function(t){return e.closeDialog(t)})),u.Ec(60," Close "),u.Rb(),u.Rb()),2&t&&(u.Bb(1),u.jc("formGroup",e.createShopForm),u.Bb(54),u.jc("disabled",e.createShopProgress),u.Bb(2),u.jc("ngIf",e.createShopProgress))},directives:[b.w,b.p,b.i,S.c,S.f,R.b,b.c,b.o,b.h,S.b,j.a,b.u,E.n,w.a,o.n,g.a],styles:[".create-shop-form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),t}(),be=n("LRne");function pe(t,e){if(1&t){var n=u.Tb();u.Sb(0,"div",8),u.Zb("click",(function(){u.tc(n);var t=e.$implicit;return u.dc().setCurrentProject(t)})),u.Sb(1,"div",9),u.Sb(2,"mat-icon",10),u.Ec(3,"store"),u.Rb(),u.Rb(),u.Sb(4,"div",11),u.Ec(5),u.Rb(),u.Rb()}if(2&t){var r=e.$implicit;u.Bb(4),u.kc("matTooltip",r.businessName),u.Bb(1),u.Gc(" ",r.businessName," ")}}var me=function(){function t(t,e,n,r,o){this.createShopDialog=t,this._snack=e,this._router=n,this._storage=r,this.userDatabase=o,this.shopDetails={}}return t.prototype.openCreateShopDialog=function(){var t=this;this.createShopDialog.open(ue,{minWidth:350,data:this.shopDetails,disableClose:!0,closeOnNavigation:!0}).afterClosed().subscribe((function(e){e&&t._getShops()}))},t.prototype.ngOnInit=function(){this._getShops()},t.prototype._getShops=function(){var t=this;this.userDatabase.getShops().then((function(e){t.shops=Object(be.a)(e)})).catch((function(e){t._snack.open("Error when fetch available shops","Ok",{duration:3e3})}))},t.prototype.setCurrentProject=function(t){var e=this;this.userDatabase.saveCurrentShop(t).then((function(t){e._router.navigateByUrl("/dashboard").catch((function(t){return console.log(t)}))})).catch((function(t){e._snack.open("Error when trying to save your current shop","Ok",{duration:3e3})}))},t.\u0275fac=function(e){return new(e||t)(u.Mb(F.b),u.Mb(p.a),u.Mb(Ot.b),u.Mb(Z.a),u.Mb(q.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["smartstock-choose-shop"]],decls:10,vars:3,consts:[[1,"main"],[1,"container_shops","d-flex","flex-column","justify-content-start","justify-content-center","align-items-center"],[1,"container_logo","d-flex"],[1,"logo"],["alt","","width","100","src","../../../../assets/img/ss_logo_white%203.svg"],[1,"ct_shops_title","d-flex","justify-content-center",2,"margin-bottom","10px"],[1,"d-flex","flex-wrap","btn-block","justify-content-center"],["class","ct_shop_profile",3,"click",4,"ngFor","ngForOf"],[1,"ct_shop_profile",3,"click"],["matRipple","",1,"shop_profile"],["color","primary",2,"width","70px","height","70px","font-size","70px"],[1,"shop_name","d-flex","justify-content-center",3,"matTooltip"]],template:function(t,e){1&t&&(u.Sb(0,"div",0),u.Sb(1,"div",1),u.Sb(2,"div",2),u.Sb(3,"div",3),u.Nb(4,"img",4),u.Rb(),u.Rb(),u.Sb(5,"div",5),u.Ec(6," Choose Shop "),u.Rb(),u.Sb(7,"div",6),u.Cc(8,pe,6,2,"div",7),u.ec(9,"async"),u.Rb(),u.Rb(),u.Rb()),2&t&&(u.Bb(8),u.jc("ngForOf",u.fc(9,1,e.shops)))},directives:[o.m,E.s,I.a,h.a],pipes:[o.b],styles:[".main[_ngcontent-%COMP%]{background-color:#0b2e13;width:100%}.main[_ngcontent-%COMP%], .main[_ngcontent-%COMP%] > .container_shops[_ngcontent-%COMP%]{min-height:100vh}.ct_shops_title[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;font-style:normal;font-weight:700;font-size:48px;line-height:56px;color:#fff}.container_logo[_ngcontent-%COMP%]{padding-bottom:24px}.ct_shop_profile[_ngcontent-%COMP%]{margin-right:4%}.shop_profile[_ngcontent-%COMP%]{width:150px;height:150px;transition:all .4s ease-in-out;background:#fff;border-radius:4px;display:flex;justify-content:center;align-items:center}.shop_profile[_ngcontent-%COMP%]:hover{transform:scale(1.1);cursor:pointer}.ct_add_shop[_ngcontent-%COMP%]{transition:all .4s ease-in-out;width:150px;height:150px;background:rgba(0,170,7,.96);border-radius:4px}.ct_add_shop[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:#fff;cursor:pointer}.shop_name[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;max-width:148px;font-style:normal;font-weight:400;font-size:24px;line-height:28px;margin-top:7%;color:#fff;overflow:hidden;text-overflow:ellipsis}"]}),t}();function de(t,e){if(1&t&&(u.Sb(0,"mat-option",16),u.Ec(1),u.Rb()),2&t){var n=e.$implicit;u.jc("value",n),u.Bb(1),u.Fc(n.businessName)}}function fe(t,e){1&t&&u.Nb(0,"mat-progress-spinner",17),2&t&&u.jc("diameter",20)}var ge=function(){function t(t,e,n,r,o,i){this.formBuilder=t,this.snack=e,this.storage=n,this.userDatabase=r,this.logger=o,this.dialogRef=i,this.createUserProgress=!1}return t.prototype.ngOnInit=function(){this._getShops(),this.initiateForm()},t.prototype.initiateForm=function(){this.newUserForm=this.formBuilder.group({username:["",[b.v.nullValidator,b.v.required]],password:["",[b.v.nullValidator,b.v.required]],shops:[[],[b.v.nullValidator,b.v.required]],role:["user",[b.v.nullValidator,b.v.required]]})},t.prototype.createUser=function(){var t=this;this.newUserForm.valid?(this.createUserProgress=!0,this.newUserForm.value.username.trim(),this.newUserForm.value.password.trim(),this.userDatabase.addUser(this.newUserForm.value).then((function(e){t.createUserProgress=!1,e.username=t.newUserForm.value.username,e.role=t.newUserForm.value.role,t.dialogRef.close(e),t.snack.open("User created","Ok",{duration:3e3})})).catch((function(e){t.logger.i(e),t.createUserProgress=!1,t.snack.open(e&&e.error&&e.error.message?e.error.message:"User not created, try again","Ok",{duration:3e3})}))):this.snack.open("Please fll all details","Ok",{duration:3e3})},t.prototype.cancel=function(t){t.preventDefault(),this.dialogRef.close(null)},t.prototype._getShops=function(){var t=this;this.userDatabase.getShops().then((function(e){t.shops=Object(be.a)(e)})).catch((function(e){t.logger.e(e,"DialogUserNewComponent:203"),t.shops=Object(be.a)([])}))},t.\u0275fac=function(e){return new(e||t)(u.Mb(b.e),u.Mb(p.a),u.Mb(Z.a),u.Mb(q.a),u.Mb(ut.a),u.Mb(F.g))},t.\u0275cmp=u.Gb({type:t,selectors:[["smartstock-new-user"]],decls:41,vars:7,consts:[[2,"min-width","300px"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"d-flex","flex-column",3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","type","text","formControlName","username","required",""],["autocomplete","false","matInput","","type","text","formControlName","password","required",""],["formControlName","role"],["value","manager"],["value","user"],["formControlName","shops",3,"multiple"],[3,"value",4,"ngFor","ngForOf"],["color","primary","mat-flat-button","",1,"ft-button",3,"disabled"],["style","display: inline-block","mode","indeterminate",3,"diameter",4,"ngIf"],[2,"margin-bottom","8px"],["color","warn","mat-button","",3,"click"],[3,"value"],["mode","indeterminate",2,"display","inline-block",3,"diameter"]],template:function(t,e){1&t&&(u.Sb(0,"div",0),u.Sb(1,"div",1),u.Ec(2,"Create User"),u.Rb(),u.Sb(3,"div",2),u.Sb(4,"form",3),u.Zb("ngSubmit",(function(){return e.createUser()})),u.Sb(5,"mat-form-field",4),u.Sb(6,"mat-label"),u.Ec(7,"Username"),u.Rb(),u.Nb(8,"input",5),u.Sb(9,"mat-error"),u.Ec(10,"Username required"),u.Rb(),u.Rb(),u.Sb(11,"mat-form-field",4),u.Sb(12,"mat-label"),u.Ec(13,"Password"),u.Rb(),u.Nb(14,"input",6),u.Sb(15,"mat-error"),u.Ec(16,"Password required"),u.Rb(),u.Rb(),u.Sb(17,"mat-form-field",4),u.Sb(18,"mat-label"),u.Ec(19,"Roles"),u.Rb(),u.Sb(20,"mat-select",7),u.Sb(21,"mat-option",8),u.Ec(22,"MANAGER"),u.Rb(),u.Sb(23,"mat-option",9),u.Ec(24,"SELLER"),u.Rb(),u.Rb(),u.Sb(25,"mat-error"),u.Ec(26,"Role required"),u.Rb(),u.Rb(),u.Sb(27,"mat-form-field",4),u.Sb(28,"mat-label"),u.Ec(29,"Shop ( s )"),u.Rb(),u.Sb(30,"mat-select",10),u.Cc(31,de,2,2,"mat-option",11),u.ec(32,"async"),u.Rb(),u.Sb(33,"mat-error"),u.Ec(34,"Shop ( s ) required"),u.Rb(),u.Rb(),u.Sb(35,"button",12),u.Ec(36," Save "),u.Cc(37,fe,1,1,"mat-progress-spinner",13),u.Rb(),u.Nb(38,"span",14),u.Sb(39,"button",15),u.Zb("click",(function(t){return e.cancel(t)})),u.Ec(40," Close "),u.Rb(),u.Rb(),u.Rb(),u.Rb()),2&t&&(u.Bb(4),u.jc("formGroup",e.newUserForm),u.Bb(26),u.jc("multiple",!0),u.Bb(1),u.jc("ngForOf",u.fc(32,5,e.shops)),u.Bb(4),u.jc("disabled",e.createUserProgress),u.Bb(2),u.jc("ngIf",e.createUserProgress))},directives:[F.h,F.e,b.w,b.p,b.i,S.c,S.f,R.b,b.c,b.o,b.h,b.u,S.b,j.a,E.n,o.m,w.a,o.n,g.a],pipes:[o.b],styles:["td[_ngcontent-%COMP%]{padding:8px}.my-users-wrapper[_ngcontent-%COMP%]{margin-top:16px}"]}),t}();function he(t,e){1&t&&u.Nb(0,"mat-progress-spinner",7),2&t&&u.jc("diameter",20)}var ve=function(){function t(t,e,n,r,o,i){this.dialogRef=t,this._formBuilder=e,this._snack=n,this.logger=r,this._userApi=o,this.data=i,this.updateProgress=!1}return t.prototype.ngOnInit=function(){this.updatePasswordFormGroup=this._formBuilder.group({password:["",[b.v.required,b.v.nullValidator]]})},t.prototype.updatePassword=function(){var t=this;this.updatePasswordFormGroup.valid?(this.updateProgress=!0,this._userApi.updatePassword(this.data,this.updatePasswordFormGroup.value.password).then((function(e){t._snack.open("Password updated successful","Ok",{duration:3e3}),t.updateProgress=!1,t.dialogRef.close()})).catch((function(e){t.logger.i(e),t._snack.open("Failure when try to update password, try again","Ok",{duration:3e3}),t.updateProgress=!1}))):this._snack.open("Please enter new password","Ok",{duration:3e3})},t.\u0275fac=function(e){return new(e||t)(u.Mb(F.g),u.Mb(b.e),u.Mb(p.a),u.Mb(ut.a),u.Mb(q.a),u.Mb(F.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["smartstock-user-update-password"]],decls:13,vars:4,consts:[[2,"min-width","300px"],["mat-dialog-title",""],[3,"formGroup","ngSubmit"],["appearance","outline",1,"btn-block"],["autocomplete","false","type","text","formControlName","password","matInput",""],["mat-flat-button","","color","primary",1,"btn-block",3,"disabled"],["style","display: inline-block","mode","indeterminate","color","primary",3,"diameter",4,"ngIf"],["mode","indeterminate","color","primary",2,"display","inline-block",3,"diameter"]],template:function(t,e){1&t&&(u.Sb(0,"div",0),u.Sb(1,"h4",1),u.Ec(2),u.Rb(),u.Sb(3,"form",2),u.Zb("ngSubmit",(function(){return e.updatePassword()})),u.Sb(4,"mat-form-field",3),u.Sb(5,"mat-label"),u.Ec(6,"Password"),u.Rb(),u.Nb(7,"input",4),u.Sb(8,"mat-error"),u.Ec(9,"Password required"),u.Rb(),u.Rb(),u.Sb(10,"button",5),u.Ec(11," Update "),u.Cc(12,he,1,1,"mat-progress-spinner",6),u.Rb(),u.Rb(),u.Rb()),2&t&&(u.Bb(2),u.Gc("Password Update for : ",e.data.username,""),u.Bb(1),u.jc("formGroup",e.updatePasswordFormGroup),u.Bb(7),u.jc("disabled",e.updateProgress),u.Bb(2),u.jc("ngIf",e.updateProgress))},directives:[F.h,b.w,b.p,b.i,S.c,S.f,b.c,R.b,b.o,b.h,S.b,w.a,o.n,g.a],styles:["td[_ngcontent-%COMP%]{padding:8px}.my-users-wrapper[_ngcontent-%COMP%]{margin-top:16px}"]}),t}();function ye(t,e){1&t&&u.Nb(0,"mat-progress-spinner",10)}function Se(t,e){if(1&t&&(u.Sb(0,"p",11),u.Ec(1),u.Rb()),2&t){var n=u.dc();u.Bb(1),u.Fc(n.errorUserMessage)}}var Re=function(){function t(t,e,n,r){this.dialogRef=t,this.userDatabase=e,this.logger=n,this.data=r,this.deleteProgress=!1}return t.prototype.deleteUser=function(t){var e=this;this.errorUserMessage=void 0,this.deleteProgress=!0,this.userDatabase.deleteUser(t).then((function(n){e.dialogRef.close(t),e.deleteProgress=!1,e.logger.i(n)})).catch((function(t){e.errorUserMessage=t&&t.message?t.message:t.toString(),e.deleteProgress=!1}))},t.prototype.cancel=function(){this.dialogRef.close(null)},t.\u0275fac=function(e){return new(e||t)(u.Mb(F.g),u.Mb(q.a),u.Mb(ut.a),u.Mb(F.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["smartstock-dialog-user-delete"]],decls:16,vars:5,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"text-center"],[1,"d-flex","justify-content-center"],[1,"align-self-center",2,"margin","8px"],["color","primary","mat-button","",3,"disabled","click"],["matTooltip","Delete in progress...","style","display: inline-block","mode","indeterminate","diameter","15","color","accent",4,"ngIf"],[1,"alert-secondary",2,"margin","8px"],["class","bg-danger",4,"ngIf"],["matTooltip","Delete in progress...","mode","indeterminate","diameter","15","color","accent",2,"display","inline-block"],[1,"bg-danger"]],template:function(t,e){1&t&&(u.Sb(0,"div",0),u.Sb(1,"div",1),u.Sb(2,"div",2),u.Sb(3,"mat-panel-title",3),u.Ec(4," Your about to delete user : "),u.Sb(5,"b"),u.Ec(6),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Sb(7,"div",4),u.Sb(8,"div",5),u.Sb(9,"button",6),u.Zb("click",(function(){return e.deleteUser(e.data)})),u.Ec(10," Delete "),u.Cc(11,ye,1,0,"mat-progress-spinner",7),u.Rb(),u.Rb(),u.Sb(12,"div",8),u.Sb(13,"button",6),u.Zb("click",(function(){return e.cancel()})),u.Ec(14,"Cancel"),u.Rb(),u.Rb(),u.Rb(),u.Cc(15,Se,2,1,"p",9),u.Rb()),2&t&&(u.Bb(6),u.Fc(" "+e.data.username),u.Bb(3),u.jc("disabled",e.deleteProgress),u.Bb(2),u.jc("ngIf",e.deleteProgress),u.Bb(2),u.jc("disabled",e.deleteProgress),u.Bb(2),u.jc("ngIf",e.errorUserMessage))},directives:[M.e,w.a,o.n,g.a,h.a],styles:["td[_ngcontent-%COMP%]{padding:8px}.my-users-wrapper[_ngcontent-%COMP%]{margin-top:16px}"]}),t}(),we=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},Pe=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ke=function(){function t(t){this.userApi=t}return t.prototype.transform=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return we(this,void 0,void 0,(function(){var e;return Pe(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.userApi.getCurrentShop()];case 1:return e=n.sent(),t.push(e),[2,t.map((function(t){return t.businessName}))];case 2:return n.sent(),[2,[]];case 3:return[2]}}))}))},t.\u0275fac=function(e){return new(e||t)(u.Mb(q.a))},t.\u0275pipe=u.Lb({name:"shopsPipe",type:t,pure:!0}),t}(),Ce=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function _e(t,e){1&t&&(u.Sb(0,"th",28),u.Ec(1,"Username"),u.Rb())}function xe(t,e){if(1&t&&(u.Sb(0,"td",29),u.Ec(1),u.Rb()),2&t){var n=e.$implicit;u.Bb(1),u.Gc(" ",n.username," ")}}function Ee(t,e){1&t&&(u.Sb(0,"th",28),u.Ec(1,"Role"),u.Rb())}function Fe(t,e){if(1&t&&(u.Sb(0,"td",29),u.Ec(1),u.Rb()),2&t){var n=e.$implicit;u.Bb(1),u.Gc("","user"===n.role?"SELLER":"MANAGER"," ")}}function Be(t,e){1&t&&(u.Sb(0,"th",28),u.Ec(1,"Shops"),u.Rb())}function Me(t,e){if(1&t&&(u.Sb(0,"td",29),u.Ec(1),u.ec(2,"async"),u.ec(3,"shopsPipe"),u.Rb()),2&t){var n=e.$implicit;u.Bb(1),u.Gc("",u.fc(2,1,u.fc(3,3,n.shops))," ")}}function Ie(t,e){1&t&&(u.Sb(0,"th",28),u.Sb(1,"div",30),u.Ec(2," Actions "),u.Rb(),u.Rb())}function Oe(t,e){if(1&t){var n=u.Tb();u.Sb(0,"td",31),u.Sb(1,"div",30),u.Sb(2,"button",32),u.Sb(3,"mat-icon"),u.Ec(4,"more_vert"),u.Rb(),u.Rb(),u.Sb(5,"mat-menu",null,33),u.Sb(7,"button",15),u.Zb("click",(function(){u.tc(n);var t=e.$implicit;return u.dc(3).deleteUser(t)})),u.Ec(8," Delete "),u.Rb(),u.Sb(9,"button",15),u.Zb("click",(function(){u.tc(n);var t=e.$implicit;return u.dc(3).updatePassword(t)})),u.Ec(10," Update password "),u.Rb(),u.Rb(),u.Rb(),u.Rb()}if(2&t){var r=u.pc(6);u.Bb(2),u.jc("matMenuTriggerFor",r)}}function Ne(t,e){1&t&&u.Nb(0,"tr",34)}function je(t,e){1&t&&u.Nb(0,"tr",35)}function Ue(t,e){if(1&t&&(u.Sb(0,"table",18),u.Qb(1,19),u.Cc(2,_e,2,0,"th",20),u.Cc(3,xe,2,1,"td",21),u.Pb(),u.Qb(4,22),u.Cc(5,Ee,2,0,"th",20),u.Cc(6,Fe,2,1,"td",21),u.Pb(),u.Qb(7,23),u.Cc(8,Be,2,0,"th",20),u.Cc(9,Me,4,5,"td",21),u.Pb(),u.Qb(10,24),u.Cc(11,Ie,3,0,"th",20),u.Cc(12,Oe,11,1,"td",25),u.Pb(),u.Cc(13,Ne,1,0,"tr",26),u.Cc(14,je,1,0,"tr",27),u.Rb()),2&t){var n=u.dc(2);u.jc("dataSource",n.usersDatasource),u.Bb(13),u.jc("matHeaderRowDef",n.usersTableColums),u.Bb(1),u.jc("matRowDefColumns",n.usersTableColums)}}function Ge(t,e){1&t&&(u.Sb(0,"div"),u.Nb(1,"mat-progress-spinner",36),u.Rb()),2&t&&(u.Bb(1),u.jc("diameter",30))}function qe(t,e){if(1&t){var n=u.Tb();u.Sb(0,"mat-sidenav-container",1),u.Sb(1,"mat-sidenav",2,3),u.Nb(3,"smartstock-admin-drawer"),u.Rb(),u.Sb(4,"mat-sidenav-content"),u.Nb(5,"smartstock-toolbar",4),u.Sb(6,"div",5),u.Sb(7,"mat-tab-group",6),u.Sb(8,"mat-tab",7),u.Sb(9,"div",8),u.Sb(10,"mat-card",9),u.Sb(11,"mat-card-title",10),u.Sb(12,"button",11),u.Zb("click",(function(){return u.tc(n),u.dc().openAddUserDialog()})),u.Ec(13," Add User "),u.Rb(),u.Nb(14,"span",12),u.Sb(15,"button",13),u.Sb(16,"mat-icon"),u.Ec(17,"more_vert"),u.Rb(),u.Rb(),u.Sb(18,"mat-menu",null,14),u.Sb(20,"button",15),u.Zb("click",(function(){return u.tc(n),u.dc().getUsers()})),u.Ec(21,"Reload Users"),u.Rb(),u.Rb(),u.Rb(),u.Sb(22,"mat-card-content"),u.Cc(23,Ue,15,3,"table",16),u.Cc(24,Ge,2,1,"div",17),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb()}if(2&t){var r=u.pc(2),o=u.pc(19),i=u.dc();u.Bb(1),u.jc("fixedInViewport",!0)("mode",i.enoughWidth()?"side":"over")("opened",!0),u.Bb(4),u.jc("sidenav",r)("showProgress",!1),u.Bb(10),u.jc("matMenuTriggerFor",o),u.Bb(8),u.jc("ngIf",!i.fetchUsersFlag&&i.usersArray&&i.usersArray.length>0),u.Bb(1),u.jc("ngIf",i.fetchUsersFlag)}}var Ae=function(t){function e(e,n,r,o,i){var a=t.call(this)||this;return a.userDatabase=e,a.formBuilder=n,a.dialog=r,a.logger=o,a.snack=i,a.usersTableColums=["name","role","shops","actions"],a.fetchUsersFlag=!1,a.isMobile=s.a.android,a}return Ce(e,t),e.prototype.ngOnInit=function(){this.getUsers()},e.prototype.searchUser=function(t){},e.prototype.getUsers=function(){var t=this;this.fetchUsersFlag=!0,this.userDatabase.getAllUser({size:100,skip:0}).then((function(e){t.usersArray=JSON.parse(JSON.stringify(e)),t.usersDatasource=new U.o(t.usersArray),t.fetchUsersFlag=!1})).catch((function(e){t.logger.i(e),t.fetchUsersFlag=!1}))},e.prototype.deleteUser=function(t){var e=this;this.dialog.open(Re,{data:t,disableClose:!0}).afterClosed().subscribe((function(n){n?(e.usersArray=e.usersArray.filter((function(e){return e.id!==t.id})),e.usersDatasource=new U.o(e.usersArray),e.snack.open("User deleted","Ok",{duration:2e3})):e.snack.open("User not deleted","Ok",{duration:2e3})}))},e.prototype.updateUserName=function(t,e){},e.prototype.updateUser=function(t){},e.prototype.updateUserDescription=function(t,e){},e.prototype.openAddUserDialog=function(){var t=this;this.dialog.open(ge,{closeOnNavigation:!0,hasBackdrop:!0}).afterClosed().subscribe((function(e){e&&(t.usersArray.push(e),t.usersDatasource.data=t.usersArray)}))},e.prototype.updatePassword=function(t){this.dialog.open(ve,{data:t})},e.\u0275fac=function(t){return new(t||e)(u.Mb(q.a),u.Mb(b.e),u.Mb(F.b),u.Mb(ut.a),u.Mb(p.a))},e.\u0275cmp=u.Gb({type:e,selectors:[["smartstock-users"]],features:[u.yb],decls:1,vars:1,consts:[["class","match-parent",4,"ngIf"],[1,"match-parent"],[1,"match-parent-side",3,"fixedInViewport","mode","opened"],["sidenav",""],[3,"heading","sidenav","showProgress"],[1,"container","my-users-wrapper"],[1,"container"],["label","All Users"],[1,""],[1,"mat-elevation-z0"],[1,"d-flex","flex-row"],["color","primary","mat-flat-button","",1,"ft-button",3,"click"],[1,"toolbar-spacer"],["mat-icon-button","",3,"matMenuTriggerFor"],["menuUsers",""],["mat-menu-item","",3,"click"],["style","margin-top: 16px","class","my-input","mat-table","",3,"dataSource",4,"ngIf"],[4,"ngIf"],["mat-table","",1,"my-input",2,"margin-top","16px",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","","matRipple","","mat-cell","",4,"matCellDef"],["matColumnDef","role"],["matColumnDef","shops"],["matColumnDef","actions"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","table-data-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["matRipple","","mat-cell","",1,""],[1,"d-flex","justify-content-end","align-items-end"],["mat-cell",""],["color","primary","mat-icon-button","",3,"matMenuTriggerFor"],["opts",""],["mat-header-row",""],["mat-row","",1,"table-data-row"],["matTooltip","fetch users","mode","indeterminate","color","primary",3,"diameter"]],template:function(t,e){1&t&&u.Cc(0,qe,25,8,"mat-sidenav-container",0),2&t&&u.jc("ngIf",!e.isMobile)},directives:[o.n,m.b,m.a,d.a,m.c,f.a,G.b,G.a,v.a,v.h,w.a,O.d,I.a,O.e,O.b,v.c,U.n,U.c,U.i,U.b,U.k,U.m,U.h,U.a,E.s,U.j,U.l,g.a,h.a],pipes:[o.b,ke],styles:["td[_ngcontent-%COMP%]{padding:8px}.my-users-wrapper[_ngcontent-%COMP%]{margin-top:16px}"]}),e}(c.a),Te=function(){function t(t,e){this.storageService=t,this.router=e}return t.prototype.canActivate=function(t,e){var n=this;return new Promise((function(t,e){n.storageService.getActiveUser().then((function(e){e&&e.applicationId&&e.projectUrlId&&e.projectId&&"admin"===e.role?n.router.navigateByUrl("/dashboard").catch((function(t){return console.log(t)})):e&&e.applicationId&&e.projectUrlId&&e.projectId&&"user"===e.role||e&&e.applicationId&&e.projectUrlId&&e.projectId&&"manager"===e.role?n.router.navigateByUrl("/sale").catch((function(t){return console.log(t)})):t(!0)})).catch((function(t){n.router.navigateByUrl("/account/login").catch((function(t){return console.log(t)})),e(!1)}))}))},t.\u0275fac=function(e){return new(e||t)(u.Wb(Z.a),u.Wb(Ot.b))},t.\u0275prov=u.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),De=n("n/7q"),Le=[{path:"",redirectTo:"profile",pathMatch:"full"},{path:"settings",canActivate:[Nt.a,De.a],component:x},{path:"shop",canActivate:[ae.a],component:me},{path:"login",canActivate:[Te],component:Zt},{path:"register",canActivate:[Te],component:ie},{path:"bill",canActivate:[Nt.a,De.a],component:It},{path:"users",canActivate:[Nt.a,De.a],component:Ae},{path:"profile",canActivate:[ae.a,De.a],component:ct}],Ve=function(){function t(){}return t.\u0275mod=u.Kb({type:t}),t.\u0275inj=u.Jb({factory:function(e){return new(e||t)},imports:[[o.c,Ot.e.forChild(Le),m.d,jt.a,v.f,S.e,y.b,h.b,R.c,b.t,w.b,g.b,G.c,O.c,I.b,U.p,M.b,F.f,j.b,E.t,B.b,N.a,b.k,dt.d,pt.c,Kt.c,Wt.b,Gt.b]]}),t}()}}]);