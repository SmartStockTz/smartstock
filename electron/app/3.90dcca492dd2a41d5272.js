(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"/KH0":function(t,e,n){"use strict";n.d(e,"c",(function(){return J})),n.d(e,"a",(function(){return H})),n.d(e,"b",(function(){return B}));var o=n("ea4N"),r=n("ETwC"),i=n("QJY3"),a=n("eUy1"),c=n("TYT/"),s=n("5msO"),l=n("17Os"),b=n("p+mS"),u=n("OJ6B"),d=n("GsDI"),p=n("Valr"),m=n("MqYC"),f=n("eHTH"),g=n("cSbt"),h=n("uad8"),v=n("2J1J"),U=n("dOeY");function y(t,e){1&t&&(c.Vb(0,"th",20),c.Gc(1,"Name"),c.Ub())}function V(t,e){if(1&t){var n=c.Wb();c.Vb(0,"div",25),c.dc("click",(function(t){return c.xc(n),t.stopPropagation()})),c.Vb(1,"mat-form-field",26),c.Vb(2,"mat-label"),c.Gc(3,"Name"),c.Ub(),c.Qb(4,"input",27),c.Ub(),c.Vb(5,"button",28),c.dc("click",(function(){c.xc(n);var t=e.objectId;c.hc();var o=c.tc(1),r=c.hc(2);return r.updateSupplierName({objectId:t,value:r.nameFormControl.value},o)})),c.Gc(6,"Update "),c.Ub(),c.Ub()}if(2&t){var o=e.data,r=c.hc(3);c.Cb(4),c.nc("value",o)("formControl",r.nameFormControl)}}var k=function(t,e){return{objectId:t,data:e}};function C(t,e){if(1&t&&(c.Vb(0,"td",21,22),c.Gc(2),c.Vb(3,"mat-menu",null,23),c.Ec(5,V,7,2,"ng-template",24),c.Ub(),c.Ub()),2&t){var n=e.$implicit,o=c.tc(4);c.nc("matMenuTriggerFor",o)("matMenuTriggerData",c.rc(3,k,n.objectId,n.name)),c.Cb(2),c.Ic("",n.name," ")}}function w(t,e){1&t&&(c.Vb(0,"th",20),c.Gc(1,"Mobile"),c.Ub())}function x(t,e){if(1&t){var n=c.Wb();c.Vb(0,"div",25),c.dc("click",(function(t){return c.xc(n),t.stopPropagation()})),c.Vb(1,"mat-form-field",26),c.Vb(2,"mat-label"),c.Gc(3,"Mobile"),c.Ub(),c.Qb(4,"textarea",27),c.Ub(),c.Vb(5,"button",28),c.dc("click",(function(){c.xc(n);var t=e.objectId;c.hc();var o=c.tc(1),r=c.hc(2);return r.updateSupplierMobile({objectId:t,value:r.mobileFormControl.value},o)})),c.Gc(6,"Update "),c.Ub(),c.Ub()}if(2&t){var o=e.data,r=c.hc(3);c.Cb(4),c.nc("value",o)("formControl",r.mobileFormControl)}}function S(t,e){if(1&t&&(c.Vb(0,"td",21,29),c.Gc(2),c.Vb(3,"mat-menu",null,30),c.Ec(5,x,7,2,"ng-template",31),c.Ub(),c.Ub()),2&t){var n=e.$implicit,o=c.tc(4);c.nc("matMenuTriggerFor",o)("matMenuTriggerData",c.rc(3,k,n.objectId,n.number)),c.Cb(2),c.Ic("",n.number," ")}}function P(t,e){1&t&&(c.Vb(0,"th",20),c.Gc(1,"Email"),c.Ub())}function G(t,e){if(1&t){var n=c.Wb();c.Vb(0,"div",25),c.dc("click",(function(t){return c.xc(n),t.stopPropagation()})),c.Vb(1,"mat-form-field",26),c.Vb(2,"mat-label"),c.Gc(3,"Email"),c.Ub(),c.Qb(4,"textarea",27),c.Ub(),c.Vb(5,"button",28),c.dc("click",(function(){c.xc(n);var t=e.objectId;c.hc();var o=c.tc(1),r=c.hc(2);return r.updateSupplierEmail({objectId:t,value:r.emailFormControl.value},o)})),c.Gc(6,"Update "),c.Ub(),c.Ub()}if(2&t){var o=e.data,r=c.hc(3);c.Cb(4),c.nc("value",o)("formControl",r.emailFormControl)}}function F(t,e){if(1&t&&(c.Vb(0,"td",21,32),c.Gc(2),c.Vb(3,"mat-menu",null,33),c.Ec(5,G,7,2,"ng-template",31),c.Ub(),c.Ub()),2&t){var n=e.$implicit,o=c.tc(4);c.nc("matMenuTriggerFor",o)("matMenuTriggerData",c.rc(3,k,n.objectId,n.email)),c.Cb(2),c.Ic("",n.email," ")}}function D(t,e){1&t&&(c.Vb(0,"th",20),c.Gc(1,"Address"),c.Ub())}function I(t,e){if(1&t){var n=c.Wb();c.Vb(0,"div",25),c.dc("click",(function(t){return c.xc(n),t.stopPropagation()})),c.Vb(1,"mat-form-field",26),c.Vb(2,"mat-label"),c.Gc(3,"Address"),c.Ub(),c.Qb(4,"textarea",27),c.Ub(),c.Vb(5,"button",28),c.dc("click",(function(){c.xc(n);var t=e.objectId;c.hc();var o=c.tc(1),r=c.hc(2);return r.updateSupplierAddress({objectId:t,value:r.addressFormControl.value},o)})),c.Gc(6,"Update "),c.Ub(),c.Ub()}if(2&t){var o=e.data,r=c.hc(3);c.Cb(4),c.nc("value",o)("formControl",r.addressFormControl)}}function T(t,e){if(1&t&&(c.Vb(0,"td",21,34),c.Gc(2),c.Vb(3,"mat-menu",null,35),c.Ec(5,I,7,2,"ng-template",31),c.Ub(),c.Ub()),2&t){var n=e.$implicit,o=c.tc(4);c.nc("matMenuTriggerFor",o)("matMenuTriggerData",c.rc(3,k,n.objectId,n.address)),c.Cb(2),c.Ic("",n.address," ")}}function M(t,e){1&t&&c.Qb(0,"th",20)}function O(t,e){if(1&t){var n=c.Wb();c.Vb(0,"td",36),c.Vb(1,"div",37),c.Vb(2,"button",38),c.Vb(3,"mat-icon"),c.Gc(4,"more_vert"),c.Ub(),c.Ub(),c.Vb(5,"mat-menu",null,39),c.Vb(7,"button",6),c.dc("click",(function(){c.xc(n);var t=e.$implicit;return c.hc(2).deleteSupplier(t)})),c.Gc(8," Delete "),c.Ub(),c.Ub(),c.Ub(),c.Ub()}if(2&t){var o=c.tc(6);c.Cb(2),c.nc("matMenuTriggerFor",o)}}function E(t,e){1&t&&c.Qb(0,"tr",40)}function A(t,e){1&t&&c.Qb(0,"tr",41)}function j(t,e){if(1&t&&(c.Vb(0,"table",9),c.Tb(1,10),c.Ec(2,y,2,0,"th",11),c.Ec(3,C,6,6,"td",12),c.Sb(),c.Tb(4,13),c.Ec(5,w,2,0,"th",11),c.Ec(6,S,6,6,"td",12),c.Sb(),c.Tb(7,14),c.Ec(8,P,2,0,"th",11),c.Ec(9,F,6,6,"td",12),c.Sb(),c.Tb(10,15),c.Ec(11,D,2,0,"th",11),c.Ec(12,T,6,6,"td",12),c.Sb(),c.Tb(13,16),c.Ec(14,M,1,0,"th",11),c.Ec(15,O,9,1,"td",17),c.Sb(),c.Ec(16,E,1,0,"tr",18),c.Ec(17,A,1,0,"tr",19),c.Ub()),2&t){var n=c.hc();c.nc("dataSource",n.suppliersDatasource),c.Cb(16),c.nc("matHeaderRowDef",n.suppliersTableColums),c.Cb(1),c.nc("matRowDefColumns",n.suppliersTableColums)}}function R(t,e){1&t&&(c.Vb(0,"div"),c.Qb(1,"mat-progress-spinner",42),c.Ub()),2&t&&(c.Cb(1),c.nc("diameter",30))}function Q(t,e){1&t&&c.Qb(0,"mat-progress-spinner",11)}function _(t,e){if(1&t&&(c.Vb(0,"p",12),c.Gc(1),c.Ub()),2&t){var n=c.hc();c.Cb(1),c.Hc(n.errorSupplierMessage)}}function N(t,e){1&t&&c.Qb(0,"mat-progress-spinner",13),2&t&&c.nc("diameter",20)}var J=function(){function t(t,e,n,o){this.stockDatabase=t,this.formBuilder=e,this.dialog=n,this.snack=o,this.suppliersTableColums=["name","email","mobile","address","actions"],this.fetchSuppliersFlag=!1,this.nameFormControl=new i.g,this.descriptionFormControl=new i.g,this.addressFormControl=new i.g,this.emailFormControl=new i.g,this.mobileFormControl=new i.g}return t.prototype.ngOnInit=function(){this.getSuppliers()},t.prototype.searchSupplier=function(t){},t.prototype.getSuppliers=function(){var t=this;this.fetchSuppliersFlag=!0,this.stockDatabase.getAllSupplier({size:100}).then((function(e){t.suppliersArray=JSON.parse(JSON.stringify(e)),t.suppliersDatasource=new r.o(t.suppliersArray),t.fetchSuppliersFlag=!1})).catch((function(e){console.log(e),t.fetchSuppliersFlag=!1}))},t.prototype.deleteSupplier=function(t){var e=this;this.dialog.open(H,{data:t,disableClose:!0}).afterClosed().subscribe((function(n){n?(e.suppliersArray=e.suppliersArray.filter((function(e){return e.objectId!==t.objectId})),e.suppliersDatasource=new r.o(e.suppliersArray),e.snack.open("Supplier deleted","Ok",{duration:2e3})):e.snack.open("Supplier not deleted","Ok",{duration:2e3})}))},t.prototype.updateSupplierName=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="name",this.updateSupplier(t))},t.prototype.updateSupplier=function(t){var e=this;this.snack.open("Update in progress..","Ok"),this.stockDatabase.updateSupplier(t).then((function(n){var o=e.suppliersArray.findIndex((function(t){return t.objectId===n.objectId}));if(e.suppliersArray=e.suppliersArray.filter((function(e){return e.objectId!==t.objectId})),-1!==o){var r=e.suppliersArray[o];r[t.field]=t.value,e.suppliersDatasource.data[o]=r}else console.warn("fails to update supplier table");e.snack.open("Supplier updated","Ok",{duration:3e3})})).catch((function(t){e.snack.open("Fail to update supplier","Ok",{duration:3e3})}))},t.prototype.openAddSupplierDialog=function(){var t=this;this.dialog.open(B,{closeOnNavigation:!0,hasBackdrop:!0}).afterClosed().subscribe((function(e){e&&(t.suppliersArray.push(e),t.suppliersDatasource.data=t.suppliersArray)}))},t.prototype.updateSupplierEmail=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="email",this.updateSupplier(t))},t.prototype.updateSupplierAddress=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="address",this.updateSupplier(t))},t.prototype.updateSupplierMobile=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="number",this.updateSupplier(t))},t.\u0275fac=function(e){return new(e||t)(c.Pb(a.a),c.Pb(i.f),c.Pb(o.b),c.Pb(s.a))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-suppliers"]],decls:15,vars:3,consts:[[1,"mat-elevation-z0"],[1,"d-flex","flex-row"],["color","primary","mat-flat-button","",1,"ft-button",3,"click"],[1,"toolbar-spacer"],["mat-icon-button","",3,"matMenuTriggerFor"],["menuSuppliers",""],["mat-menu-item","",3,"click"],["style","margin-top: 16px","class","my-input","mat-table","",3,"dataSource",4,"ngIf"],[4,"ngIf"],["mat-table","",1,"my-input",2,"margin-top","16px",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","editable","matRipple","","mat-cell","",3,"matMenuTriggerFor","matMenuTriggerData",4,"matCellDef"],["matColumnDef","mobile"],["matColumnDef","email"],["matColumnDef","address"],["matColumnDef","actions"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","table-data-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["matRipple","","mat-cell","",1,"editable",3,"matMenuTriggerFor","matMenuTriggerData"],["nameMenuTrigger","matMenuTrigger"],["nameMenu",""],["matMenuContent",""],[2,"padding","16px",3,"click"],["appearance","outline",1,"my-input"],["matInput","",3,"value","formControl"],["mat-button","",3,"click"],["mobileMenuTrigger","matMenuTrigger"],["mobileMenu",""],["style","padding: 16px","matMenuContent",""],["emailMenuTrigger","matMenuTrigger"],["emailMenu",""],["addressMenuTrigger","matMenuTrigger"],["addressMenu",""],["mat-cell",""],[1,"d-flex","justify-content-end","align-items-end"],["color","primary","mat-icon-button","",3,"matMenuTriggerFor"],["opts",""],["mat-header-row",""],["mat-row","",1,"table-data-row"],["matTooltip","fetch suppliers","mode","indeterminate","color","primary",3,"diameter"]],template:function(t,e){if(1&t&&(c.Vb(0,"mat-card",0),c.Vb(1,"mat-card-title",1),c.Vb(2,"button",2),c.dc("click",(function(){return e.openAddSupplierDialog()})),c.Gc(3," Add Supplier "),c.Ub(),c.Qb(4,"span",3),c.Vb(5,"button",4),c.Vb(6,"mat-icon"),c.Gc(7,"more_vert"),c.Ub(),c.Ub(),c.Vb(8,"mat-menu",null,5),c.Vb(10,"button",6),c.dc("click",(function(){return e.getSuppliers()})),c.Gc(11,"Reload Suppliers"),c.Ub(),c.Ub(),c.Ub(),c.Vb(12,"mat-card-content"),c.Ec(13,j,18,3,"table",7),c.Ec(14,R,2,1,"div",8),c.Ub(),c.Ub()),2&t){var n=c.tc(9);c.Cb(5),c.nc("matMenuTriggerFor",n),c.Cb(8),c.nc("ngIf",!e.fetchSuppliersFlag&&e.suppliersArray&&e.suppliersArray.length>0),c.Cb(1),c.nc("ngIf",e.fetchSuppliersFlag)}},directives:[l.a,l.m,b.b,u.d,d.a,u.e,u.b,l.d,p.t,r.n,r.c,r.i,r.b,r.k,r.m,r.h,r.a,m.s,u.a,f.b,f.f,g.b,i.c,i.r,i.h,r.j,r.l,h.a,v.a],styles:[""]}),t}(),H=function(){function t(t,e,n){this.dialogRef=t,this.stockDatabase=e,this.data=n,this.deleteProgress=!1}return t.prototype.deleteSupplier=function(t){var e=this;this.errorSupplierMessage=void 0,this.deleteProgress=!0,this.stockDatabase.deleteSupplier(t.objectId).then((function(n){e.dialogRef.close(t),e.deleteProgress=!1})).catch((function(t){e.errorSupplierMessage="Fails to delete supplier, try again",e.deleteProgress=!1}))},t.prototype.cancel=function(){this.dialogRef.close(null)},t.\u0275fac=function(e){return new(e||t)(c.Pb(o.h),c.Pb(a.a),c.Pb(o.a))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-dialog-delete"]],decls:16,vars:5,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"text-center"],[1,"d-flex","justify-content-center"],[1,"align-self-center",2,"margin","8px"],["color","primary","mat-button","",3,"disabled","click"],["matTooltip","Delete in progress...","style","display: inline-block","mode","indeterminate","diameter","15","color","accent",4,"ngIf"],[1,"alert-secondary",2,"margin","8px"],["mat-dialog-close","","color","primary","mat-button","",3,"disabled","click"],["class","bg-danger",4,"ngIf"],["matTooltip","Delete in progress...","mode","indeterminate","diameter","15","color","accent",2,"display","inline-block"],[1,"bg-danger"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Vb(2,"div",2),c.Vb(3,"mat-panel-title",3),c.Gc(4," Your about to delete : "),c.Vb(5,"b"),c.Gc(6),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(7,"div",4),c.Vb(8,"div",5),c.Vb(9,"button",6),c.dc("click",(function(){return e.deleteSupplier(e.data)})),c.Gc(10," Delete "),c.Ec(11,Q,1,0,"mat-progress-spinner",7),c.Ub(),c.Ub(),c.Vb(12,"div",8),c.Vb(13,"button",9),c.dc("click",(function(){return e.cancel()})),c.Gc(14,"Cancel"),c.Ub(),c.Ub(),c.Ub(),c.Ec(15,_,2,1,"p",10),c.Ub()),2&t&&(c.Cb(6),c.Hc(" "+e.data.name),c.Cb(3),c.nc("disabled",e.deleteProgress),c.Cb(2),c.nc("ngIf",e.deleteProgress),c.Cb(2),c.nc("disabled",e.deleteProgress),c.Cb(2),c.nc("ngIf",e.errorSupplierMessage))},directives:[U.h,b.b,p.t,o.d,h.a,v.a],encapsulation:2}),t}(),B=function(){function t(t,e,n,o){this.formBuilder=t,this.snack=e,this.stockDatabase=n,this.dialogRef=o,this.createSupplierProgress=!1}return t.prototype.ngOnInit=function(){this.initiateForm()},t.prototype.initiateForm=function(){this.newSupplierForm=this.formBuilder.group({name:["",[i.F.nullValidator,i.F.required]],email:[""],number:[""],address:[""]})},t.prototype.createSupplier=function(){var t=this;this.newSupplierForm.valid?(this.createSupplierProgress=!0,this.stockDatabase.addSupplier(this.newSupplierForm.value).then((function(e){t.createSupplierProgress=!1,e.name=t.newSupplierForm.value.name,e.email=t.newSupplierForm.value.email,e.mobile=t.newSupplierForm.value.mobile,e.address=t.newSupplierForm.value.address,t.dialogRef.close(e),t.snack.open("Supplier created","Ok",{duration:3e3})})).catch((function(e){console.log(e),t.createSupplierProgress=!1,t.snack.open("Supplier not created, try again","Ok",{duration:3e3})}))):this.snack.open("Please fll all details","Ok",{duration:3e3})},t.prototype.cancel=function(t){t.preventDefault(),this.dialogRef.close(null)},t.\u0275fac=function(e){return new(e||t)(c.Pb(i.f),c.Pb(s.a),c.Pb(a.a),c.Pb(o.h))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-new-supplier"]],decls:35,vars:3,consts:[[2,"min-width","300px"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"d-flex","flex-column",3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","type","text","formControlName","name","required",""],["matInput","","formControlName","email"],["matInput","","formControlName","number"],["matInput","","formControlName","address","rows","2"],["color","primary","mat-flat-button","",1,"ft-button",3,"disabled"],["style","display: inline-block","mode","indeterminate",3,"diameter",4,"ngIf"],["mat-dialog-close","","mat-button","","color","warn",1,"btn-block"],[2,"margin-bottom","8px"],["mode","indeterminate",2,"display","inline-block",3,"diameter"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Gc(2,"Create Supplier"),c.Ub(),c.Vb(3,"div",2),c.Vb(4,"form",3),c.dc("ngSubmit",(function(){return e.createSupplier()})),c.Vb(5,"mat-form-field",4),c.Vb(6,"mat-label"),c.Gc(7,"Name"),c.Ub(),c.Qb(8,"input",5),c.Vb(9,"mat-error"),c.Gc(10,"Name required"),c.Ub(),c.Ub(),c.Vb(11,"mat-form-field",4),c.Vb(12,"mat-label"),c.Gc(13,"Email"),c.Ub(),c.Qb(14,"input",6),c.Vb(15,"mat-error"),c.Gc(16,"Email required"),c.Ub(),c.Ub(),c.Vb(17,"mat-form-field",4),c.Vb(18,"mat-label"),c.Gc(19,"Mobile"),c.Ub(),c.Qb(20,"input",7),c.Vb(21,"mat-error"),c.Gc(22,"Mobile required"),c.Ub(),c.Ub(),c.Vb(23,"mat-form-field",4),c.Vb(24,"mat-label"),c.Gc(25,"Address"),c.Ub(),c.Qb(26,"textarea",8),c.Vb(27,"mat-error"),c.Gc(28,"Address required"),c.Ub(),c.Ub(),c.Vb(29,"button",9),c.Gc(30," Save "),c.Ec(31,N,1,1,"mat-progress-spinner",10),c.Ub(),c.Vb(32,"button",11),c.Gc(33,"Close"),c.Ub(),c.Qb(34,"span",12),c.Ub(),c.Ub(),c.Ub()),2&t&&(c.Cb(4),c.nc("formGroup",e.newSupplierForm),c.Cb(25),c.nc("disabled",e.createSupplierProgress),c.Cb(2),c.nc("ngIf",e.createSupplierProgress))},directives:[o.i,o.f,i.H,i.s,i.j,f.b,f.f,g.b,i.c,i.r,i.i,i.C,f.a,b.b,p.t,o.d,h.a],encapsulation:2}),t}()},"4DNZ":function(t,e,n){"use strict";n.d(e,"c",(function(){return Q})),n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return N}));var o=n("ea4N"),r=n("ETwC"),i=n("QJY3"),a=n("eUy1"),c=n("TYT/"),s=n("5msO"),l=n("17Os"),b=n("p+mS"),u=n("OJ6B"),d=n("GsDI"),p=n("Valr"),m=n("MqYC"),f=n("eHTH"),g=n("cSbt"),h=n("uad8"),v=n("2J1J"),U=n("dOeY");function y(t,e){1&t&&(c.Vb(0,"th",19),c.Gc(1,"Name"),c.Ub())}function V(t,e){if(1&t){var n=c.Wb();c.Vb(0,"div",24),c.dc("click",(function(t){return c.xc(n),t.stopPropagation()})),c.Vb(1,"mat-form-field",25),c.Vb(2,"mat-label"),c.Gc(3,"Name"),c.Ub(),c.Qb(4,"input",26),c.Ub(),c.Vb(5,"button",27),c.dc("click",(function(){c.xc(n);var t=e.objectId;c.hc();var o=c.tc(1),r=c.hc(2);return r.updateUnitName({objectId:t,value:r.nameFormControl.value},o)})),c.Gc(6,"Update "),c.Ub(),c.Ub()}if(2&t){var o=e.data,r=c.hc(3);c.Cb(4),c.nc("value",o)("formControl",r.nameFormControl)}}var k=function(t,e){return{objectId:t,data:e}};function C(t,e){if(1&t&&(c.Vb(0,"td",20,21),c.Gc(2),c.Vb(3,"mat-menu",null,22),c.Ec(5,V,7,2,"ng-template",23),c.Ub(),c.Ub()),2&t){var n=e.$implicit,o=c.tc(4);c.nc("matMenuTriggerFor",o)("matMenuTriggerData",c.rc(3,k,n.objectId,n.name)),c.Cb(2),c.Ic("",n.name," ")}}function w(t,e){1&t&&(c.Vb(0,"th",19),c.Gc(1,"Abbreviation"),c.Ub())}function x(t,e){if(1&t){var n=c.Wb();c.Vb(0,"div",24),c.dc("click",(function(t){return c.xc(n),t.stopPropagation()})),c.Vb(1,"mat-form-field",25),c.Vb(2,"mat-label"),c.Gc(3,"Abbreviation"),c.Ub(),c.Qb(4,"input",26),c.Ub(),c.Vb(5,"button",27),c.dc("click",(function(){c.xc(n);var t=e.objectId;c.hc();var o=c.tc(1),r=c.hc(2);return r.updateUnitAbbreviation({objectId:t,value:r.abbreviationFormControl.value},o)})),c.Gc(6,"Update "),c.Ub(),c.Ub()}if(2&t){var o=e.data,r=c.hc(3);c.Cb(4),c.nc("value",o)("formControl",r.abbreviationFormControl)}}function S(t,e){if(1&t&&(c.Vb(0,"td",20,21),c.Gc(2),c.Vb(3,"mat-menu",null,28),c.Ec(5,x,7,2,"ng-template",23),c.Ub(),c.Ub()),2&t){var n=e.$implicit,o=c.tc(4);c.nc("matMenuTriggerFor",o)("matMenuTriggerData",c.rc(3,k,n.objectId,n.abbreviation)),c.Cb(2),c.Ic("",n.abbreviation," ")}}function P(t,e){1&t&&(c.Vb(0,"th",19),c.Gc(1,"Description"),c.Ub())}function G(t,e){if(1&t){var n=c.Wb();c.Vb(0,"div",24),c.dc("click",(function(t){return c.xc(n),t.stopPropagation()})),c.Vb(1,"mat-form-field",25),c.Vb(2,"mat-label"),c.Gc(3,"Description"),c.Ub(),c.Qb(4,"textarea",26),c.Ub(),c.Vb(5,"button",27),c.dc("click",(function(){c.xc(n);var t=e.objectId;c.hc();var o=c.tc(1),r=c.hc(2);return r.updateUnitDescription({objectId:t,value:r.descriptionFormControl.value},o)})),c.Gc(6,"Update "),c.Ub(),c.Ub()}if(2&t){var o=e.data,r=c.hc(3);c.Cb(4),c.nc("value",o)("formControl",r.descriptionFormControl)}}function F(t,e){if(1&t&&(c.Vb(0,"td",20,29),c.Gc(2),c.Vb(3,"mat-menu",null,30),c.Ec(5,G,7,2,"ng-template",31),c.Ub(),c.Ub()),2&t){var n=e.$implicit,o=c.tc(4);c.nc("matMenuTriggerFor",o)("matMenuTriggerData",c.rc(3,k,n.objectId,n.description)),c.Cb(2),c.Ic("",n.description," ")}}function D(t,e){1&t&&(c.Vb(0,"th",19),c.Vb(1,"div",32),c.Gc(2," Actions "),c.Ub(),c.Ub())}function I(t,e){if(1&t){var n=c.Wb();c.Vb(0,"td",33),c.Vb(1,"div",32),c.Vb(2,"button",34),c.Vb(3,"mat-icon"),c.Gc(4,"more_vert"),c.Ub(),c.Ub(),c.Vb(5,"mat-menu",null,35),c.Vb(7,"button",6),c.dc("click",(function(){c.xc(n);var t=e.$implicit;return c.hc(2).deleteUnit(t)})),c.Gc(8," Delete "),c.Ub(),c.Ub(),c.Ub(),c.Ub()}if(2&t){var o=c.tc(6);c.Cb(2),c.nc("matMenuTriggerFor",o)}}function T(t,e){1&t&&c.Qb(0,"tr",36)}function M(t,e){1&t&&c.Qb(0,"tr",37)}function O(t,e){if(1&t&&(c.Vb(0,"table",9),c.Tb(1,10),c.Ec(2,y,2,0,"th",11),c.Ec(3,C,6,6,"td",12),c.Sb(),c.Tb(4,13),c.Ec(5,w,2,0,"th",11),c.Ec(6,S,6,6,"td",12),c.Sb(),c.Tb(7,14),c.Ec(8,P,2,0,"th",11),c.Ec(9,F,6,6,"td",12),c.Sb(),c.Tb(10,15),c.Ec(11,D,3,0,"th",11),c.Ec(12,I,9,1,"td",16),c.Sb(),c.Ec(13,T,1,0,"tr",17),c.Ec(14,M,1,0,"tr",18),c.Ub()),2&t){var n=c.hc();c.nc("dataSource",n.unitsDatasource),c.Cb(13),c.nc("matHeaderRowDef",n.unitsTableColums),c.Cb(1),c.nc("matRowDefColumns",n.unitsTableColums)}}function E(t,e){1&t&&(c.Vb(0,"div"),c.Qb(1,"mat-progress-spinner",38),c.Ub()),2&t&&(c.Cb(1),c.nc("diameter",30))}function A(t,e){1&t&&c.Qb(0,"mat-progress-spinner",10)}function j(t,e){if(1&t&&(c.Vb(0,"p",11),c.Gc(1),c.Ub()),2&t){var n=c.hc();c.Cb(1),c.Hc(n.errorUnitMessage)}}function R(t,e){1&t&&c.Qb(0,"mat-progress-spinner",12),2&t&&c.nc("diameter",20)}var Q=function(){function t(t,e,n,o){this.stockDatabase=t,this.formBuilder=e,this.dialog=n,this.snack=o,this.unitsTableColums=["name","abbreviation","description","actions"],this.fetchUnitsFlag=!1,this.nameFormControl=new i.g,this.abbreviationFormControl=new i.g,this.descriptionFormControl=new i.g}return t.prototype.ngOnInit=function(){this.getUnits()},t.prototype.getUnits=function(){var t=this;this.fetchUnitsFlag=!0,this.stockDatabase.getAllUnit({size:100}).then((function(e){t.unitsArray=JSON.parse(JSON.stringify(e)),t.unitsDatasource=new r.o(t.unitsArray),t.fetchUnitsFlag=!1})).catch((function(e){console.log(e),t.fetchUnitsFlag=!1}))},t.prototype.deleteUnit=function(t){var e=this;this.dialog.open(_,{data:t,disableClose:!0}).afterClosed().subscribe((function(n){n?(e.unitsArray=e.unitsArray.filter((function(e){return e.objectId!==t.objectId})),e.unitsDatasource.data=e.unitsArray,e.snack.open("Unit deleted","Ok",{duration:2e3})):e.snack.open("Unit not deleted","Ok",{duration:2e3})}))},t.prototype.updateUnitName=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="name",this.updateUnit(t))},t.prototype.updateUnitAbbreviation=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="abbreviation",this.updateUnit(t))},t.prototype.updateUnit=function(t){var e=this;this.snack.open("Update units-mobile-ui in progress..","Ok"),this.stockDatabase.updateUnit(t).then((function(n){var o=e.unitsArray.findIndex((function(t){return t.objectId===n.objectId}));if(e.unitsArray=e.unitsArray.filter((function(e){return e.objectId!==t.objectId})),-1!==o){var r=e.unitsArray[o];r[t.field]=t.value,e.unitsArray[o]=r,e.unitsDatasource.data=e.unitsArray}else console.warn("fails to update unit table");e.snack.open("Unit updated","Ok",{duration:3e3})})).catch((function(t){console.log(t),e.snack.open("Fail to update unit","Ok",{duration:3e3})}))},t.prototype.updateUnitDescription=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="description",this.updateUnit(t))},t.prototype.openAddUnitDialog=function(){var t=this;this.dialog.open(N,{closeOnNavigation:!0,hasBackdrop:!0}).afterClosed().subscribe((function(e){e&&(t.unitsArray.push(e),t.unitsDatasource.data=t.unitsArray)}))},t.\u0275fac=function(e){return new(e||t)(c.Pb(a.a),c.Pb(i.f),c.Pb(o.b),c.Pb(s.a))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-units"]],decls:15,vars:3,consts:[[1,"mat-elevation-z0"],[1,"d-flex","flex-row"],["color","primary","mat-flat-button","",1,"ft-button",3,"click"],[1,"toolbar-spacer"],["mat-icon-button","","color","primary",3,"matMenuTriggerFor"],["unitsMenu",""],["mat-menu-item","",3,"click"],["style","margin-top: 16px","class","my-input","mat-table","",3,"dataSource",4,"ngIf"],[4,"ngIf"],["mat-table","",1,"my-input",2,"margin-top","16px",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","editable","matRipple","","mat-cell","",3,"matMenuTriggerFor","matMenuTriggerData",4,"matCellDef"],["matColumnDef","abbreviation"],["matColumnDef","description"],["matColumnDef","actions"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","table-data-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["matRipple","","mat-cell","",1,"editable",3,"matMenuTriggerFor","matMenuTriggerData"],["nameMenuTrigger","matMenuTrigger"],["nameMenu",""],["matMenuContent",""],[2,"padding","16px",3,"click"],["appearance","outline",1,"my-input"],["matInput","",3,"value","formControl"],["mat-button","",3,"click"],["abbreviationMenu",""],["descriptionMenuTrigger","matMenuTrigger"],["descriptionMenu",""],["style","padding: 16px","matMenuContent",""],[1,"d-flex","justify-content-end","align-items-end"],["mat-cell",""],["color","primary","mat-icon-button","",3,"matMenuTriggerFor"],["opts",""],["mat-header-row",""],["mat-row","",1,"table-data-row"],["matTooltip","fetch units","mode","indeterminate","color","primary",3,"diameter"]],template:function(t,e){if(1&t&&(c.Vb(0,"mat-card",0),c.Vb(1,"mat-card-title",1),c.Vb(2,"button",2),c.dc("click",(function(){return e.openAddUnitDialog()})),c.Gc(3,"Add Unit"),c.Ub(),c.Qb(4,"span",3),c.Vb(5,"button",4),c.Vb(6,"mat-icon"),c.Gc(7,"more_vert"),c.Ub(),c.Ub(),c.Vb(8,"mat-menu",null,5),c.Vb(10,"button",6),c.dc("click",(function(){return e.getUnits()})),c.Gc(11,"Reload Units"),c.Ub(),c.Ub(),c.Ub(),c.Vb(12,"mat-card-content"),c.Ec(13,O,15,3,"table",7),c.Ec(14,E,2,1,"div",8),c.Ub(),c.Ub()),2&t){var n=c.tc(9);c.Cb(5),c.nc("matMenuTriggerFor",n),c.Cb(8),c.nc("ngIf",!e.fetchUnitsFlag&&e.unitsArray&&e.unitsArray.length>0),c.Cb(1),c.nc("ngIf",e.fetchUnitsFlag)}},directives:[l.a,l.m,b.b,u.d,d.a,u.e,u.b,l.d,p.t,r.n,r.c,r.i,r.b,r.k,r.m,r.h,r.a,m.s,u.a,f.b,f.f,g.b,i.c,i.r,i.h,r.j,r.l,h.a,v.a],styles:["td[_ngcontent-%COMP%]{padding:8px}.editable[_ngcontent-%COMP%]:hover{outline:1px solid #0b2e13;cursor:pointer}"]}),t}(),_=function(){function t(t,e,n){this.dialogRef=t,this.stockDatabase=e,this.data=n,this.deleteProgress=!1}return t.prototype.deleteUnit=function(t){var e=this;this.errorUnitMessage=void 0,this.deleteProgress=!0,this.stockDatabase.deleteUnit(t).then((function(n){e.dialogRef.close(t),e.deleteProgress=!1})).catch((function(t){console.log(t),e.errorUnitMessage="Fails to delete, try again",e.deleteProgress=!1}))},t.prototype.cancel=function(){this.dialogRef.close(null)},t.\u0275fac=function(e){return new(e||t)(c.Pb(o.h),c.Pb(a.a),c.Pb(o.a))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-dialog-delete"]],decls:16,vars:5,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"text-center"],[1,"d-flex","justify-content-center"],[1,"align-self-center",2,"margin","8px"],["color","primary","mat-button","",3,"disabled","click"],["matTooltip","Delete in progress...","style","display: inline-block","mode","indeterminate","diameter","15","color","accent",4,"ngIf"],[1,"alert-secondary",2,"margin","8px"],["class","bg-danger",4,"ngIf"],["matTooltip","Delete in progress...","mode","indeterminate","diameter","15","color","accent",2,"display","inline-block"],[1,"bg-danger"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Vb(2,"div",2),c.Vb(3,"mat-panel-title",3),c.Gc(4," Your about to delete : "),c.Vb(5,"b"),c.Gc(6),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(7,"div",4),c.Vb(8,"div",5),c.Vb(9,"button",6),c.dc("click",(function(){return e.deleteUnit(e.data)})),c.Gc(10," Delete "),c.Ec(11,A,1,0,"mat-progress-spinner",7),c.Ub(),c.Ub(),c.Vb(12,"div",8),c.Vb(13,"button",6),c.dc("click",(function(){return e.cancel()})),c.Gc(14,"Cancel"),c.Ub(),c.Ub(),c.Ub(),c.Ec(15,j,2,1,"p",9),c.Ub()),2&t&&(c.Cb(6),c.Hc(" "+e.data.name),c.Cb(3),c.nc("disabled",e.deleteProgress),c.Cb(2),c.nc("ngIf",e.deleteProgress),c.Cb(2),c.nc("disabled",e.deleteProgress),c.Cb(2),c.nc("ngIf",e.errorUnitMessage))},directives:[U.h,b.b,p.t,h.a,v.a],encapsulation:2}),t}(),N=function(){function t(t,e,n,o){this.formBuilder=t,this.snack=e,this.stockDatabase=n,this.dialogRef=o,this.createUnitProgress=!1}return t.prototype.ngOnInit=function(){this.initiateForm()},t.prototype.initiateForm=function(){this.newUnitForm=this.formBuilder.group({name:["",[i.F.nullValidator,i.F.required]],abbreviation:["",[i.F.nullValidator,i.F.required]],description:[""]})},t.prototype.createUnit=function(){var t=this;this.newUnitForm.valid?(this.createUnitProgress=!0,this.stockDatabase.addUnit(this.newUnitForm.value).then((function(e){t.createUnitProgress=!1,e.name=t.newUnitForm.value.name,e.description=t.newUnitForm.value.description,t.dialogRef.close(e),t.snack.open("Unit created","Ok",{duration:3e3})})).catch((function(e){console.log(e),t.createUnitProgress=!1,t.snack.open("Unit not created, try again","Ok",{duration:3e3})}))):this.snack.open("Please fll all details","Ok",{duration:3e3})},t.prototype.cancel=function(t){t.preventDefault(),this.dialogRef.close(null)},t.\u0275fac=function(e){return new(e||t)(c.Pb(i.f),c.Pb(s.a),c.Pb(a.a),c.Pb(o.h))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-new-unit"]],decls:27,vars:4,consts:[[2,"min-width","300px"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"d-flex","flex-column",3,"formGroup","ngSubmit"],["appearance","outline"],["placeholder","e.g Kilogram","matInput","","type","text","formControlName","name","required",""],["placeholder","e.g Kg","matInput","","type","text","formControlName","abbreviation","required",""],["matInput","","formControlName","description",3,"rows"],["color","primary","mat-flat-button","",1,"ft-button",3,"disabled"],["style","display: inline-block","mode","indeterminate",3,"diameter",4,"ngIf"],[2,"margin-bottom","8px"],["color","warn","mat-dialog-close","","mat-button","",3,"click"],["mode","indeterminate",2,"display","inline-block",3,"diameter"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Gc(2,"Create Unit"),c.Ub(),c.Vb(3,"div",2),c.Vb(4,"form",3),c.dc("ngSubmit",(function(){return e.createUnit()})),c.Vb(5,"mat-form-field",4),c.Vb(6,"mat-label"),c.Gc(7,"Name"),c.Ub(),c.Qb(8,"input",5),c.Vb(9,"mat-error"),c.Gc(10,"Name required"),c.Ub(),c.Ub(),c.Vb(11,"mat-form-field",4),c.Vb(12,"mat-label"),c.Gc(13,"Abbreviation"),c.Ub(),c.Qb(14,"input",6),c.Vb(15,"mat-error"),c.Gc(16,"Abbreviation required"),c.Ub(),c.Ub(),c.Vb(17,"mat-form-field",4),c.Vb(18,"mat-label"),c.Gc(19,"Description"),c.Ub(),c.Qb(20,"textarea",7),c.Ub(),c.Vb(21,"button",8),c.Gc(22," Save "),c.Ec(23,R,1,1,"mat-progress-spinner",9),c.Ub(),c.Qb(24,"span",10),c.Vb(25,"button",11),c.dc("click",(function(t){return e.cancel(t)})),c.Gc(26," Close "),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&t&&(c.Cb(4),c.nc("formGroup",e.newUnitForm),c.Cb(16),c.nc("rows",2),c.Cb(1),c.nc("disabled",e.createUnitProgress),c.Cb(2),c.nc("ngIf",e.createUnitProgress))},directives:[o.i,o.f,i.H,i.s,i.j,f.b,f.f,g.b,i.c,i.r,i.i,i.C,f.a,b.b,p.t,o.d,h.a],encapsulation:2}),t}()},E2pB:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var o=n("QJY3"),r=n("TYT/"),i=n("Valr"),a=n("17Os"),c=n("MqYC"),s=n("p+mS"),l=n("GsDI"),b=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(e){i(e)}}function c(t){try{s(o.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))},u=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};function d(t,e){if(1&t){var n=r.Wb();r.Vb(0,"div",5),r.Vb(1,"mat-card",6),r.Vb(2,"span",7),r.Gc(3),r.Ub(),r.Qb(4,"span",8),r.Vb(5,"button",9),r.dc("click",(function(t){r.xc(n);var o=e.index;return r.hc().removeFile(t,o)})),r.Vb(6,"mat-icon",10),r.Gc(7,"delete"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&t){var o=e.$implicit;r.Cb(3),r.Ic(" ",o.name," ")}}var p=function(){function t(){this.files=[],this.uploadFileFormControl=new o.g([],[o.F.nullValidator,o.F.required])}return t.prototype.ngOnInit=function(){},t.prototype.removeFile=function(t,e){t.preventDefault(),this.files.splice(e,1)},t.prototype.uploadFiles=function(t,e){return b(this,void 0,void 0,(function(){var n,o,r,i,a,c,s,l;return u(this,(function(b){switch(b.label){case 0:return(n=t.target.files).item(0)?(o=n.item(0),0!==this.files.length?[3,2]:(i=(r=this.files).push,a={name:o.name,type:o.type},[4,this.readFileContent(o)])):[3,5];case 1:return i.apply(r,[(a.url=b.sent(),a)]),[3,4];case 2:return this.files=this.files.filter((function(t){return o.name!==t.name})),s=(c=this.files).push,l={name:o.name,type:o.type},[4,this.readFileContent(o)];case 3:s.apply(c,[(l.url=b.sent(),l)]),b.label=4;case 4:this.uploadFileFormControl.setValue(this.files),e.value="",b.label=5;case 5:return[2]}}))}))},t.prototype.readFileContent=function(t){return b(this,void 0,void 0,(function(){return u(this,(function(e){return[2,new Promise((function(e,n){var o=new FileReader;o.onload=function(t){e(t.target.result.toString())},o.onerror=function(t){n("Fails to read file")},o.readAsDataURL(t)}))]}))}))},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Jb({type:t,selectors:[["app-upload-files"]],inputs:{files:"files",uploadFileFormControl:"uploadFileFormControl"},decls:7,vars:2,consts:[[2,"display","flex","flex-direction","row","flex-wrap","wrap","align-items","center","padding","8px"],["style","display: flex; flex-direction: row; flex-wrap: nowrap; align-items: center",4,"ngFor","ngForOf"],["matRipple","",2,"width","120px","height","50px","margin","5px",3,"click"],["type","file",2,"display","none",3,"multiple","change"],["uploadFile",""],[2,"display","flex","flex-direction","row","flex-wrap","nowrap","align-items","center"],[2,"height","50px","margin","5px","display","flex","flex-direction","row","align-items","center"],[2,"max-width","200px","overflow","hidden","white-space","nowrap","text-overflow","ellipsis"],[2,"width","10px"],["mat-icon-button","",2,"display","inline-block",3,"click"],["color","warn"]],template:function(t,e){if(1&t){var n=r.Wb();r.Vb(0,"div",0),r.Ec(1,d,8,1,"div",1),r.Vb(2,"mat-card",2),r.dc("click",(function(){return r.xc(n),r.tc(6).click()})),r.Vb(3,"span"),r.Gc(4,"Add File"),r.Ub(),r.Ub(),r.Ub(),r.Vb(5,"input",3,4),r.dc("change",(function(t){r.xc(n);var o=r.tc(6);return e.uploadFiles(t,o)})),r.Ub()}2&t&&(r.Cb(1),r.nc("ngForOf",e.files),r.Cb(4),r.nc("multiple",!1))},directives:[i.s,a.a,c.s,s.b,l.a],styles:[""]}),t}()},GMak:function(t,e,n){"use strict";n.d(e,"a",(function(){return T}));var o=n("QJY3"),r=n("F/XL"),i=n("eUy1"),a=n("h/AT"),c=n("TYT/"),s=n("p+mS"),l=n("GsDI"),b=n("Valr"),u=n("17Os"),d=n("XIAg");function p(t,e){if(1&t&&(c.Vb(0,"div"),c.Vb(1,"mat-card-subtitle",4),c.Gc(2),c.Ub(),c.Qb(3,"span",5),c.Vb(4,"h4",4),c.Gc(5),c.Ub(),c.Qb(6,"mat-divider",6),c.Ub()),2&t){var n=e.$implicit,o=c.hc();c.Cb(2),c.Hc(n),c.Cb(3),c.Hc(o.data[n])}}var m=function(){function t(t,e){this.bottomSheetRef=t,this.data=e}return t.prototype.getKeys=function(){return delete this.data.createdAt,delete this.data.updatedAt,delete this.data.objectId,Object.keys(this.data)},t.\u0275fac=function(e){return new(e||t)(c.Pb(a.e),c.Pb(a.a))},t.\u0275cmp=c.Jb({type:t,selectors:[["ng-component"]],decls:9,vars:1,consts:[[2,"padding","8px","display","flex","align-items","center"],[2,"flex-grow","1"],["color","primary","mat-icon-button","",3,"click"],[4,"ngFor","ngForOf"],[2,"display","block"],[2,"width","8px","height","8px"],[2,"margin-bottom","8px"]],template:function(t,e){1&t&&(c.Vb(0,"div"),c.Vb(1,"div",0),c.Qb(2,"span",1),c.Vb(3,"span"),c.Gc(4,"Close"),c.Ub(),c.Vb(5,"button",2),c.dc("click",(function(){return e.bottomSheetRef.dismiss(null)})),c.Vb(6,"mat-icon"),c.Gc(7,"close"),c.Ub(),c.Ub(),c.Ub(),c.Ec(8,p,7,2,"div",3),c.Ub()),2&t&&(c.Cb(8),c.nc("ngForOf",e.getKeys()))},directives:[s.b,l.a,b.s,u.l,d.a],styles:[""]}),t}(),f=n("/KH0"),g=n("ea4N"),h=n("5msO"),v=n("xJ+t"),U=n("M1DL"),y=n("OJ6B"),V=n("pdUi"),k=n("+0bg"),C=n("MqYC"),w=n("eHTH"),x=n("uad8"),S=n("2J1J"),P=function(t){return{supplier:t}};function G(t,e){if(1&t&&(c.Vb(0,"div"),c.Qb(1,"mat-divider"),c.Vb(2,"mat-list-item"),c.Vb(3,"div",13),c.Gc(4),c.Ub(),c.Vb(5,"h1",14),c.Gc(6),c.Ub(),c.Vb(7,"span",14),c.Gc(8),c.Ub(),c.Vb(9,"button",15),c.Vb(10,"mat-icon"),c.Gc(11,"more_vert"),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&t){var n=e.$implicit;c.hc(2);var o=c.tc(9);c.Cb(4),c.Ic(" ",n.name.substring(0,1).toUpperCase()," "),c.Cb(2),c.Hc(n.name),c.Cb(2),c.Hc(n.number),c.Cb(1),c.nc("matMenuTriggerData",c.qc(5,P,n))("matMenuTriggerFor",o)}}function F(t,e){if(1&t){var n=c.Wb();c.Vb(0,"div"),c.Vb(1,"div",7),c.Vb(2,"h6",8),c.Gc(3,"Suppliers"),c.Ub(),c.Qb(4,"span",9),c.Vb(5,"button",10),c.dc("click",(function(){return c.xc(n),c.hc().getSuppliers()})),c.Vb(6,"mat-icon"),c.Gc(7,"refresh"),c.Ub(),c.Ub(),c.Ub(),c.Vb(8,"cdk-virtual-scroll-viewport",11),c.Vb(9,"mat-list"),c.Ec(10,G,12,7,"div",12),c.ic(11,"async"),c.Ub(),c.Ub(),c.Ub()}if(2&t){var o=c.hc();c.Cb(10),c.nc("cdkVirtualForOf",c.jc(11,1,o.suppliers))}}function D(t,e){1&t&&(c.Vb(0,"div",16),c.Qb(1,"mat-progress-spinner",17),c.Vb(2,"span"),c.Gc(3,"Fetching suppliers"),c.Ub(),c.Ub()),2&t&&(c.Cb(1),c.nc("diameter",40))}function I(t,e){if(1&t){var n=c.Wb();c.Vb(0,"button",18),c.dc("click",(function(){c.xc(n);var t=e.supplier;return c.hc().showDetails(t)})),c.Gc(1,"View"),c.Ub(),c.Vb(2,"button",18),c.dc("click",(function(){c.xc(n);var t=e.supplier;return c.hc().updateSupplier(t)})),c.Gc(3,"Edit"),c.Ub(),c.Vb(4,"button",18),c.dc("click",(function(){c.xc(n);var t=e.supplier;return c.hc().deleteSupplier(t)})),c.Gc(5,"Delete"),c.Ub()}}var T=function(){function t(t,e,n,r,i){this.stockDatabase=t,this.formBuilder=e,this.dialog=n,this.bottomSheet=r,this.snack=i,this.fetchSuppliersFlag=!1,this.nameFormControl=new o.g,this.descriptionFormControl=new o.g,this.addressFormControl=new o.g,this.emailFormControl=new o.g,this.mobileFormControl=new o.g}return t.prototype.ngOnInit=function(){this.getSuppliers()},t.prototype.searchSupplier=function(t){},t.prototype.getSuppliers=function(){var t=this;this.fetchSuppliersFlag=!0,this.stockDatabase.getAllSupplier({size:100}).then((function(e){t.suppliersArray=JSON.parse(JSON.stringify(e)),t.suppliers=Object(r.a)(t.suppliersArray),t.fetchSuppliersFlag=!1})).catch((function(e){console.log(e),t.fetchSuppliersFlag=!1}))},t.prototype.deleteSupplier=function(t){var e=this;this.dialog.open(f.a,{data:t,disableClose:!0}).afterClosed().subscribe((function(n){n?(e.suppliersArray=e.suppliersArray.filter((function(e){return e.objectId!==t.objectId})),e.suppliers=Object(r.a)(e.suppliersArray),e.snack.open("Supplier deleted","Ok",{duration:2e3})):e.snack.open("Supplier not deleted","Ok",{duration:2e3})}))},t.prototype.updateSupplier=function(t){var e=this;this.dialog.open(f.b,{minWidth:"80%",closeOnNavigation:!0,hasBackdrop:!0,data:t}).afterClosed().subscribe((function(t){t&&e.getSuppliers()}))},t.prototype.openAddSupplierDialog=function(){var t=this;this.dialog.open(f.b,{minWidth:"80%",closeOnNavigation:!0,hasBackdrop:!0}).afterClosed().subscribe((function(e){e&&t.getSuppliers()}))},t.prototype.showDetails=function(t){this.bottomSheet.open(m,{data:t})},t.\u0275fac=function(e){return new(e||t)(c.Pb(i.a),c.Pb(o.f),c.Pb(g.b),c.Pb(a.b),c.Pb(h.a))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-suppliers-mobile-ui"]],decls:11,vars:6,consts:[[1,"match-parent"],[3,"heading","hasBackRoute","backLink","showProgress"],[4,"ngIf"],["style","height: 100vh; width: 100vw; position: fixed","class","d-flex justify-content-center align-items-center flex-column",4,"ngIf"],["color","primary","mat-flat-button","",1,"mat-fab","ft-fab-position",2,"position","fixed","bottom","16px","right","16px",3,"click"],["menu",""],["matMenuContent",""],[1,"d-flex","flex-row","align-items-center"],[2,"padding-left","16px","margin","0"],[1,"flex-grow-1"],["mat-icon-button","","color","primary",2,"padding-right","16px",3,"click"],["itemSize","10",2,"height","100vh","width","100vw"],[4,"cdkVirtualFor","cdkVirtualForOf"],["matListIcon","",1,"text-center",2,"width","40px","height","40px","border-radius","60px","background","#f5f5f5","color","black"],["matLine",""],["matSuffix","","mat-icon-button","",3,"matMenuTriggerData","matMenuTriggerFor"],[1,"d-flex","justify-content-center","align-items-center","flex-column",2,"height","100vh","width","100vw","position","fixed"],["matTooltip","fetch suppliers","mode","indeterminate","color","primary",3,"diameter"],["mat-menu-item","",3,"click"]],template:function(t,e){1&t&&(c.Vb(0,"mat-sidenav-container",0),c.Vb(1,"mat-sidenav-content"),c.Qb(2,"app-toolbar",1),c.Ec(3,F,12,3,"div",2),c.Ec(4,D,4,1,"div",3),c.Vb(5,"button",4),c.dc("click",(function(){return e.openAddSupplierDialog()})),c.Vb(6,"mat-icon"),c.Gc(7,"add"),c.Ub(),c.Ub(),c.Vb(8,"mat-menu",null,5),c.Ec(10,I,6,0,"ng-template",6),c.Ub(),c.Ub(),c.Ub()),2&t&&(c.Cb(2),c.nc("heading","Stock")("hasBackRoute",!0)("backLink","/stock")("showProgress",!1),c.Cb(1),c.nc("ngIf",!e.fetchSuppliersFlag),c.Cb(1),c.nc("ngIf",e.fetchSuppliersFlag))},directives:[v.e,v.f,U.a,b.t,s.b,l.a,y.e,y.a,V.d,V.a,k.a,V.c,d.a,k.c,k.b,C.j,w.i,y.d,x.a,S.a,y.b],pipes:[b.b],styles:[""]}),t}()},aDDK:function(t,e,n){"use strict";n.d(e,"a",(function(){return F}));var o=n("F/XL"),r=n("n90K"),i=n("lmh7"),a=n("eUy1"),c=n("rBRJ"),s=n("TYT/"),l=n("DUip"),b=n("h/AT"),u=n("ea4N"),d=n("xJ+t"),p=n("M1DL"),m=n("Valr"),f=n("p+mS"),g=n("GsDI"),h=n("pdUi"),v=n("+0bg"),U=n("XIAg"),y=n("MqYC"),V=n("eHTH"),k=n("OJ6B"),C=function(){function t(){this.deleteCallback=new s.o,this.editCallback=new s.o}return t.prototype.ngOnInit=function(){},t.prototype.showDetails=function(t){this.bottomSheet.open(c.c,{data:t,closeOnNavigation:!0})},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Jb({type:t,selectors:[["app-stock-product-item-mobile-ui"]],inputs:{product:"product",bottomSheet:"bottomSheet"},outputs:{deleteCallback:"deleteCallback",editCallback:"editCallback"},decls:22,vars:7,consts:[["matRipple",""],["matListIcon","",1,"text-center",2,"width","40px","height","40px","border-radius","60px","background","#f5f5f5","color","black"],["matLine",""],["matSuffix","","mat-icon-button","",3,"matMenuTriggerFor"],["menu",""],["mat-menu-item","",3,"click"]],template:function(t,e){if(1&t&&(s.Qb(0,"mat-divider"),s.Vb(1,"mat-list-item",0),s.Vb(2,"div",1),s.Gc(3),s.Ub(),s.Vb(4,"h1",2),s.Gc(5),s.Ub(),s.Vb(6,"span",2),s.Gc(7),s.ic(8,"number"),s.Ub(),s.Vb(9,"h6",2),s.Gc(10),s.Ub(),s.Vb(11,"button",3),s.Vb(12,"mat-icon"),s.Gc(13,"more_vert"),s.Ub(),s.Ub(),s.Ub(),s.Vb(14,"mat-menu",null,4),s.Vb(16,"button",5),s.dc("click",(function(){return e.showDetails(e.product)})),s.Gc(17,"View"),s.Ub(),s.Vb(18,"button",5),s.dc("click",(function(){return e.editCallback.emit(e.product)})),s.Gc(19,"Edit"),s.Ub(),s.Vb(20,"button",5),s.dc("click",(function(){return e.deleteCallback.emit(e.product)})),s.Gc(21,"Delete"),s.Ub(),s.Ub()),2&t){var n=s.tc(15);s.Cb(3),s.Ic(" ",e.product.product.substring(0,1).toUpperCase()," "),s.Cb(2),s.Hc(e.product.product),s.Cb(2),s.Hc(s.jc(8,5,e.product.quantity)),s.Cb(3),s.Hc(e.product.category),s.Cb(1),s.nc("matMenuTriggerFor",n)}},directives:[U.a,v.c,y.s,v.b,y.j,f.b,V.i,k.d,g.a,k.e,k.b],pipes:[m.g],styles:[""]}),t}(),w=n("uad8");function x(t,e){if(1&t){var n=s.Wb();s.Vb(0,"button",13),s.dc("click",(function(){return s.xc(n),s.hc(2).hotReloadStocks()})),s.Vb(1,"mat-icon"),s.Gc(2,"refresh"),s.Ub(),s.Ub()}}function S(t,e){if(1&t){var n=s.Wb();s.Vb(0,"app-stock-product-item-mobile-ui",14),s.dc("deleteCallback",(function(t){return s.xc(n),s.hc(2).deleteStock(t)}))("editCallback",(function(t){return s.xc(n),s.hc(2).editStock(t)})),s.Ub()}if(2&t){var o=e.$implicit,r=s.hc(2);s.nc("product",o)("bottomSheet",r._bottomSheet)}}function P(t,e){if(1&t&&(s.Vb(0,"div"),s.Vb(1,"div",6),s.Vb(2,"h6",7),s.Gc(3,"Products"),s.Ub(),s.Qb(4,"span",8),s.Ec(5,x,3,0,"button",9),s.Ub(),s.Vb(6,"cdk-virtual-scroll-viewport",10),s.Vb(7,"mat-list",11),s.Ec(8,S,1,2,"app-stock-product-item-mobile-ui",12),s.ic(9,"async"),s.Ub(),s.Ub(),s.Ub()),2&t){var n=s.hc();s.Cb(5),s.nc("ngIf",!n.stockFetchProgress),s.Cb(3),s.nc("cdkVirtualForOf",s.jc(9,2,n.products))}}function G(t,e){1&t&&(s.Vb(0,"div",15),s.Qb(1,"mat-progress-spinner",16),s.Vb(2,"span"),s.Gc(3,"Fetch products"),s.Ub(),s.Ub()),2&t&&(s.Cb(1),s.nc("diameter",40))}var F=function(){function t(t,e,n,o,r,i){this._router=t,this._storage=e,this._bottomSheet=n,this._infoMessage=o,this._dialog=r,this._stockDatabase=i,this.stockFetchProgress=!1,this.showProgress=!1}return t.prototype.ngOnInit=function(){window.addEventListener("ssm_stocks_updated",(function(t){console.log(t),console.log("stock is updated from worker thread check it out")})),this.initializeView()},t.prototype.initializeView=function(){this.getStocksFromCache()},t.prototype.getStocksFromCache=function(t){var e=this;this.stockFetchProgress=!0,this._storage.getStocks().then((function(n){n?n&&Array.isArray(n)&&0===n.length?e.hotReloadStocks():(e.products=Object(o.a)(n),e.stockFetchProgress=!1,t&&t(null)):e.hotReloadStocks()})).catch((function(n){e.stockFetchProgress=!1,t&&t(n)}))},t.prototype.hotReloadStocks=function(){var t=this;this.stockFetchProgress=!0,this._stockDatabase.getAllStock().then((function(e){return n=t,void 0,i=function(){return function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.stockFetchProgress=!1,[4,this._storage.saveStocks(e)];case 1:return t.sent(),this.products=Object(o.a)(e),this.stockFetchProgress=!1,this._infoMessage.showMobileInfoMessage("Successful retrieve products",3e3),[3,3];case 2:throw t.sent();case 3:return[2]}}))},new((r=void 0)||(r=Promise))((function(t,e){function o(t){try{c(i.next(t))}catch(n){e(n)}}function a(t){try{c(i.throw(t))}catch(n){e(n)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(o,a)}c((i=i.apply(n,[])).next())}));var n,r,i})).catch((function(e){t.stockFetchProgress=!1,t._infoMessage.showMobileInfoMessage("Fails to get products from server, try again",3e3)}))},t.prototype.editStock=function(t){this._router.navigateByUrl("/stock/edit/"+t.objectId+"?stock="+encodeURI(JSON.stringify(t))).catch((function(t){return console.log(t)}))},t.prototype.deleteStock=function(t){var e=this;this._dialog.open(c.a,{data:t}).afterClosed().subscribe((function(n){"no"===n?e._infoMessage.showMobileInfoMessage("Deletion is cancelled",3e3):(e._infoMessage.showMobileInfoMessage("Delete in progress...",3e3),e._stockDatabase.deleteStock(t).then((function(n){e._infoMessage.showMobileInfoMessage("Product successful deleted",3e3),e._removeProductFromTable(t)})).catch((function(t){console.log(t),e._infoMessage.showMobileInfoMessage("Product is not deleted successful, try again",3e3)})))}))},t.prototype.handleSearch=function(t){var e=this;this._storage.getStocks().then((function(n){if(n)if(t){var r=n.filter((function(e){return e.product.toLowerCase().includes(t.toLowerCase())}));e.products=Object(o.a)(r)}else e.products=Object(o.a)(n);else e._infoMessage.showMobileInfoMessage("No products found, try again",3e3)})).catch((function(t){console.log(t),e._infoMessage.showMobileInfoMessage(t,3e3)}))},t.prototype._removeProductFromTable=function(t){var e=this;this._storage.getStocks().then((function(n){var r=n.filter((function(e){return e.objectId!==t.objectId}));e.products=Object(o.a)(r),e._storage.saveStocks(r).catch((function(t){return console.warn("Fails to update stock due to deleted item")}))})).catch((function(t){console.warn("fails to update stocks")}))},t.prototype.exportStock=function(){},t.\u0275fac=function(e){return new(e||t)(s.Pb(l.b),s.Pb(r.a),s.Pb(b.b),s.Pb(i.a),s.Pb(u.b),s.Pb(a.a))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-stock-products-mobile-ui"]],decls:9,vars:6,consts:[[1,"match-parent"],[1,"d-flex","flex-column"],["searchPlaceholder","Type to search...",3,"showSearch","hasBackRoute","heading","backLink","searchCallback"],[4,"ngIf"],["style","min-height: 70vh; width: 100vw","class","d-flex justify-content-center align-items-center flex-column",4,"ngIf"],["routerLink","/stock/create","mat-flat-button","","color","primary",1,"mat-fab",2,"position","fixed","bottom","24px","right","24px"],[1,"d-flex","flex-row","align-items-center"],[2,"margin","16px  16px 4px 16px"],[1,"flex-grow-1"],["style","margin: 3px 16px 0 4px","mat-icon-button","","color","primary",3,"click",4,"ngIf"],["itemSize","10",2,"height","100vh"],[2,"width","100vw"],[3,"product","bottomSheet","deleteCallback","editCallback",4,"cdkVirtualFor","cdkVirtualForOf"],["mat-icon-button","","color","primary",2,"margin","3px 16px 0 4px",3,"click"],[3,"product","bottomSheet","deleteCallback","editCallback"],[1,"d-flex","justify-content-center","align-items-center","flex-column",2,"min-height","70vh","width","100vw"],["mode","indeterminate",3,"diameter"]],template:function(t,e){1&t&&(s.Vb(0,"mat-sidenav-container",0),s.Vb(1,"mat-sidenav-content",1),s.Vb(2,"app-toolbar",2),s.dc("searchCallback",(function(t){return e.handleSearch(t)})),s.Ub(),s.Vb(3,"div"),s.Ec(4,P,10,4,"div",3),s.Ec(5,G,4,1,"div",4),s.Vb(6,"button",5),s.Vb(7,"mat-icon"),s.Gc(8,"add"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&t&&(s.Cb(2),s.nc("showSearch",!0)("hasBackRoute",!0)("heading","Products")("backLink","/stock"),s.Cb(2),s.nc("ngIf",e.products&&!e.stockFetchProgress),s.Cb(1),s.nc("ngIf",e.stockFetchProgress))},directives:[d.e,d.f,p.a,m.t,f.b,l.c,g.a,h.d,h.a,v.a,h.c,C,w.a],pipes:[m.b],styles:[""]}),t}()},bXns:function(t,e,n){"use strict";n.d(e,"a",(function(){return A})),n.d(e,"b",(function(){return j})),n.d(e,"c",(function(){return R}));var o=n("ea4N"),r=n("ETwC"),i=n("QJY3"),a=n("eUy1"),c=n("TYT/"),s=n("5msO"),l=n("17Os"),b=n("p+mS"),u=n("OJ6B"),d=n("GsDI"),p=n("Valr"),m=n("MqYC"),f=n("eHTH"),g=n("cSbt"),h=n("uad8"),v=n("2J1J"),U=n("dOeY");function y(t,e){1&t&&(c.Vb(0,"th",18),c.Gc(1,"Name"),c.Ub())}function V(t,e){if(1&t){var n=c.Wb();c.Vb(0,"div",23),c.dc("click",(function(t){return c.xc(n),t.stopPropagation()})),c.Vb(1,"mat-form-field",24),c.Vb(2,"mat-label"),c.Gc(3,"Name"),c.Ub(),c.Qb(4,"input",25),c.Ub(),c.Vb(5,"button",26),c.dc("click",(function(){c.xc(n);var t=e.objectId;c.hc();var o=c.tc(1),r=c.hc(2);return r.updateCategoryName({objectId:t,value:r.nameFormControl.value},o)})),c.Gc(6,"Update "),c.Ub(),c.Ub()}if(2&t){var o=e.data,r=c.hc(3);c.Cb(4),c.nc("value",o)("formControl",r.nameFormControl)}}var k=function(t,e){return{objectId:t,data:e}};function C(t,e){if(1&t&&(c.Vb(0,"td",19,20),c.Gc(2),c.Vb(3,"mat-menu",null,21),c.Ec(5,V,7,2,"ng-template",22),c.Ub(),c.Ub()),2&t){var n=e.$implicit,o=c.tc(4);c.nc("matMenuTriggerFor",o)("matMenuTriggerData",c.rc(3,k,n.objectId,n.name)),c.Cb(2),c.Ic("",n.name," ")}}function w(t,e){1&t&&(c.Vb(0,"th",18),c.Gc(1,"Description"),c.Ub())}function x(t,e){if(1&t){var n=c.Wb();c.Vb(0,"div",23),c.dc("click",(function(t){return c.xc(n),t.stopPropagation()})),c.Vb(1,"mat-form-field",24),c.Vb(2,"mat-label"),c.Gc(3,"Description"),c.Ub(),c.Qb(4,"textarea",25),c.Ub(),c.Vb(5,"button",26),c.dc("click",(function(){c.xc(n);var t=e.objectId;c.hc();var o=c.tc(1),r=c.hc(2);return r.updateCategoryDescription({objectId:t,value:r.descriptionFormControl.value},o)})),c.Gc(6,"Update "),c.Ub(),c.Ub()}if(2&t){var o=e.data,r=c.hc(3);c.Cb(4),c.nc("value",o)("formControl",r.descriptionFormControl)}}function S(t,e){if(1&t&&(c.Vb(0,"td",19,27),c.Gc(2),c.Vb(3,"mat-menu",null,28),c.Ec(5,x,7,2,"ng-template",29),c.Ub(),c.Ub()),2&t){var n=e.$implicit,o=c.tc(4);c.nc("matMenuTriggerFor",o)("matMenuTriggerData",c.rc(3,k,n.objectId,n.description)),c.Cb(2),c.Ic("",n.description," ")}}function P(t,e){1&t&&(c.Vb(0,"th",18),c.Vb(1,"div",30),c.Gc(2," Actions "),c.Ub(),c.Ub())}function G(t,e){if(1&t){var n=c.Wb();c.Vb(0,"td",31),c.Vb(1,"div",30),c.Vb(2,"button",32),c.Vb(3,"mat-icon"),c.Gc(4,"more_vert"),c.Ub(),c.Ub(),c.Vb(5,"mat-menu",null,33),c.Vb(7,"button",6),c.dc("click",(function(){c.xc(n);var t=e.$implicit;return c.hc(2).deleteCategory(t)})),c.Gc(8," Delete "),c.Ub(),c.Ub(),c.Ub(),c.Ub()}if(2&t){var o=c.tc(6);c.Cb(2),c.nc("matMenuTriggerFor",o)}}function F(t,e){1&t&&c.Qb(0,"tr",34)}function D(t,e){1&t&&c.Qb(0,"tr",35)}function I(t,e){if(1&t&&(c.Vb(0,"table",9),c.Tb(1,10),c.Ec(2,y,2,0,"th",11),c.Ec(3,C,6,6,"td",12),c.Sb(),c.Tb(4,13),c.Ec(5,w,2,0,"th",11),c.Ec(6,S,6,6,"td",12),c.Sb(),c.Tb(7,14),c.Ec(8,P,3,0,"th",11),c.Ec(9,G,9,1,"td",15),c.Sb(),c.Ec(10,F,1,0,"tr",16),c.Ec(11,D,1,0,"tr",17),c.Ub()),2&t){var n=c.hc();c.nc("dataSource",n.categoriesDatasource),c.Cb(10),c.nc("matHeaderRowDef",n.categoriesTableColums),c.Cb(1),c.nc("matRowDefColumns",n.categoriesTableColums)}}function T(t,e){1&t&&(c.Vb(0,"div"),c.Qb(1,"mat-progress-spinner",36),c.Ub()),2&t&&(c.Cb(1),c.nc("diameter",30))}function M(t,e){1&t&&c.Qb(0,"mat-progress-spinner",10)}function O(t,e){if(1&t&&(c.Vb(0,"p",11),c.Gc(1),c.Ub()),2&t){var n=c.hc();c.Cb(1),c.Hc(n.errorCategoryMessage)}}function E(t,e){1&t&&c.Qb(0,"mat-progress-spinner",11),2&t&&c.nc("diameter",20)}var A=function(){function t(t,e,n,o){this.stockDatabase=t,this.formBuilder=e,this.dialog=n,this.snack=o,this.categoriesTableColums=["name","description","actions"],this.fetchCategoriesFlag=!1,this.nameFormControl=new i.g,this.descriptionFormControl=new i.g}return t.prototype.ngOnInit=function(){this.getCategories()},t.prototype.searchCategory=function(t){},t.prototype.getCategories=function(){var t=this;this.fetchCategoriesFlag=!0,this.stockDatabase.getAllCategory({size:100}).then((function(e){t.categoriesArray=JSON.parse(JSON.stringify(e)),t.categoriesDatasource=new r.o(t.categoriesArray),t.fetchCategoriesFlag=!1})).catch((function(e){console.log(e),t.fetchCategoriesFlag=!1}))},t.prototype.deleteCategory=function(t){var e=this;this.dialog.open(j,{data:t,disableClose:!0}).afterClosed().subscribe((function(n){n?(e.categoriesArray=e.categoriesArray.filter((function(e){return e.objectId!==t.objectId})),e.categoriesDatasource=new r.o(e.categoriesArray),e.snack.open("Category deleted","Ok",{duration:2e3})):e.snack.open("Category not deleted","Ok",{duration:2e3})}))},t.prototype.updateCategoryName=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="name",this.updateCategory(t))},t.prototype.updateCategory=function(t){var e=this;this.snack.open("Update in progress..","Ok"),this.stockDatabase.updateCategory(t).then((function(n){var o=e.categoriesArray.findIndex((function(t){return t.objectId===n.objectId}));if(e.categoriesArray=e.categoriesArray.filter((function(e){return e.objectId!==t.objectId})),-1!==o){var r=e.categoriesArray[o];r[t.field]=t.value,e.categoriesDatasource.data[o]=r}else console.warn("fails to update category table");e.snack.open("Category updated","Ok",{duration:3e3})})).catch((function(t){e.snack.open(t&&t.message?t.message:"Fail to update category","Ok",{duration:3e3})}))},t.prototype.updateCategoryDescription=function(t,e){e.toggleMenu(),t&&t.value&&(t.field="description",this.updateCategory(t))},t.prototype.openAddCategoryDialog=function(){var t=this;this.dialog.open(R,{closeOnNavigation:!0,hasBackdrop:!0}).afterClosed().subscribe((function(e){e&&(t.categoriesArray.push(e),t.categoriesDatasource.data=t.categoriesArray)}))},t.\u0275fac=function(e){return new(e||t)(c.Pb(a.a),c.Pb(i.f),c.Pb(o.b),c.Pb(s.a))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-categories"]],decls:15,vars:3,consts:[[1,"mat-elevation-z0"],[1,"d-flex","flex-row"],["color","primary","mat-flat-button","",1,"ft-button",3,"click"],[1,"toolbar-spacer"],["mat-icon-button","",3,"matMenuTriggerFor"],["menuCategories",""],["mat-menu-item","",3,"click"],["style","margin-top: 16px","class","my-input","mat-table","",3,"dataSource",4,"ngIf"],[4,"ngIf"],["mat-table","",1,"my-input",2,"margin-top","16px",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","editable","matRipple","","mat-cell","",3,"matMenuTriggerFor","matMenuTriggerData",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","actions"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","table-data-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["matRipple","","mat-cell","",1,"editable",3,"matMenuTriggerFor","matMenuTriggerData"],["nameMenuTrigger","matMenuTrigger"],["nameMenu",""],["matMenuContent",""],[2,"padding","16px",3,"click"],["appearance","outline",1,"my-input"],["matInput","",3,"value","formControl"],["mat-button","",3,"click"],["descriptionMenuTrigger","matMenuTrigger"],["descriptionMenu",""],["style","padding: 16px","matMenuContent",""],[1,"d-flex","justify-content-end","align-items-end"],["mat-cell",""],["color","primary","mat-icon-button","",3,"matMenuTriggerFor"],["opts",""],["mat-header-row",""],["mat-row","",1,"table-data-row"],["matTooltip","fetch categories","mode","indeterminate","color","primary",3,"diameter"]],template:function(t,e){if(1&t&&(c.Vb(0,"mat-card",0),c.Vb(1,"mat-card-title",1),c.Vb(2,"button",2),c.dc("click",(function(){return e.openAddCategoryDialog()})),c.Gc(3," Add Category "),c.Ub(),c.Qb(4,"span",3),c.Vb(5,"button",4),c.Vb(6,"mat-icon"),c.Gc(7,"more_vert"),c.Ub(),c.Ub(),c.Vb(8,"mat-menu",null,5),c.Vb(10,"button",6),c.dc("click",(function(){return e.getCategories()})),c.Gc(11,"Reload Categories"),c.Ub(),c.Ub(),c.Ub(),c.Vb(12,"mat-card-content"),c.Ec(13,I,12,3,"table",7),c.Ec(14,T,2,1,"div",8),c.Ub(),c.Ub()),2&t){var n=c.tc(9);c.Cb(5),c.nc("matMenuTriggerFor",n),c.Cb(8),c.nc("ngIf",!e.fetchCategoriesFlag&&e.categoriesArray&&e.categoriesArray.length>0),c.Cb(1),c.nc("ngIf",e.fetchCategoriesFlag)}},directives:[l.a,l.m,b.b,u.d,d.a,u.e,u.b,l.d,p.t,r.n,r.c,r.i,r.b,r.k,r.m,r.h,r.a,m.s,u.a,f.b,f.f,g.b,i.c,i.r,i.h,r.j,r.l,h.a,v.a],styles:["td[_ngcontent-%COMP%]{padding:8px}"]}),t}(),j=function(){function t(t,e,n){this.dialogRef=t,this.stockDatabase=e,this.data=n,this.deleteProgress=!1}return t.prototype.deleteCategory=function(t){var e=this;this.errorCategoryMessage=void 0,this.deleteProgress=!0,this.stockDatabase.deleteCategory(t).then((function(n){e.dialogRef.close(t),e.deleteProgress=!1})).catch((function(t){e.errorCategoryMessage=t&&t.message?t.message:t.toString(),e.deleteProgress=!1}))},t.prototype.cancel=function(){this.dialogRef.close(null)},t.\u0275fac=function(e){return new(e||t)(c.Pb(o.h),c.Pb(a.a),c.Pb(o.a))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-dialog-delete"]],decls:16,vars:5,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"text-center"],[1,"d-flex","justify-content-center"],[1,"align-self-center",2,"margin","8px"],["color","primary","mat-button","",3,"disabled","click"],["matTooltip","Delete in progress...","style","display: inline-block","mode","indeterminate","diameter","15","color","accent",4,"ngIf"],[1,"alert-secondary",2,"margin","8px"],["class","bg-danger",4,"ngIf"],["matTooltip","Delete in progress...","mode","indeterminate","diameter","15","color","accent",2,"display","inline-block"],[1,"bg-danger"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Vb(2,"div",2),c.Vb(3,"mat-panel-title",3),c.Gc(4," Your about to delete : "),c.Vb(5,"b"),c.Gc(6),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(7,"div",4),c.Vb(8,"div",5),c.Vb(9,"button",6),c.dc("click",(function(){return e.deleteCategory(e.data)})),c.Gc(10," Delete "),c.Ec(11,M,1,0,"mat-progress-spinner",7),c.Ub(),c.Ub(),c.Vb(12,"div",8),c.Vb(13,"button",6),c.dc("click",(function(){return e.cancel()})),c.Gc(14,"Cancel"),c.Ub(),c.Ub(),c.Ub(),c.Ec(15,O,2,1,"p",9),c.Ub()),2&t&&(c.Cb(6),c.Hc(" "+e.data.name),c.Cb(3),c.nc("disabled",e.deleteProgress),c.Cb(2),c.nc("ngIf",e.deleteProgress),c.Cb(2),c.nc("disabled",e.deleteProgress),c.Cb(2),c.nc("ngIf",e.errorCategoryMessage))},directives:[U.h,b.b,p.t,h.a,v.a],encapsulation:2}),t}(),R=function(){function t(t,e,n,o){this.formBuilder=t,this.snack=e,this.stockDatabase=n,this.dialogRef=o,this.createCategoryProgress=!1}return t.prototype.ngOnInit=function(){this.initiateForm()},t.prototype.initiateForm=function(){this.newCategoryForm=this.formBuilder.group({name:["",[i.F.nullValidator,i.F.required]],description:[""]})},t.prototype.createCategory=function(){var t=this;this.newCategoryForm.valid?(this.createCategoryProgress=!0,this.stockDatabase.addCategory(this.newCategoryForm.value).then((function(e){t.createCategoryProgress=!1,e.name=t.newCategoryForm.value.name,e.description=t.newCategoryForm.value.description,t.dialogRef.close(e),t.snack.open("Category created","Ok",{duration:3e3})})).catch((function(e){console.log(e),t.createCategoryProgress=!1,t.snack.open("Category not created, try again","Ok",{duration:3e3})}))):this.snack.open("Please fll all details","Ok",{duration:3e3})},t.prototype.cancel=function(t){t.preventDefault(),this.dialogRef.close(null)},t.\u0275fac=function(e){return new(e||t)(c.Pb(i.f),c.Pb(s.a),c.Pb(a.a),c.Pb(o.h))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-new-category"]],decls:21,vars:4,consts:[[2,"min-width","300px"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"d-flex","flex-column",3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","type","text","formControlName","name","required",""],["matInput","","formControlName","description",3,"rows"],["color","primary","mat-flat-button","",1,"ft-button",3,"disabled"],["style","display: inline-block","mode","indeterminate",3,"diameter",4,"ngIf"],[2,"margin-bottom","8px"],["color","warn","mat-dialog-close","","mat-button","",3,"click"],["mode","indeterminate",2,"display","inline-block",3,"diameter"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Gc(2,"Create Category"),c.Ub(),c.Vb(3,"div",2),c.Vb(4,"form",3),c.dc("ngSubmit",(function(){return e.createCategory()})),c.Vb(5,"mat-form-field",4),c.Vb(6,"mat-label"),c.Gc(7,"Name"),c.Ub(),c.Qb(8,"input",5),c.Vb(9,"mat-error"),c.Gc(10,"Name required"),c.Ub(),c.Ub(),c.Vb(11,"mat-form-field",4),c.Vb(12,"mat-label"),c.Gc(13,"Description"),c.Ub(),c.Qb(14,"textarea",6),c.Ub(),c.Vb(15,"button",7),c.Gc(16," Save "),c.Ec(17,E,1,1,"mat-progress-spinner",8),c.Ub(),c.Qb(18,"span",9),c.Vb(19,"button",10),c.dc("click",(function(t){return e.cancel(t)})),c.Gc(20," Close "),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&t&&(c.Cb(4),c.nc("formGroup",e.newCategoryForm),c.Cb(10),c.nc("rows",3),c.Cb(1),c.nc("disabled",e.createCategoryProgress),c.Cb(2),c.nc("ngIf",e.createCategoryProgress))},directives:[o.i,o.f,i.H,i.s,i.j,f.b,f.f,g.b,i.c,i.r,i.i,i.C,f.a,b.b,p.t,o.d,h.a],encapsulation:2}),t}()},lmh7:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n("TYT/"),r=n("5msO"),i=function(){function t(t){this._snack=t}return t.prototype.showMobileInfoMessage=function(t,e,n){void 0===e&&(e=3e3),void 0===n&&(n="top"),this._snack.open(t,"Ok",{horizontalPosition:"center",verticalPosition:n,duration:e})},t.\u0275fac=function(e){return new(e||t)(o.Zb(r.a))},t.\u0275prov=o.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},p0kC:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var o,r=n("425f"),i=n("n90K"),a=n("TYT/"),c=n("DUip"),s=n("M1DL"),l=n("17Os"),b=n("+0bg"),u=n("MqYC"),d=n("GsDI"),p=n("XIAg"),m=n("Use3"),f=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),g=["sidenav"],h=function(t){function e(e,n){var o=t.call(this)||this;return o.router=e,o._storage=n,o.showProgress=!1,o}return f(e,t),e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)(a.Pb(c.b),a.Pb(i.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-stock-mobile"]],viewQuery:function(t,e){var n;1&t&&a.Cc(g,!0),2&t&&a.sc(n=a.ec())&&(e.sidenav=n.first)},features:[a.zb],decls:38,vars:2,consts:[[3,"heading","sidenav"],[2,"margin-top","16px"],["matRipple","","routerLink","/stock/products"],["color","primary","matListIcon",""],["matLine",""],["matRipple","","routerLink","/stock/categories"],["matRipple","","routerLink","/stock/suppliers"],["matRipple","","routerLink","/stock/units"]],template:function(t,e){1&t&&(a.Qb(0,"app-toolbar",0),a.Vb(1,"div",1),a.Vb(2,"mat-card-subtitle"),a.Gc(3,"Manage"),a.Ub(),a.Vb(4,"mat-list"),a.Vb(5,"mat-list-item",2),a.Vb(6,"mat-icon",3),a.Gc(7,"redeem"),a.Ub(),a.Vb(8,"h4",4),a.Gc(9,"Products"),a.Ub(),a.Vb(10,"p",4),a.Gc(11,"add, edit & delete product"),a.Ub(),a.Ub(),a.Qb(12,"mat-divider"),a.Vb(13,"mat-list-item",5),a.Vb(14,"mat-icon",3),a.Gc(15,"category"),a.Ub(),a.Vb(16,"h4",4),a.Gc(17,"Categories"),a.Ub(),a.Vb(18,"p",4),a.Gc(19,"manage product category"),a.Ub(),a.Ub(),a.Qb(20,"mat-divider"),a.Vb(21,"mat-list-item",6),a.Vb(22,"mat-icon",3),a.Gc(23,"local_shipping"),a.Ub(),a.Vb(24,"h4",4),a.Gc(25,"Suppliers"),a.Ub(),a.Vb(26,"p",4),a.Gc(27,"add, edit & delete supplier"),a.Ub(),a.Ub(),a.Qb(28,"mat-divider"),a.Vb(29,"mat-list-item",7),a.Vb(30,"mat-icon",3),a.Gc(31,"linear_scale"),a.Ub(),a.Vb(32,"h4",4),a.Gc(33,"Units"),a.Ub(),a.Vb(34,"p",4),a.Gc(35,"manage quantity unit"),a.Ub(),a.Ub(),a.Qb(36,"mat-divider"),a.Ub(),a.Ub(),a.Qb(37,"app-bottom-bar")),2&t&&a.nc("heading","Stock")("sidenav",e.sidenav)},directives:[s.a,l.l,b.a,b.c,u.s,c.c,d.a,b.b,u.j,p.a,m.a],styles:[".space[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.full-width[_ngcontent-%COMP%]{width:100%}.example-option-img[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px}[dir=rtl][_ngcontent-%COMP%]   .example-option-img[_ngcontent-%COMP%]{margin-right:0;margin-left:8px}.input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}table[_ngcontent-%COMP%]{width:100%}mat-card-subtitle[_ngcontent-%COMP%]{padding:0 16px}"]}),e}(r.a)},qEri:function(t,e,n){"use strict";n.d(e,"a",(function(){return G}));var o=n("QJY3"),r=n("F/XL"),i=n("eUy1"),a=n("bXns"),c=n("TYT/"),s=n("ea4N"),l=n("5msO"),b=n("xJ+t"),u=n("M1DL"),d=n("Valr"),p=n("p+mS"),m=n("GsDI"),f=n("OJ6B"),g=n("pdUi"),h=n("+0bg"),v=n("XIAg"),U=n("MqYC"),y=n("eHTH"),V=n("uad8"),k=n("2J1J"),C=function(t){return{category:t}};function w(t,e){if(1&t&&(c.Vb(0,"div"),c.Qb(1,"mat-divider"),c.Vb(2,"mat-list-item"),c.Vb(3,"div",13),c.Gc(4),c.Ub(),c.Vb(5,"h1",14),c.Gc(6),c.Ub(),c.Vb(7,"span",14),c.Gc(8),c.Ub(),c.Vb(9,"button",15),c.Vb(10,"mat-icon"),c.Gc(11,"more_vert"),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&t){var n=e.$implicit;c.hc(2);var o=c.tc(9);c.Cb(4),c.Ic(" ",n.name.substring(0,1).toUpperCase()," "),c.Cb(2),c.Hc(n.name),c.Cb(2),c.Hc(n.description),c.Cb(1),c.nc("matMenuTriggerData",c.qc(5,C,n))("matMenuTriggerFor",o)}}function x(t,e){if(1&t){var n=c.Wb();c.Vb(0,"div"),c.Vb(1,"div",7),c.Vb(2,"h6",8),c.Gc(3,"Categories"),c.Ub(),c.Qb(4,"span",9),c.Vb(5,"button",10),c.dc("click",(function(){return c.xc(n),c.hc().getCategories()})),c.Vb(6,"mat-icon"),c.Gc(7,"refresh"),c.Ub(),c.Ub(),c.Ub(),c.Vb(8,"cdk-virtual-scroll-viewport",11),c.Vb(9,"mat-list"),c.Ec(10,w,12,7,"div",12),c.ic(11,"async"),c.Ub(),c.Ub(),c.Ub()}if(2&t){var o=c.hc();c.Cb(10),c.nc("cdkVirtualForOf",c.jc(11,1,o.categories))}}function S(t,e){1&t&&(c.Vb(0,"div",16),c.Qb(1,"mat-progress-spinner",17),c.Vb(2,"span"),c.Gc(3,"Fetching categories"),c.Ub(),c.Ub()),2&t&&(c.Cb(1),c.nc("diameter",40))}function P(t,e){if(1&t){var n=c.Wb();c.Vb(0,"button",18),c.dc("click",(function(){c.xc(n);var t=e.category;return c.hc().updateCategory(t)})),c.Gc(1,"Edit"),c.Ub(),c.Vb(2,"button",18),c.dc("click",(function(){c.xc(n);var t=e.category;return c.hc().deleteCategory(t)})),c.Gc(3,"Delete"),c.Ub()}}var G=function(){function t(t,e,n,r){this.stockDatabase=t,this.formBuilder=e,this.dialog=n,this.snack=r,this.fetchCategoriesFlag=!1,this.nameFormControl=new o.g,this.descriptionFormControl=new o.g}return t.prototype.ngOnInit=function(){this.getCategories()},t.prototype.getCategories=function(){var t=this;this.fetchCategoriesFlag=!0,this.stockDatabase.getAllCategory({size:100}).then((function(e){t.categories=Object(r.a)(e),t.fetchCategoriesFlag=!1})).catch((function(e){console.log(e),t.fetchCategoriesFlag=!1}))},t.prototype.deleteCategory=function(t){var e=this;this.dialog.open(a.b,{data:t,disableClose:!0}).afterClosed().subscribe((function(t){t?e.getCategories():e.snack.open("Category not deleted","Ok",{duration:2e3})}))},t.prototype.updateCategory=function(t){var e=this;this.dialog.open(a.c,{minWidth:"80%",closeOnNavigation:!0,hasBackdrop:!0,data:t}).afterClosed().subscribe((function(t){t&&e.getCategories()}))},t.prototype.openAddCategoryDialog=function(){var t=this;this.dialog.open(a.c,{minWidth:"80%",closeOnNavigation:!0,hasBackdrop:!0}).afterClosed().subscribe((function(e){e&&t.getCategories()}))},t.\u0275fac=function(e){return new(e||t)(c.Pb(i.a),c.Pb(o.f),c.Pb(s.b),c.Pb(l.a))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-categories-mobile-ui"]],decls:11,vars:6,consts:[[1,"match-parent"],[1,"flex-grow-0",3,"heading","hasBackRoute","backLink","showProgress"],[4,"ngIf"],["style","height: 100vh; width: 100vw; position: fixed","class","d-flex justify-content-center align-items-center flex-column",4,"ngIf"],["color","primary","mat-flat-button","",1,"mat-fab","ft-fab-position",2,"position","fixed","bottom","16px","right","16px",3,"click"],["menu",""],["matMenuContent",""],[1,"d-flex","flex-row","align-items-center"],[2,"padding-left","16px","margin","0"],[1,"flex-grow-1"],["mat-icon-button","","color","primary",2,"padding-right","16px",3,"click"],["itemSize","10",2,"height","100vh","width","100vw"],[4,"cdkVirtualFor","cdkVirtualForOf"],["matListIcon","",1,"text-center",2,"width","40px","height","40px","border-radius","60px","background","#f5f5f5","color","black"],["matLine",""],["matSuffix","","mat-icon-button","",3,"matMenuTriggerData","matMenuTriggerFor"],[1,"d-flex","justify-content-center","align-items-center","flex-column",2,"height","100vh","width","100vw","position","fixed"],["matTooltip","fetch categories","mode","indeterminate","color","primary",3,"diameter"],["mat-menu-item","",3,"click"]],template:function(t,e){1&t&&(c.Vb(0,"mat-sidenav-container",0),c.Vb(1,"mat-sidenav-content"),c.Qb(2,"app-toolbar",1),c.Ec(3,x,12,3,"div",2),c.Ec(4,S,4,1,"div",3),c.Vb(5,"button",4),c.dc("click",(function(){return e.openAddCategoryDialog()})),c.Vb(6,"mat-icon"),c.Gc(7,"add"),c.Ub(),c.Ub(),c.Vb(8,"mat-menu",null,5),c.Ec(10,P,4,0,"ng-template",6),c.Ub(),c.Ub(),c.Ub()),2&t&&(c.Cb(2),c.nc("heading","Stock")("hasBackRoute",!0)("backLink","/stock")("showProgress",!1),c.Cb(1),c.nc("ngIf",!e.fetchCategoriesFlag),c.Cb(1),c.nc("ngIf",e.fetchCategoriesFlag))},directives:[b.e,b.f,u.a,d.t,p.b,m.a,f.e,f.a,g.d,g.a,h.a,g.c,v.a,h.c,h.b,U.j,y.i,f.d,V.a,k.a,f.b],pipes:[d.b],styles:["td[_ngcontent-%COMP%]{padding:8px}"]}),t}()},rBRJ:function(t,e,n){"use strict";n.d(e,"b",(function(){return Ut})),n.d(e,"a",(function(){return yt})),n.d(e,"c",(function(){return Vt}));var o=n("F/XL"),r=n("h/AT"),i=n("ea4N"),a=n("nbAZ"),c=n("ETwC"),s=n("425f"),l=n("njSL"),b=n("eUy1"),u=n("iXKo"),d=n("TYT/"),p=n("5msO"),m=n("p+mS"),f=n("Valr"),g=n("XIAg"),h=n("uad8");function v(t,e){1&t&&d.Qb(0,"mat-progress-spinner",9)}var U,y=function(){function t(t,e,n,o){this.dialogRef=t,this.snack=e,this.logger=n,this.stockApi=o,this.importProgress=!1}return t._sanitizeField=function(t){return isNaN(Number(t))?t.trim().startsWith("[",0)||t.trim().startsWith("{",0)?JSON.parse(t):t:Number(t)},t.prototype.ngOnInit=function(){},t.prototype.csvUploaded=function(t){var e=this,n=t.target.files[0];if(n){var o=new FileReader;o.onload=function(t){e.csvToJSON(t.target.result,(function(t){e.importProgress=!0,e.stockApi.importStocks(t).then((function(t){e.importProgress=!1,e.dialogRef.close(!0),e.snack.open("Products imported","Ok",{duration:3e3})})).catch((function(t){e.logger.e(t),e.importProgress=!1,e.snack.open("Products not imported, try again","Ok",{duration:3e3})}))}))},o.readAsText(n,"UTF-8")}else this.snack.open("Error while read csv","Ok",{duration:3e3})},t.prototype.csvToJSON=function(e,n){for(var o=e.split("\n"),r=[],i=o[0].split(","),a=1;a<o.length-1;a++){for(var c={},s=o[a].split(","),l=0;l<i.length;l++){var b=s[l].split("").map((function(t,e,n){return 0===e&&'"'===t||e===n.length-1&&'"'===t?"":t})).join("");b=t._sanitizeField(b),c[i[l].toString().split('"').join("")]=b}console.log(c),r.push(c)}return n&&"function"==typeof n?n(r):r},t.\u0275fac=function(e){return new(e||t)(d.Pb(i.h),d.Pb(p.a),d.Pb(u.a),d.Pb(b.a))},t.\u0275cmp=d.Jb({type:t,selectors:[["app-upload-products"]],decls:111,vars:2,consts:[["mat-dialog-title","",1,"d-flex","flex-row","align-items-center"],[2,"flex-grow","1"],["color","primary","mat-flat-button","",1,"ft-button",3,"disabled","click"],["style","display: inline-block","diameter","30","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[1,"table","table-responsive","table-bordered","table-hover"],[1,"table-data-row"],["type","file","accept",".csv",2,"display","none",3,"change"],["fileU",""],["diameter","30","mode","indeterminate",2,"display","inline-block"]],template:function(t,e){if(1&t){var n=d.Wb();d.Vb(0,"div"),d.Vb(1,"div",0),d.Gc(2," Import Products "),d.Qb(3,"span",1),d.Vb(4,"button",2),d.dc("click",(function(){return d.xc(n),d.tc(110).click()})),d.Gc(5," Upload Csv "),d.Ec(6,v,1,0,"mat-progress-spinner",3),d.Ub(),d.Ub(),d.Qb(7,"mat-divider"),d.Vb(8,"div",4),d.Vb(9,"p"),d.Qb(10,"br"),d.Gc(11," Prepare your excel sheet and change it to CSV then upload it here."),d.Qb(12,"br"),d.Gc(13," Your excel sheet must contain the following columns"),d.Qb(14,"br"),d.Vb(15,"u"),d.Gc(16,"Note: CSV delimiter must be "),d.Ub(),d.Gc(17," ( , ) "),d.Ub(),d.Vb(18,"div"),d.Vb(19,"table",5),d.Vb(20,"tr",6),d.Vb(21,"th"),d.Gc(22,"Column Name"),d.Ub(),d.Vb(23,"th"),d.Gc(24,"Description"),d.Ub(),d.Ub(),d.Vb(25,"tr"),d.Vb(26,"td"),d.Gc(27,"product"),d.Ub(),d.Vb(28,"td"),d.Gc(29,"Product name "),d.Vb(30,"u"),d.Gc(31,"e.g panadol - 10mg"),d.Ub(),d.Ub(),d.Ub(),d.Vb(32,"tr"),d.Vb(33,"td"),d.Gc(34,"description"),d.Ub(),d.Vb(35,"td"),d.Gc(36,"Product description "),d.Vb(37,"u"),d.Gc(38,"e.g medicine for headache"),d.Ub(),d.Ub(),d.Ub(),d.Vb(39,"tr"),d.Vb(40,"td"),d.Gc(41,"purchase"),d.Ub(),d.Vb(42,"td"),d.Gc(43,"Purchase price of a product "),d.Vb(44,"u"),d.Gc(45,"e.g 1000"),d.Ub(),d.Ub(),d.Ub(),d.Vb(46,"tr"),d.Vb(47,"td"),d.Gc(48,"unit"),d.Ub(),d.Vb(49,"td"),d.Gc(50,"Unit of a product "),d.Vb(51,"u"),d.Gc(52,"e.g tablet"),d.Ub(),d.Ub(),d.Ub(),d.Vb(53,"tr"),d.Vb(54,"td"),d.Gc(55,"retailPrice"),d.Ub(),d.Vb(56,"td"),d.Gc(57,"Retail price for a product "),d.Vb(58,"u"),d.Gc(59,"e.g 1400"),d.Ub(),d.Ub(),d.Ub(),d.Vb(60,"tr"),d.Vb(61,"td"),d.Gc(62,"wholesalePrice"),d.Ub(),d.Vb(63,"td"),d.Gc(64,"Wholesale price for a product "),d.Vb(65,"u"),d.Gc(66,"e.g 5000"),d.Ub(),d.Ub(),d.Ub(),d.Vb(67,"tr"),d.Vb(68,"td"),d.Gc(69,"wholesaleQuantity"),d.Ub(),d.Vb(70,"td"),d.Gc(71,"how many unit quantity of product to be reduced when product sold as a whole "),d.Vb(72,"u"),d.Gc(73,"e.g 3"),d.Ub(),d.Ub(),d.Ub(),d.Vb(74,"tr"),d.Vb(75,"td"),d.Gc(76,"quantity"),d.Ub(),d.Vb(77,"td"),d.Gc(78,"Initial stock quantity "),d.Vb(79,"u"),d.Gc(80,"e.g 200"),d.Ub(),d.Ub(),d.Ub(),d.Vb(81,"tr"),d.Vb(82,"td"),d.Gc(83,"supplier"),d.Ub(),d.Vb(84,"td"),d.Gc(85,"Name of supplier "),d.Vb(86,"u"),d.Gc(87,"e.g Joe Shop"),d.Ub(),d.Ub(),d.Ub(),d.Vb(88,"tr"),d.Vb(89,"td"),d.Gc(90,"reorder"),d.Ub(),d.Vb(91,"td"),d.Gc(92,"Reorder level "),d.Vb(93,"u"),d.Gc(94,"e.g 5"),d.Ub(),d.Ub(),d.Ub(),d.Vb(95,"tr"),d.Vb(96,"td"),d.Gc(97,"category"),d.Ub(),d.Vb(98,"td"),d.Gc(99,"Reorder level "),d.Vb(100,"u"),d.Gc(101,"e.g 5"),d.Ub(),d.Ub(),d.Ub(),d.Vb(102,"tr"),d.Vb(103,"td"),d.Gc(104,"expire"),d.Ub(),d.Vb(105,"td"),d.Gc(106,"Expire date "),d.Vb(107,"u"),d.Gc(108,"e.g 2050-01-01"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(109,"input",7,8),d.dc("change",(function(t){return e.csvUploaded(t)})),d.Ub()}2&t&&(d.Cb(4),d.nc("disabled",e.importProgress),d.Cb(2),d.nc("ngIf",e.importProgress))},directives:[i.i,m.b,f.t,g.a,i.f,h.a],styles:[""]}),t}(),V=n("n90K"),k=n("e5TK"),C=n("AytR"),w=n("DUip"),x=n("xJ+t"),S=n("R/7W"),P=n("M1DL"),G=n("IzAD"),F=n("17Os"),D=n("2J1J"),I=n("GsDI"),T=n("OJ6B"),M=n("bXns"),O=n("4DNZ"),E=n("/KH0"),A=n("MqYC"),j=n("dOeY"),R=(U=function(t,e){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}U(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Q=["sidenav"];function _(t,e){1&t&&(d.Vb(0,"mat-icon"),d.Gc(1,"refresh"),d.Ub())}function N(t,e){1&t&&d.Qb(0,"mat-progress-spinner",42),2&t&&d.nc("diameter",20)}function J(t,e){1&t&&(d.Vb(0,"mat-icon"),d.Gc(1,"cloud_download"),d.Ub())}function H(t,e){1&t&&d.Qb(0,"mat-progress-spinner",43),2&t&&d.nc("diameter",20)}function B(t,e){1&t&&(d.Vb(0,"th",44),d.Gc(1,"Product"),d.Ub())}function L(t,e){if(1&t&&(d.Vb(0,"td",45),d.Gc(1),d.Ub()),2&t){var n=e.$implicit;d.Cb(1),d.Hc(n.product)}}function q(t,e){1&t&&d.Qb(0,"td",46)}function Y(t,e){1&t&&(d.Vb(0,"th",44),d.Gc(1,"Quantity"),d.Ub())}function W(t,e){if(1&t&&(d.Vb(0,"td",45),d.Gc(1),d.ic(2,"number"),d.Ub()),2&t){var n=e.$implicit;d.Cb(1),d.Hc(d.jc(2,1,n.quantity))}}function $(t,e){1&t&&d.Qb(0,"td",46)}function z(t,e){1&t&&(d.Vb(0,"th",44),d.Gc(1,"Purchase (TZS)"),d.Ub())}function K(t,e){if(1&t&&(d.Vb(0,"td",45),d.Gc(1),d.ic(2,"number"),d.Ub()),2&t){var n=e.$implicit;d.Cb(1),d.Hc(d.jc(2,1,n.purchase))}}function X(t,e){1&t&&d.Qb(0,"td",46)}function Z(t,e){1&t&&(d.Vb(0,"th",44),d.Gc(1,"R.Price (TZS)"),d.Ub())}function tt(t,e){if(1&t&&(d.Vb(0,"td",47),d.Gc(1),d.ic(2,"number"),d.Ub()),2&t){var n=e.$implicit;d.Cb(1),d.Hc(d.jc(2,1,n.retailPrice))}}function et(t,e){1&t&&d.Qb(0,"td",46)}function nt(t,e){1&t&&(d.Vb(0,"th",44),d.Gc(1,"W.Price (TZS)"),d.Ub())}function ot(t,e){if(1&t&&(d.Vb(0,"td",45),d.Gc(1),d.ic(2,"number"),d.Ub()),2&t){var n=e.$implicit;d.Cb(1),d.Hc(d.jc(2,1,n.wholesalePrice))}}function rt(t,e){1&t&&d.Qb(0,"td",46)}function it(t,e){1&t&&(d.Vb(0,"th",44),d.Gc(1,"Expire"),d.Ub())}function at(t,e){if(1&t&&(d.Vb(0,"td",45),d.Gc(1),d.ic(2,"date"),d.Ub()),2&t){var n=e.$implicit;d.Cb(1),d.Hc(d.jc(2,1,n.expire))}}function ct(t,e){1&t&&d.Qb(0,"td",46)}function st(t,e){1&t&&(d.Vb(0,"th",44),d.Vb(1,"div",48),d.Vb(2,"span"),d.Gc(3,"Actions"),d.Ub(),d.Ub(),d.Ub())}function lt(t,e){if(1&t){var n=d.Wb();d.Vb(0,"td",45),d.Vb(1,"div",49),d.Vb(2,"button",50),d.Vb(3,"mat-icon",51),d.Gc(4,"more_vert"),d.Ub(),d.Ub(),d.Vb(5,"mat-menu",null,52),d.Vb(7,"button",53),d.dc("click",(function(){d.xc(n);var t=e.$implicit;return d.hc().viewProduct(t)})),d.Gc(8,"View "),d.Ub(),d.Vb(9,"button",53),d.dc("click",(function(){d.xc(n);var t=e.$implicit;return d.hc().editStock(t)})),d.Gc(10,"Edit "),d.Ub(),d.Vb(11,"button",53),d.dc("click",(function(){d.xc(n);var t=e.$implicit;return d.hc().deleteStock(t)})),d.Gc(12,"Delete "),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&t){var o=d.tc(6);d.Cb(2),d.nc("matMenuTriggerFor",o),d.Cb(5),d.nc("matTooltip","change product information"),d.Cb(2),d.nc("matTooltip","change product information"),d.Cb(2),d.nc("matTooltip","permanent delete stock")}}function bt(t,e){1&t&&d.Qb(0,"td",46)}function ut(t,e){1&t&&d.Qb(0,"tr",54)}function dt(t,e){1&t&&d.Qb(0,"tr",55),2&t&&d.oc("matTooltip",e.$implicit.product)}function pt(t,e){1&t&&d.Qb(0,"tr",56)}var mt=function(){return[10,20,100]};function ft(t,e){if(1&t&&(d.Vb(0,"h5"),d.Gc(1),d.Ub()),2&t){var n=d.hc().$implicit;d.Cb(1),d.Ic(" ",n," ")}}function gt(t,e){if(1&t&&(d.Vb(0,"span"),d.Gc(1),d.Ub()),2&t){var n=d.hc().$implicit,o=d.hc();d.Cb(1),d.Ic(" ",o.data[n]," ")}}function ht(t,e){1&t&&d.Qb(0,"mat-divider",4)}function vt(t,e){if(1&t&&(d.Vb(0,"div"),d.Ec(1,ft,2,1,"h5",2),d.Ec(2,gt,2,1,"span",2),d.Ec(3,ht,1,0,"mat-divider",3),d.Ub()),2&t){var n=e.$implicit;d.Cb(1),d.nc("ngIf","image"!==n&&"objectId"!==n&&"createdAt"!==n&&"updatedAt"!==n&&"idOld"!==n),d.Cb(1),d.nc("ngIf","image"!==n&&"objectId"!==n&&"createdAt"!==n&&"updatedAt"!==n&&"idOld"!==n),d.Cb(1),d.nc("ngIf","image"!==n&&"objectId"!==n&&"createdAt"!==n&&"updatedAt"!==n&&"idOld"!==n)}}var Ut=function(t){function e(e,n,r,i,a,c,s,l,b){var u=t.call(this)||this;return u.router=e,u.indexDb=n,u.bottomSheet=r,u.snack=i,u.logger=a,u.dialog=c,u.eventApi=s,u.activatedRoute=l,u.stockDatabase=b,u.selectedTab=0,u.stockFetchProgress=!1,u.isMobile=C.a.android,u.exportProgress=!1,u.showProgress=!1,u.hotReloadProgress=!1,u.totalPurchase=Object(o.a)(0),u.stockColumns=["product","quantity","purchase","retailPrice","wholesalePrice","expire","action"],u}return R(e,t),e.prototype.ngOnInit=function(){var t=this;this.activatedRoute.queryParams.subscribe((function(e){e&&(t.selectedTab=Number(e.t))})),this.eventApi.listen(k.a.STOCK_UPDATED,(function(e){t.reload()})),this.initializeView()},e.prototype.showProgressBar=function(){this.showProgress=!0},e.prototype.hideProgressBar=function(){this.showProgress=!1},e.prototype.initializeView=function(){this.getStocksFromCache()},e.prototype.getStocksFromCache=function(t){var e=this;this.stockFetchProgress=!0,this.indexDb.getStocks().then((function(n){if(!n&&!Array.isArray(n))throw e.hotReloadStocks(),new Error("Stock not available in localstorage");if(n&&Array.isArray(n)&&0===n.length)throw e.hotReloadStocks(),new Error("Stock not available in localstorage");e.stockDatasource=new c.o(n),e.stockDatasource.paginator=e.paginator,e._getTotalPurchaseOfStock(n),e.stockFetchProgress=!1,t&&t(null)})).catch((function(n){e.stockFetchProgress=!1,e.logger.e(n),e.snack.open("Failed to get stocks from local storage","Ok",{duration:3e3}),t&&t(n)}))},e.prototype.hotReloadStocks=function(){var t=this;this.hotReloadProgress=!0,this.stockDatabase.getAllStock().then((function(e){return n=t,void 0,r=function(){return function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.hotReloadProgress=!1,[4,this.indexDb.saveStocks(e)];case 1:return t.sent(),this.stockDatasource=new c.o(e),this.stockDatasource.paginator=this.paginator,this._getTotalPurchaseOfStock(e),this.stockFetchProgress=!1,this.snack.open("Successful retrieve stocks from server","Ok",{duration:3e3}),[3,3];case 2:throw t.sent();case 3:return[2]}}))},new((o=void 0)||(o=Promise))((function(t,e){function i(t){try{c(r.next(t))}catch(n){e(n)}}function a(t){try{c(r.throw(t))}catch(n){e(n)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(i,a)}c((r=r.apply(n,[])).next())}));var n,o,r})).catch((function(e){t.hotReloadProgress=!1,t.logger.e(e),t.snack.open("Fails to get stocks from server, try again","Ok",{duration:3e3})}))},e.prototype.editStock=function(t){var e=this;this.router.navigateByUrl("/stock/edit/"+t.objectId+"?stock="+encodeURI(JSON.stringify(t))).catch((function(t){return e.logger.e(t)}))},e.prototype.deleteStock=function(t){var e=this;this.dialog.open(yt,{width:"350",data:t}).afterClosed().subscribe((function(n){"no"===n?e.snack.open("Deletion is cancelled","Ok",{duration:3e3}):(e.showProgressBar(),e.stockDatabase.deleteStock(t).then((function(n){e.snack.open("Product successful deleted","Ok",{duration:3e3}),e.hideProgressBar(),e._removeProductFromTable(t)})).catch((function(t){e.logger.e(t),e.snack.open("Product is not deleted successful, try again","Ok",{duration:3e3}),e.hideProgressBar()})))}))},e.prototype.viewProduct=function(t){this.bottomSheet.open(Vt,{data:t,closeOnNavigation:!0})},e.prototype.handleSearch=function(t){var e=this;this.getStocksFromCache((function(){e.stockDatasource.filter=t?t.toString().toLowerCase():""}))},e.prototype._removeProductFromTable=function(t){var e=this;this.stockDatasource.data=this.stockDatasource.data.filter((function(e){return e.objectId!==t.objectId})),this._getTotalPurchaseOfStock(this.stockDatasource.data),this.indexDb.getStocks().then((function(n){var o=n.filter((function(e){return e.objectId!==t.objectId}));e.indexDb.saveStocks(o).catch((function(t){return e.logger.w("Fails to update stock due to deleted item")}))})).catch((function(t){e.logger.w("fails to update stocks to to deleted item")}))},e.prototype._getTotalPurchaseOfStock=function(t){var e=t.reduce((function(t,e){return{purchase:t.purchase+e.purchase}}));this.totalPurchase=Object(o.a)(e.purchase)},e.prototype.reload=function(){this.getStocksFromCache((function(){}))},e.prototype.exportStock=function(){var t=this;this.exportProgress=!0,this.stockDatabase.exportToExcel().then((function(e){t.exportProgress=!1,t.snack.open("Stock sent to your email, visit your email to download it","Ok",{duration:1e4})})).catch((function(e){t.logger.e(e),t.exportProgress=!1,t.snack.open("Request fails try again later","Ok",{duration:3e3})}))},e.prototype.importStocks=function(){var t=this;this.dialog.open(y,{closeOnNavigation:!0}).afterClosed().subscribe((function(e){!0===e&&t.hotReloadStocks()}))},e.prototype.ngOnDestroy=function(){this.eventApi.unListen(k.a.STOCK_UPDATED)},e.\u0275fac=function(t){return new(t||e)(d.Pb(w.b),d.Pb(V.a),d.Pb(r.b),d.Pb(p.a),d.Pb(u.a),d.Pb(i.b),d.Pb(l.a),d.Pb(w.a),d.Pb(b.a))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-stock"]],viewQuery:function(t,e){var n;1&t&&(d.Cc(Q,!0),d.Cc(a.a,!0)),2&t&&(d.sc(n=d.ec())&&(e.sidenav=n.first),d.sc(n=d.ec())&&(e.paginator=n.first))},features:[d.zb],decls:76,vars:22,consts:[[1,"match-parent"],[1,"match-parent-side",3,"fixedInViewport","mode","opened"],["sidenav",""],[3,"heading","showSearch","searchPlaceholder","sidenav","showProgress","searchCallback"],[1,"container"],[1,"row",2,"margin","16px"],[1,"full-width","col-12"],["color","primary",3,"selectedIndex"],["label","Products"],[1,"mat-elevation-z0"],[1,"d-flex","flex-row"],["routerLink","/stock/create","color","primary","mat-flat-button","",1,"ft-button"],[1,"toolbar-spacer"],[2,"width","8px","height","8px"],["matTooltip","Reload from server","color","primary","mat-flat-button","",1,"ft-button",3,"disabled","click"],[4,"ngIf"],["matTooltip","Fetch products from server","mode","indeterminate","color","primary",3,"diameter",4,"ngIf"],["matTooltip","Export Products To Csv","color","primary","mat-flat-button","",1,"ft-button",3,"disabled","click"],["matTooltip","Export Products InProgress..","mode","indeterminate","color","primary",3,"diameter",4,"ngIf"],["matTooltip","Import Products","color","primary","mat-flat-button","",1,"ft-button",3,"click"],["color","primary","mat-icon-button","",3,"matMenuTriggerFor"],["stockMenu",""],["matTooltip","refresh products in table","mat-menu-item","",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","product"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","quantity"],["matColumnDef","purchase"],["matColumnDef","retailPrice"],["matRipple","","mat-cell","",4,"matCellDef"],["matColumnDef","wholesalePrice"],["matColumnDef","expire"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["class","table-data-row","mat-row","",3,"matTooltip",4,"matRowDef","matRowDefColumns"],["mat-footer-row","","style","font-size: 36px",4,"matFooterRowDef"],["showFirstLastButtons","",3,"pageSizeOptions"],["label","Categories"],["label","Units"],["label","Suppliers"],["matTooltip","Fetch products from server","mode","indeterminate","color","primary",3,"diameter"],["matTooltip","Export Products InProgress..","mode","indeterminate","color","primary",3,"diameter"],["mat-header-cell",""],["mat-cell",""],["mat-footer-cell",""],["matRipple","","mat-cell",""],[1,"d-flex","flex-row","justify-content-end","align-items-end"],[1,"d-flex","flex-row","flex-nowrap","justify-content-end","align-items-end"],["mat-icon-button","",3,"matMenuTriggerFor"],["color","primary"],["menu",""],["mat-menu-item","",3,"matTooltip","click"],["mat-header-row",""],["mat-row","",1,"table-data-row",3,"matTooltip"],["mat-footer-row","",2,"font-size","36px"]],template:function(t,e){if(1&t&&(d.Vb(0,"mat-sidenav-container",0),d.Vb(1,"mat-sidenav",1,2),d.Qb(3,"app-admin-drawer"),d.Ub(),d.Vb(4,"mat-sidenav-content"),d.Vb(5,"div"),d.Vb(6,"app-toolbar",3),d.dc("searchCallback",(function(t){return e.handleSearch(t)})),d.Ub(),d.Vb(7,"div",4),d.Vb(8,"div",5),d.Vb(9,"div",6),d.Vb(10,"mat-tab-group",7),d.Vb(11,"mat-tab",8),d.Vb(12,"div"),d.Vb(13,"mat-card",9),d.Vb(14,"mat-card-title",10),d.Vb(15,"button",11),d.Gc(16," Add Product "),d.Ub(),d.Qb(17,"span",12),d.Qb(18,"span",13),d.Vb(19,"button",14),d.dc("click",(function(){return e.hotReloadStocks()})),d.Ec(20,_,2,0,"mat-icon",15),d.Ec(21,N,1,1,"mat-progress-spinner",16),d.Ub(),d.Qb(22,"span",13),d.Vb(23,"button",17),d.dc("click",(function(){return e.exportStock()})),d.Ec(24,J,2,0,"mat-icon",15),d.Ec(25,H,1,1,"mat-progress-spinner",18),d.Ub(),d.Qb(26,"span",13),d.Vb(27,"button",19),d.dc("click",(function(){return e.importStocks()})),d.Vb(28,"mat-icon"),d.Gc(29,"cloud_upload"),d.Ub(),d.Ub(),d.Vb(30,"button",20),d.Vb(31,"mat-icon"),d.Gc(32,"more_vert"),d.Ub(),d.Ub(),d.Vb(33,"mat-menu",null,21),d.Vb(35,"button",22),d.dc("click",(function(){return e.reload()})),d.Gc(36,"Reload"),d.Ub(),d.Ub(),d.Ub(),d.Vb(37,"table",23),d.Tb(38,24),d.Ec(39,B,2,0,"th",25),d.Ec(40,L,2,1,"td",26),d.Ec(41,q,1,0,"td",27),d.Sb(),d.Tb(42,28),d.Ec(43,Y,2,0,"th",25),d.Ec(44,W,3,3,"td",26),d.Ec(45,$,1,0,"td",27),d.Sb(),d.Tb(46,29),d.Ec(47,z,2,0,"th",25),d.Ec(48,K,3,3,"td",26),d.Ec(49,X,1,0,"td",27),d.Sb(),d.Tb(50,30),d.Ec(51,Z,2,0,"th",25),d.Ec(52,tt,3,3,"td",31),d.Ec(53,et,1,0,"td",27),d.Sb(),d.Tb(54,32),d.Ec(55,nt,2,0,"th",25),d.Ec(56,ot,3,3,"td",26),d.Ec(57,rt,1,0,"td",27),d.Sb(),d.Tb(58,33),d.Ec(59,it,2,0,"th",25),d.Ec(60,at,3,3,"td",26),d.Ec(61,ct,1,0,"td",27),d.Sb(),d.Tb(62,34),d.Ec(63,st,4,0,"th",25),d.Ec(64,lt,13,4,"td",26),d.Ec(65,bt,1,0,"td",27),d.Sb(),d.Ec(66,ut,1,0,"tr",35),d.Ec(67,dt,1,1,"tr",36),d.Ec(68,pt,1,0,"tr",37),d.Ub(),d.Qb(69,"mat-paginator",38),d.Ub(),d.Ub(),d.Ub(),d.Vb(70,"mat-tab",39),d.Qb(71,"app-categories"),d.Ub(),d.Vb(72,"mat-tab",40),d.Qb(73,"app-units"),d.Ub(),d.Vb(74,"mat-tab",41),d.Qb(75,"app-suppliers"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&t){var n=d.tc(2),o=d.tc(34);d.Cb(1),d.nc("fixedInViewport",!0)("mode",e.enoughWidth()?"side":"over")("opened",e.enoughWidth()),d.Cb(5),d.nc("heading","Stock")("showSearch",!0)("searchPlaceholder","Type to search")("sidenav",n)("showProgress",e.showProgress),d.Cb(4),d.nc("selectedIndex",e.selectedTab),d.Cb(9),d.nc("disabled",e.hotReloadProgress),d.Cb(1),d.nc("ngIf",!e.hotReloadProgress),d.Cb(1),d.nc("ngIf",e.hotReloadProgress),d.Cb(2),d.nc("disabled",e.exportProgress),d.Cb(1),d.nc("ngIf",!e.exportProgress),d.Cb(1),d.nc("ngIf",e.exportProgress),d.Cb(5),d.nc("matMenuTriggerFor",o),d.Cb(7),d.nc("dataSource",e.stockDatasource),d.Cb(29),d.nc("matHeaderRowDef",e.stockColumns),d.Cb(1),d.nc("matRowDefColumns",e.stockColumns),d.Cb(1),d.nc("matFooterRowDef",e.stockColumns),d.Cb(1),d.nc("pageSizeOptions",d.pc(21,mt))}},directives:[x.e,x.d,S.a,x.f,P.a,G.c,G.a,F.a,F.m,m.b,w.c,D.a,f.t,I.a,T.d,T.e,T.b,c.n,c.c,c.i,c.b,c.e,c.k,c.m,c.g,a.a,M.a,O.c,E.c,h.a,c.h,c.a,c.d,A.s,c.j,c.l,c.f],pipes:[f.g,f.f],styles:[".space[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.full-width[_ngcontent-%COMP%]{width:100%}.example-option-img[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px}[dir=rtl][_ngcontent-%COMP%]   .example-option-img[_ngcontent-%COMP%]{margin-right:0;margin-left:8px}.input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}table[_ngcontent-%COMP%]{width:100%}"]}),e}(s.a),yt=function(){function t(t,e){this.dialogRef=t,this.data=e}return t.prototype.delete=function(t){this.dialogRef.close(t)},t.prototype.cancel=function(){this.dialogRef.close("no")},t.\u0275fac=function(e){return new(e||t)(d.Pb(i.h),d.Pb(i.a))},t.\u0275cmp=d.Jb({type:t,selectors:[["app-dialog-delete"]],decls:14,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"text-center"],[1,"d-flex","justify-content-center"],[1,"align-self-center",2,"margin","8px"],["color","primary","mat-button","",3,"click"],[1,"alert-secondary",2,"margin","8px"]],template:function(t,e){1&t&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"mat-panel-title",3),d.Gc(4," Your about to delete : "),d.Vb(5,"b"),d.Gc(6),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(7,"div",4),d.Vb(8,"div",5),d.Vb(9,"button",6),d.dc("click",(function(){return e.delete(e.data)})),d.Gc(10,"Delete"),d.Ub(),d.Ub(),d.Vb(11,"div",7),d.Vb(12,"button",6),d.dc("click",(function(){return e.cancel()})),d.Gc(13,"Cancel"),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&t&&(d.Cb(6),d.Hc(" "+e.data.product))},directives:[j.h,m.b],encapsulation:2}),t}(),Vt=function(){function t(t,e){this._bottomSheetRef=t,this.data=e}return t.prototype.openLink=function(t){this._bottomSheetRef.dismiss(),t.preventDefault()},t.prototype.getStocks=function(){return Object.keys(this.data)},t.\u0275fac=function(e){return new(e||t)(d.Pb(r.e),d.Pb(r.a))},t.\u0275cmp=d.Jb({type:t,selectors:[["app-stock-details"]],decls:3,vars:2,consts:[["alt","",2,"max-width","400px","height","auto",3,"src"],[4,"ngFor","ngForOf"],[4,"ngIf"],["style","margin-bottom: 8px",4,"ngIf"],[2,"margin-bottom","8px"]],template:function(t,e){1&t&&(d.Vb(0,"div"),d.Qb(1,"img",0),d.Ub(),d.Ec(2,vt,4,3,"div",1)),2&t&&(d.Cb(1),d.nc("src",e.data.image,d.yc),d.Cb(1),d.nc("ngForOf",e.getStocks()))},directives:[f.s,f.t,g.a],encapsulation:2}),t}()}}]);