"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ParseMessageQueue = void 0;

var _AdapterLoader = require("./Adapters/AdapterLoader");

var _EventEmitterMQ = require("./Adapters/MessageQueue/EventEmitterMQ");

const ParseMessageQueue = {};
exports.ParseMessageQueue = ParseMessageQueue;

ParseMessageQueue.createPublisher = function (config) {
  const adapter = (0, _AdapterLoader.loadAdapter)(config.messageQueueAdapter, _EventEmitterMQ.EventEmitterMQ, config);

  if (typeof adapter.createPublisher !== 'function') {
    throw 'pubSubAdapter should have createPublisher()';
  }

  return adapter.createPublisher(config);
};

ParseMessageQueue.createSubscriber = function (config) {
  const adapter = (0, _AdapterLoader.loadAdapter)(config.messageQueueAdapter, _EventEmitterMQ.EventEmitterMQ, config);

  if (typeof adapter.createSubscriber !== 'function') {
    throw 'messageQueueAdapter should have createSubscriber()';
  }

  return adapter.createSubscriber(config);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9QYXJzZU1lc3NhZ2VRdWV1ZS5qcyJdLCJuYW1lcyI6WyJQYXJzZU1lc3NhZ2VRdWV1ZSIsImNyZWF0ZVB1Ymxpc2hlciIsImNvbmZpZyIsImFkYXB0ZXIiLCJtZXNzYWdlUXVldWVBZGFwdGVyIiwiRXZlbnRFbWl0dGVyTVEiLCJjcmVhdGVTdWJzY3JpYmVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBRUEsTUFBTUEsaUJBQWlCLEdBQUcsRUFBMUI7OztBQUVBQSxpQkFBaUIsQ0FBQ0MsZUFBbEIsR0FBb0MsVUFBU0MsTUFBVCxFQUEyQjtBQUM3RCxRQUFNQyxPQUFPLEdBQUcsZ0NBQ2RELE1BQU0sQ0FBQ0UsbUJBRE8sRUFFZEMsOEJBRmMsRUFHZEgsTUFIYyxDQUFoQjs7QUFLQSxNQUFJLE9BQU9DLE9BQU8sQ0FBQ0YsZUFBZixLQUFtQyxVQUF2QyxFQUFtRDtBQUNqRCxVQUFNLDZDQUFOO0FBQ0Q7O0FBQ0QsU0FBT0UsT0FBTyxDQUFDRixlQUFSLENBQXdCQyxNQUF4QixDQUFQO0FBQ0QsQ0FWRDs7QUFZQUYsaUJBQWlCLENBQUNNLGdCQUFsQixHQUFxQyxVQUFTSixNQUFULEVBQTRCO0FBQy9ELFFBQU1DLE9BQU8sR0FBRyxnQ0FDZEQsTUFBTSxDQUFDRSxtQkFETyxFQUVkQyw4QkFGYyxFQUdkSCxNQUhjLENBQWhCOztBQUtBLE1BQUksT0FBT0MsT0FBTyxDQUFDRyxnQkFBZixLQUFvQyxVQUF4QyxFQUFvRDtBQUNsRCxVQUFNLG9EQUFOO0FBQ0Q7O0FBQ0QsU0FBT0gsT0FBTyxDQUFDRyxnQkFBUixDQUF5QkosTUFBekIsQ0FBUDtBQUNELENBVkQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBsb2FkQWRhcHRlciB9IGZyb20gJy4vQWRhcHRlcnMvQWRhcHRlckxvYWRlcic7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXJNUSB9IGZyb20gJy4vQWRhcHRlcnMvTWVzc2FnZVF1ZXVlL0V2ZW50RW1pdHRlck1RJztcblxuY29uc3QgUGFyc2VNZXNzYWdlUXVldWUgPSB7fTtcblxuUGFyc2VNZXNzYWdlUXVldWUuY3JlYXRlUHVibGlzaGVyID0gZnVuY3Rpb24oY29uZmlnOiBhbnkpOiBhbnkge1xuICBjb25zdCBhZGFwdGVyID0gbG9hZEFkYXB0ZXIoXG4gICAgY29uZmlnLm1lc3NhZ2VRdWV1ZUFkYXB0ZXIsXG4gICAgRXZlbnRFbWl0dGVyTVEsXG4gICAgY29uZmlnXG4gICk7XG4gIGlmICh0eXBlb2YgYWRhcHRlci5jcmVhdGVQdWJsaXNoZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyAncHViU3ViQWRhcHRlciBzaG91bGQgaGF2ZSBjcmVhdGVQdWJsaXNoZXIoKSc7XG4gIH1cbiAgcmV0dXJuIGFkYXB0ZXIuY3JlYXRlUHVibGlzaGVyKGNvbmZpZyk7XG59O1xuXG5QYXJzZU1lc3NhZ2VRdWV1ZS5jcmVhdGVTdWJzY3JpYmVyID0gZnVuY3Rpb24oY29uZmlnOiBhbnkpOiB2b2lkIHtcbiAgY29uc3QgYWRhcHRlciA9IGxvYWRBZGFwdGVyKFxuICAgIGNvbmZpZy5tZXNzYWdlUXVldWVBZGFwdGVyLFxuICAgIEV2ZW50RW1pdHRlck1RLFxuICAgIGNvbmZpZ1xuICApO1xuICBpZiAodHlwZW9mIGFkYXB0ZXIuY3JlYXRlU3Vic2NyaWJlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93ICdtZXNzYWdlUXVldWVBZGFwdGVyIHNob3VsZCBoYXZlIGNyZWF0ZVN1YnNjcmliZXIoKSc7XG4gIH1cbiAgcmV0dXJuIGFkYXB0ZXIuY3JlYXRlU3Vic2NyaWJlcihjb25maWcpO1xufTtcblxuZXhwb3J0IHsgUGFyc2VNZXNzYWdlUXVldWUgfTtcbiJdfQ==