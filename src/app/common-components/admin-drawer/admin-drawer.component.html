<div class="my-side-nav">
  <mat-toolbar>
    <span style="max-width: 150px; overflow: hidden; text-overflow: ellipsis;" *ngIf="shop">{{shop.businessName}}</span>
    <span class="flex-grow-1"></span>
    <button *ngIf="currentUser && currentUser.role === 'admin'" routerLink="/shop" mat-icon-button>
      <mat-icon>arrow_drop_down</mat-icon>
    </button>
  </mat-toolbar>
  <mat-accordion [multi]="true" class="mat-elevation-z0">
    <mat-expansion-panel *ngIf="currentUser && currentUser.role==='admin'" [expanded]="shouldExpand('dashboard')"
                         class="mat-elevation-z0">
      <mat-expansion-panel-header>
        <mat-icon matPrefix color="primary">dashboard</mat-icon>
        <span style="margin-left: 8px">Dashboard</span>
      </mat-expansion-panel-header>
      <mat-nav-list>
        <a mat-list-item routerLink="/dashboard">General</a>
      </mat-nav-list>
    </mat-expansion-panel>

    <mat-divider *ngIf="currentUser && currentUser.role==='admin'"></mat-divider>

    <mat-expansion-panel [expanded]="shouldExpand('sale')" class="mat-elevation-z0">
      <mat-expansion-panel-header>
        <mat-icon matPrefix color="primary">shop_front</mat-icon>
        <span style="margin-left: 8px">Sale</span>
      </mat-expansion-panel-header>
      <mat-nav-list>
        <a mat-list-item routerLink="/sale">Retails</a>
        <a mat-list-item routerLink="/sale/whole">WholeSale</a>
      </mat-nav-list>
    </mat-expansion-panel>

    <mat-divider></mat-divider>

    <mat-expansion-panel *ngIf="currentUser && (currentUser.role==='admin' || currentUser.role === 'manager')"
                         [expanded]="shouldExpand('purchase')" class="mat-elevation-z0">
      <mat-expansion-panel-header>
        <mat-icon matPrefix color="primary">receipts</mat-icon>
        <span style="margin-left: 8px">Purchase</span>
      </mat-expansion-panel-header>
      <mat-nav-list>
        <a mat-list-item routerLink="/purchase">All Purchases</a>
        <a mat-list-item routerLink="/purchase/create">New Purchase</a>
        <a mat-list-item routerLink="/stock" [queryParams]="{t:3}">Suppliers</a>
      </mat-nav-list>
    </mat-expansion-panel>

    <mat-divider *ngIf="currentUser && (currentUser.role==='admin' || currentUser.role === 'manager')"></mat-divider>

    <mat-expansion-panel *ngIf="currentUser && (currentUser.role==='admin' || currentUser.role === 'manager')"
                         [expanded]="shouldExpand('stock')" class="mat-elevation-z0">
      <mat-expansion-panel-header>
        <mat-icon matPrefix color="primary">store</mat-icon>
        <span style="margin-left: 8px">Stock</span>
      </mat-expansion-panel-header>
      <mat-nav-list>
        <a mat-list-item routerLink="/stock" [queryParams]="{t:'0'}">Products</a>
        <a mat-list-item routerLink="/stock" [queryParams]="{t:'1'}">Categories</a>
        <a mat-list-item routerLink="/stock" [queryParams]="{t:'2'}">Units</a>
        <a mat-list-item routerLink="/stock" [queryParams]="{t:'3'}">Suppliers</a>
      </mat-nav-list>
    </mat-expansion-panel>

    <mat-divider *ngIf="currentUser && (currentUser.role==='admin' || currentUser.role === 'manager')"></mat-divider>

    <mat-expansion-panel *ngIf="currentUser && currentUser.role==='admin'" [expanded]="shouldExpand('settings')"
                         class="mat-elevation-z0">
      <mat-expansion-panel-header>
        <mat-icon matPrefix color="primary">settings</mat-icon>
        <span style="margin-left: 8px">Settings</span>
      </mat-expansion-panel-header>
      <mat-nav-list>
        <a mat-list-item routerLink="/settings/general">General</a>
        <a mat-list-item routerLink="/settings/account">Account</a>
      </mat-nav-list>
    </mat-expansion-panel>
  </mat-accordion>
</div>
