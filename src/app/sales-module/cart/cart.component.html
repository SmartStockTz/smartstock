<div id="cart_view" class="cart">
  <mat-toolbar class="mat-elevation-z0" style="z-index: 10000">

    <span [matBadge]="cartProductsArray.length.toString()" matBadgeOverlap="false">Cart</span>
    <span style="flex-grow: 1;"></span>
    <button mat-icon-button (click)="cartdrawer.toggle()" style="float: right;">
      <mat-icon>close</mat-icon>
    </button>
  </mat-toolbar>


  <!--  <div style="padding: 16px">-->
  <!--    <mat-form-field style="width: 100%">-->
  <!--      <mat-label>Discount</mat-label>-->
  <!--      -->
  <!--      <mat-error>Must be number and greater than zero</mat-error>-->
  <!--    </mat-form-field>-->
  <!--  </div>-->

  <div style="padding: 0 16px 16px 16px" *ngIf="isViewedInWholesale">
    <mat-form-field style="width: 100%;">
      <mat-label>Customer Name</mat-label>
      <input type="text"
             matInput [formControl]="customerFormControl" placeholder="Customer Name"
             [matAutocomplete]="auto">
      <mat-autocomplete #auto="matAutocomplete">
        <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
          {{option}}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
    <!--    <mat-form-field style="width: 100%">-->
    <!--      <input type="text" placeholder="Pick one" aria-label="Number" matInput [formControl]="customerFormControl" [matAutocomplete]="auto">-->
    <!--      <mat-autocomplete #auto="matAutocomplete">-->
    <!--        <mat-option *ngFor="let option of options" [value]="option">-->
    <!--          {{option}}-->
    <!--        </mat-option>-->
    <!--      </mat-autocomplete>-->
    <!--    </mat-form-field>-->
  </div>

  <div style="margin-bottom: 300px">
    <mat-nav-list>
      <div *ngFor="let cart of cartProducts | async; let i=index">
        <mat-list-item>
          <button (click)="removeCart(i)" matSuffix mat-icon-button>
            <mat-icon color="warn">delete</mat-icon>
          </button>
          <h4 matLine>{{cart.product.product}}</h4>
          <mat-card-subtitle
            matLine>{{isViewedInWholesale ? '(' + cart.quantity + ') ' : ''}}{{cart.quantity}} {{cart.product.unit}}
            @{{isViewedInWholesale ? cart.product.wholesalePrice : cart.product.retailPrice}}
            = {{cart.quantity * (isViewedInWholesale ? cart.product.wholesalePrice : cart.product.retailPrice)}}
          </mat-card-subtitle>
          <div class="d-flex flex-row" matLine>
            <button color="primary" (click)="decrementQty(i)" mat-icon-button>
              <mat-icon>remove_circle</mat-icon>
            </button>
            <!--          <div class="toolbar-input">-->
            <!--            {{cart.quantity}}-->
            <!--          </div>-->
            <button color="primary" (click)="incrementQty(i)" mat-icon-button>
              <mat-icon>add_circle</mat-icon>
            </button>
          </div>
        </mat-list-item>
        <mat-divider style="margin-left: 5%; margin-right: 5%"></mat-divider>
      </div>
    </mat-nav-list>
    <!--    <div>-->
    <!--      <div class="d-flex flex-row" style="padding: 8px">-->
    <!--        <h5 style="margin: 0">Total</h5>-->
    <!--        <span class="flex-grow-1"></span>-->
    <!--        <h5 style="margin: 0">{{totalCost | currency:'TZS '}}</h5>-->
    <!--      </div>-->
    <!--      <div class="d-flex flex-row align-items-center" style="padding: 8px">-->
    <!--        <mat-card-subtitle>Discount</mat-card-subtitle>-->
    <!--        <span class="flex-grow-1"></span>-->
    <!--        <mat-card-subtitle style="padding-right: 8px">TZS</mat-card-subtitle>-->
    <!--        <input class="toolbar-input" style="width: 100px"-->
    <!--               [value]="0" [formControl]="discountInputControl" type="number">-->
    <!--      </div>-->
    <!--      <div style="padding: 8px">-->
    <!--        <button [disabled]="saleProgress" (click)="checkout()" class="btn-block ft-button" mat-flat-button-->
    <!--                color="primary">-->
    <!--          Checkout  {{(totalCost - discount) | currency:'TZS '}}-->
    <!--          <mat-progress-spinner *ngIf="saleProgress" [diameter]="20" mode="indeterminate" color="primary"-->
    <!--                                style="display: inline-block">-->
    <!--          </mat-progress-spinner>-->
    <!--        </button>-->
    <!--      </div>-->

    <!--    </div>-->
  </div>

  <div
    style="padding: 8px 8px 16px 8px;bottom: 0;width: 100%;position: absolute;background-color: white;z-index: 1000;">
    <mat-divider style="margin-bottom: 7px"></mat-divider>
    <div class="cart-total">
      <h6 style="display: flex ;">
        <span style="flex-grow: 1;">Total</span>
        <span>{{totalCost | currency: 'TZS '}}</span>
      </h6>
      <p style="color: #868688;display: flex;">
        <span style="flex-grow: 1;">Discount( TZS )</span>
        <input autocomplete="false"
               style="border: none; text-align: center;background-color: rgba(0, 170, 7, 0.1); border-radius: 4px;width: 125px;
    height: 35px;"
               type="number" min="0" [formControl]="discountFormControl">
      </p>
    </div>
    <button style="width: 100%;text-align:left;height: 54px;font-size: 20px" color="primary" mat-raised-button>
      <span>Checkout</span>
      <span style="float: right;">{{totalCost | currency: 'TZS '}}</span>
    </button>
  </div>

  <!--  <mat-list>-->
  <!--    <mat-list-item *ngFor="let cart of cartProducts | async; let i = index">-->
  <!--&lt;!&ndash;      <div class="cart-products">&ndash;&gt;-->

  <!--        <div matListIcon matSuffix>-->
  <!--            <span style="display: flex;flex-direction: column;justify-content: center;">-->
  <!--                <mat-icon class="cart-up-down noSelect" color="primary" (click)="incrementQty(i)"-->
  <!--                          style="margin: 0 0 12px -10px;">arrow_drop_up</mat-icon>-->
  <!--              <label-->
  <!--                style="background-color: #027206;text-align: center;z-index:1000;color: white;width: fit-content;width: 36px;padding: 4px;margin: 0;font-size: 12px;border-radius: 6px;">-->
  <!--                {{cart.quantity}}-->
  <!--              </label>-->
  <!--                <mat-icon class="cart-up-down noSelect" color="primary" (click)="decrementQty(i)"-->
  <!--                          style="margin: -20px 0 0 -10px;">arrow_drop_down</mat-icon>-->
  <!--            </span>-->
  <!--        </div>-->

  <!--        <div matLine class="cart-products-detail">-->
  <!--          <h6 class="cart-product-title">{{cart.product.product}}</h6>-->
  <!--          <span style="color: gray;font-size: 12px;flex-grow: 0;">{{cart.product.retailPrice | currency: 'TZS '}}</span>-->

  <!--        </div>-->

  <!--        <div class="cart-products-action">-->
  <!--          <a (click)="removeCart(i)" [matTooltip]="'remove item from cart'" style="right: 0;color: #027206;float:right;">-->
  <!--            <mat-icon>delete</mat-icon>-->
  <!--          </a><br>-->
  <!--          <h6-->
  <!--            style="margin: 0;font-size: 14px;float:right">{{(cart.quantity * cart.product.retailPrice) | currency: 'TZS '}}</h6>-->
  <!--        </div>-->

  <!--&lt;!&ndash;      </div>&ndash;&gt;-->
  <!--&lt;!&ndash;      <mat-divider style="margin: 16px 16px 0 16px;"></mat-divider>&ndash;&gt;-->
  <!--    </mat-list-item>-->
  <!--  </mat-list>-->

</div>
